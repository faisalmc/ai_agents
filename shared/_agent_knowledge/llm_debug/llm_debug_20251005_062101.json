{
  "messages": [
    {
      "role": "system",
      "content": "You are a senior network troubleshooting assistant. You analyze CLI 'show' command outputs from Cisco devices (IOS XE / IOS XR / NX-OS) and suggest next steps. Always return STRICT JSON only (no prose, no markdown, no backticks). If the command output shows an error, include that context in analysis_text and still produce recommendations when possible."
    },
    {
      "role": "user",
      "content": "You are analyzing network device: B-ASBR-1.\nYou are given fresh CLI outputs below. Base your analysis ONLY on these outputs.\nDo NOT reuse conclusions from prior steps unless they are consistent with the outputs in this message.\nRecommend ONLY read-only 'show' commands. Never recommend configuration mode commands.\nIf you believe configuration is needed, instead recommend a 'show' command that would validate the hypothesis.\nIf the output indicates an error (e.g., '% Invalid input', 'Unknown command'), your analysis_text should say so and execution_judgment must be 'error' for that command.\nBe concise and practical.\n\nHere are the command outputs:\n\nCOMMAND: show ip interface brief\nOUTPUT:\nshow ip interface brief\n\nThu Oct  2 20:39:31.903 UTC\n\nInterface                      IP-Address      Status          Protocol Vrf-Name\nLoopback0                      2.0.101.8       Up              Up       default \nMgmtEth0/RP0/CPU0/0            192.168.100.124 Up              Up       default \nGigabitEthernet0/0/0/0         100.64.121.2    Up              Up       default \nGigabitEthernet0/0/0/1         2.2.9.2         Up              Up       default \nGigabitEthernet0/0/0/2         2.2.10.1        Up              Up       default \nGigabitEthernet0/0/0/3         100.64.231.1    Up              Up       default \nGigabitEthernet0/0/0/4         unassigned      Shutdown        Down     default \nGigabitEthernet0/0/0/5         unassigned      Shutdown        Down     default \nRP/0/RP0/CPU0:B-ASBR-1#\n\n\nRecent triage history (last 3 steps, for context only):\n- ran: ['show ip bgp neigh 2.0.101.10'] \u2192 The BGP neighbor 2.0.101.10 is in an Idle state due to 'No route to multi-hop neighbor'. This indicates a potential connectivity issue or misconfiguration preventing the establishment of the BGP session.\n- ran: ['show interface status'] \u2192 The command 'show interface status' resulted in an error due to invalid input. This indicates that the command may not be supported or incorrectly formatted on this device.\n- ran: ['show interface status'] \u2192 The command 'show interface status' resulted in an error indicating invalid input. This suggests that the command may not be supported or there is a syntax issue.\n\nReturn JSON only with this exact shape:\n{\n  \"analysis_text\": \"<short plain analysis derived strictly from the outputs above>\",\n  \"direction\": \"<next diagnostic steps in plain English; no config>\",\n  \"recommended\": [\n    {\"command\": \"<read-only show cmd 1>\", \"tech\": \"<bgp|ospf|interfaces|routing|mpls|misc>\", \"trust_hint\": \"low\"},\n    {\"command\": \"<read-only show cmd 2>\", \"tech\": \"<one of the same categories>\", \"trust_hint\": \"low\"}\n  ],\n  \"execution_judgment\": {\n    \"<the command you just analyzed>\": \"ok\" | \"partial\" | \"error\"\n  }\n} \n\nWhen deciding 'tech':\n- Use **bgp** for any BGP-related show commands (e.g., 'show bgp', 'show ip bgp summary', 'show bgp neighbors').\n- Use **ospf** for OSPF or IGP state commands (e.g., 'show ospf', 'show ip ospf interface').\n- Use **isis** for IS-IS or IGP state commands (e.g., 'show isis neighbor', 'show isis interface brief').\n- Use **interfaces** for link-level or interface-state commands (e.g., 'show interfaces', 'show ip interface brief').\n- Use **routing** for route tables or control-plane lookup commands (e.g., 'show route', 'show ip route summary').\n- Use **mpls** for MPLS or LDP-related commands.\n- Use **misc** if none of the above clearly apply.\n\nThe 'recommended' list MUST contain only read-only 'show' commands.\nIf the output indicates an invalid or failed command, set execution_judgment to \"error\".\nDo not invent facts not present in the outputs.\n"
    }
  ],
  "raw": "{\n  \"analysis_text\": \"The output shows that several interfaces are up, but GigabitEthernet0/0/0/4 and GigabitEthernet0/0/0/5 are down and unassigned. The BGP neighbor 2.0.101.10 is in an Idle state due to 'No route to multi-hop neighbor', indicating a potential connectivity issue. The previous command 'show interface status' resulted in an error, suggesting it may not be supported on this device.\",\n  \"direction\": \"Check the BGP summary and interface details to further diagnose the connectivity issue.\",\n  \"recommended\": [\n    {\"command\": \"show ip bgp summary\", \"tech\": \"bgp\", \"trust_hint\": \"low\"},\n    {\"command\": \"show interfaces\", \"tech\": \"interfaces\", \"trust_hint\": \"low\"}\n  ],\n  \"execution_judgment\": {\n    \"show ip interface brief\": \"ok\"\n  }\n}"
}