(()=>{var Ge=Object.defineProperty;var c=(u,r)=>Ge(u,"name",{value:r,configurable:!0});(globalThis.webpackChunkwebapp=globalThis.webpackChunkwebapp||[]).push([["rollup-secondary_a_required","TS.enterprise","TS.utility"],{9300289889:()=>{(function(){TS.registerModule("api",{})})()},4706726993:()=>{(function(){TS.registerModule("automount",{onStart:function(){var u=TS.redux.getStoreInstance();setTimeout(()=>{TS.interop.automount.mountAllWithStore(u)},0)}})})()},9331508771:()=>{(function(){TS.registerModule("bots",{legacyEnsureBotsInDataArePresent:function(u){var r=TS.interop.utility.extractAllBotIds(u);return TS.interop.bots.ensureBotsArePresent(r)}})})()},2442635577:()=>{(function(){TS.registerModule("click",{onStart:function(){t(),r()},addHandler:function(s,m,v){_.isFunction(s)&&(v=m,m=s,s=null),u.push({selector:s,fn:m,prevent_on_drag:v||!1})},test:function(){return{addAll:r,setupBinding:t,handlers:function(){return u},resetHandlers:function(){u=[]},unbind:function(){$("body").off("click.ts_dot_click"),$("body").off("mousedown.ts_dot_click_mousedown")}}}});var u=[],r=c(function(){TS.click.addHandler(".inline_attachment.clickable, .inline_attachment.clickable + .reply_broadcast_rule",function(s,m){var v=["a",".media_caret",".msg_inline_video_buttons_div"].join(",");if(!$(s.target).closest(v).length){var l;m.is(".reply_broadcast")||m.closest(".reply_broadcast_rule").length?l=m.closest(".message_body").find('[data-action="open_conversation"]'):l=m.find(".attachment_from_url_link"),l[0]&&l[0].click()}},!0)},"_addAll"),t=c(function(){var s={};$("body").on("mousedown.ts_dot_click_mousedown",function(m){s.x=m.clientX,s.y=m.clientY}),$("body").on("click.ts_dot_click",function(m){if(!m.isDefaultPrevented()){var v=$(m.target);if(!(v.parents("[data-reactroot]").length||v.parents(".ReactModalPortal").length)){for(var l=n(m),i,f,g=0;g<u.length;g+=1)if(i=u[g],f=null,!(i.prevent_on_drag&&(m.clientX!=s.x||m.clientY!=s.y))){if(i.selector){if(f=v.closest(i.selector),!f.length)continue;i.fn(m,f,l),m.isDefaultPrevented()&&TS.has_pri[o]&&TS.log(o,`click on ${i.selector}`)}else i.fn(m,l);if(m.isDefaultPrevented())return}}}})},"_setupBinding"),n=c(function(s){var m=$(s.target);if(m.closest("#member_stars_list").length)return"starred_items";if(m.closest("#member_mentions").length)return"mentions";if(m.closest("#file_list").length)return"file_list";if(m.closest("#file_preview_scroller").length)return"file_preview";if(m.closest("#member_preview_scroller").length)return"member_preview";if(m.closest("#convo_scroller").length)return"conversation";if(m.closest("#groups_tab").length)return"groups";if(m.closest("#threads_msgs_scroller_div").length)return"threads";if(m.closest("#channel_page_scroller").length){var v=TS.shared.legacyGetActiveModelOb(),l="channel_page";return v.is_group&&!v.is_mpim?l="group_page":(v.is_im||v.is_mpim)&&(l="im_page"),l}return null},"_getPreviewOrigin"),o=2003})()},4260148387:()=>{(function(){TS.registerModule("compression",{compress:function(m,v,l,i){var f=Date.now();if(l){var g=LZString.compress(v),a=Date.now()-f;return TS.has_pri[s]&&TS.log(s,`${m} took ${a}ms to _compress immediately str.length: ${v.length}`),i({k:m,str:g})}n(m,v,function(h,E){var x=Date.now()-f;TS.has_pri[s]&&TS.log(s,`${m} took ${x}ms for the compression worker to callback (${E}ms spent within the worker) result.length: ${h.length}`),i({k:m,str:h})})},terminate:function(){u&&u.terminate(),u=null}});var u=null,r=0,t={},n=c(function(m,v,l){u||o(),r+=1;var i=`job_key${r}`;t[i]=function(f,g){l(f,g),delete t[i]},u.postMessage({request:"compress",input:v,job_key:i,k:m})},"_doCompressionJob"),o=c(function(){if(u){TS.error("_makeWorker but there is a _worker");return}var m=_.get(TS,"boot_data.vvv_paths.lz_string","/js/libs/lz-string-1.4.4.js"),v=TS.environment.is_dev;(TS.qs_args.local_assets||v)&&m.indexOf("http")!==0&&(m=`${location.protocol}//${location.host}${m}`),u=TS.utility.makeWebWorker(`function() {			self.importScripts('${m}');			self.onmessage = function(e) {				var start = Date.now();				var result;				if (e.data.request === 'compress') {					result = LZString.compress(e.data.input)				}				var elapsed = Date.now() - start;				postMessage({					request: e.data.request,					result: result,					job_key: e.data.job_key,					k: e.data.k,					elapsed: elapsed				});			}		}`,function(l){var i=t[l.data.job_key];if(!i){TS.error(`e.data.job_key:${l.data.job_key} had no record in _callbacks??`);return}i(l.data.result,l.data.elapsed)})},"_makeWorker"),s=488})()},6940318340:()=>{(function(){TS.registerModule("enterprise",{})})()},8377622078:()=>{(function(){TS.registerModule("enterprise.workspaces",{onStart:function(){},showRequestDialog:function(){let{displayModernToast:u=_.noop}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};var r="#generic_dialog",t=".dialog_go",n="enterprise.teams.creationrequests.create",o="#input_ws_team_name",s="#textarea_ws_team_message",m,v;function l(){var i=$(r),f=i.find(t);return m&&v?(f.removeAttr("disabled"),!0):(f.attr("disabled",!0),!1)}c(l,"checkForm"),TS.generic_dialog.start({title:TS.interop.i18n.t("Request creation of a new workspace","enterprise_workspaces")(),body:TS.templates.ws_request_dialog(),show_cancel_button:!0,show_go_button:!0,go_button_text:TS.interop.i18n.t("Send Request","enterprise_workspaces")(),onGo:function(){var i=$(r),f=$(o),g=_.escape(f.val()),a=$(s),h=a.val(),E=i.find(t);E.addClass("ladda-button"),E.attr("data-style","expand-right");var x=Ladda.create(E[0]);x.start();var b={name:_.unescape(g),reason:h};return TS.boot_data.app==="client"&&(b.enterprise_token=TS.model.enterprise_api_token),TS.interop.api.callExpedited(n,b).then(function(){u({type:"success",teamName:g}),TS.generic_dialog.end(),TS.generic_dialog.cancel()}).catch(function(B){if(!B||!B.data){TS.error(`WTF: error, but no response or data on ${n}?`,B);return}var U=B.data;u({type:"error",errorType:U.error,teamName:g}),TS.error(`${n} failed with error: ${U.error||"undefined"}`),x.stop()}),!1}}),$(o).on("keyup change",function(){m=TS.ui.validation.validate($(o)),l()}),$(s).on("keyup change",function(){v=TS.ui.validation.validate($(s)),l()}),$(o).focus(),$(r).find(t).attr("disabled",!0)}})})()},2769613328:()=>{(function(){TS.registerModule("ims",{onStart:function(){TS.prefs.display_real_names_override_changed_sig.add(t),TS.prefs.team_display_real_names_changed_sig.add(t),TS.members.changed_profile_sig.add(r)},getDisplayNameOfUserForIm:function(o){return u(o)}});var u=c(function(o){if(o._display_name)return o._display_name;const s=TS.interop.members.getMemberById(o.user);if(!s)return o.name;const m=TS.interop.rules.members.getPrefCompliantMemberName(s);return m===o.user||m===s.id?o.name:(o._display_name=m,o._display_name)},"_getDisplayNameCached"),r=c(function(o){var s=_.find(TS.model.ims,{user:o.id});s&&n(s)},"_memberRealNameChanged"),t=c(function(){TS.model.ims.forEach(n)},"_realNamePrefChanged"),n=c(function(o){o._display_name=void 0},"_clearDisplayNameCache")})()},1136428304:()=>{(function(){TS.registerModule("members",{changed_deleted_sig:new signals.Signal,changed_profile_sig:new signals.Signal,legacy_is_in_bulk_upsert_mode:!1,legacyUpsertAndSignal:function(a){var h=TS.members.legacyUpsertMember(a);return g(h,a)},legacyUpsertMember:function(a){var h=TS.redux.members.hasMemberWithId(a.id)&&TS.interop.members.getRawMemberById(a.id),E="NOOP",x=[];if(a=TS.interop.members.processMemberForUpserting(a),h){TS.has_pri[i]&&TS.log(i,`updating existing member "${a.id}"`);var b=l(h,a);if(E=b.status,x=b.what_changed,_.includes(x,"deleted")){var B=TS.redux.channels.getImByMemberId(a.id);B&&(B.is_archived=a.deleted)}}else a.id?(E="ADDED",_.includes(r,a.id)&&x.push("is_unknown"),TS.has_pri[i]&&TS.log(i,`adding member "${a.id}"`)):TS.error("bad error, no member.id");if(a.is_self&&a.deleted){TS.reload(null,"member.is_self && member.deleted");return}TS.members.legacy_is_in_bulk_upsert_mode||(E!=="NOOP"&&TS.interop.members.dangerouslyAddMember(a),TS.interop.members.markObjectsAsFresh([a.id]),TS.interop.members.setCanMembersInteract([a]));var U={status:E,member:a,what_changed:x};return TS.members.legacy_is_in_bulk_upsert_mode&&u.push(U),U},legacyGetPrefCompliantMemberNameLowerCase:function(a,h){if(!a)return"";var E=function(){var x=TS.interop.rules.members.getMemberRealNameLowerCase(a);return!TS.interop.members.shouldDisplayRealNames()&&TS.interop.rules.members.getMemberProfileFieldDisplayNameLowerCase(a)&&(x=TS.interop.rules.members.getMemberProfileFieldDisplayNameLowerCase(a)),x}();return h?_.escape(E):E},memberSorterByName:function(a,h){return TS.interop.i18n.sorter(TS.members.legacyGetPrefCompliantMemberNameLowerCase(a),TS.members.legacyGetPrefCompliantMemberNameLowerCase(h))},legacyEnsureMembersInDataArePresent:function(a,h){var E=TS.interop.utility.extractAllMemberIds(a);if(_.get(TS,"model.team.id")==="T02J3DPUE"&&!_.isEmpty(E)){var x=_.some(E,function(B){return B[0]==="U"});if(x){var b={message:`Fetching U users on W team from source: ${h}`,stack:TS.console.getStackTrace()};$.post(TS.boot_data.beacon_error_url,{description:"fetch_u_on_w_team",error_json:JSON.stringify(b),team:_.get(TS,"model.team.id","none"),user:TS.boot_data.user_id,version:TS.boot_data.version_ts})}}return TS.interop.members.ensureMembersArePresent(E)},fetchAndUpsertMembersWithQuery:function(a){return TS.interop.members.fetchAndUpsertMembersWithQuery({query:a}).then(h=>{let{members:E,next_marker:x}=h;return{objects:E,next_marker:x}})},legacyStartBatchUpsert:function(){return TS.members.legacy_is_in_bulk_upsert_mode?!1:(TS.members.legacy_is_in_bulk_upsert_mode=!0,!0)},legacyFinishBatchUpsert:function(){return TS.members.legacy_is_in_bulk_upsert_mode?(TS.members.legacy_is_in_bulk_upsert_mode=!1,TS.interop.members.dangerouslyBulkAddMembers(u.map(a=>a.member)),TS.interop.members.markObjectsAsFresh(_.map(u,"member.id")),TS.interop.members.setCanMembersInteract(u.map(a=>a.member)),u=[],!0):!1},promiseToSearchMembers:function(a){return Promise.resolve(a).then(function(h){return h?(h.query=h.query&&h.query.trim()||"",h.include_org=!!TS.boot_data.page_needs_enterprise&&!!h.include_org,h.org_team_ids=h.include_org&&Array.isArray(h.org_team_ids)?h.org_team_ids:[],h=n(h,TS.interop.searcher.isNewMemberSearch(h)),h._is_new||h.num_remaining>0?o(h):Promise.resolve(h)):Promise.reject(new Error("No search parameters provided"))})},legacySetMemberUnknown:function(a){r.push(a)},test:function(){var a={};return Object.defineProperty(a,"_processExistingMemberForUpserting",{get:function(){return l},set:function(h){l=h}}),a}});var u=[],r=[],t=c(function(a){var h=a?a.is_unknown:!1;return a&&a.is_unknown&&(a.is_unknown=!1),_.pull(r,a.id),h},"_maybeSetMemberKnown"),n=c(function(a,h){return a=a||{},a.hasOwnProperty("_searcher_p")&&h&&a._searcher_p.cancel(),(!a.hasOwnProperty("_cursor_mark")||h)&&(a._cursor_mark=""),a.hasOwnProperty("full_profile_filter")||(a.full_profile_filter=!0),a.hasOwnProperty("include_bots")||(a.include_bots=!0),a.hasOwnProperty("include_deleted")||(a.include_deleted=!1),a.hasOwnProperty("include_self")||(a.include_self=!1),a.hasOwnProperty("include_slackbot")||(a.include_slackbot=!0),a.hasOwnProperty("include_profile_only_users")||(a.include_profile_only_users=!1),a.hasOwnProperty("only_local_team")||(a.only_local_team=!1),a.hasOwnProperty("only_admins")||(a.only_admins=!1),(!a.hasOwnProperty("items")||h)&&(a.items=[]),a.hasOwnProperty("not_member_of")||(a.not_member_of=[]),a.hasOwnProperty("member_of")||(a.member_of=[]),(!a.hasOwnProperty("num_found")||h)&&(a.num_found=0),(!a.hasOwnProperty("num_remaining")||h)&&(a.num_remaining=0),(!a.hasOwnProperty("num_new")||h)&&(a.num_new=0),a.hasOwnProperty("max_api_results")||(a.max_api_results=100),h&&(a._last_query=a.query,a._last_include_org=a.include_org,a._last_org_team_ids=a.org_team_ids),a._is_new=!!h,a},"_readyMemberSearcher"),o=c(function(a){var h=c(function(){return m(a)},"promiseToSearch");return a._is_new?a._searcher_p=h():a._searcher_p=a._searcher_p.then(h),a._searcher_p},"_promiseToSearchMembers"),s=c(function(a){var h=[TS.utility.search.makeClause("is","user")];if(a._last_query){var E=a._last_query.split(/\s*,\s*|\s+/).map(function(k){return k.charAt("0")==="@"?k.substring(1):k}).filter(function(k){return!!k}).map(function(k){return k.length===1||!a.full_profile_filter?TS.utility.search.makeConjunction("OR",[TS.utility.search.makeClause("real_name",k),TS.utility.search.makeClause("display_name",k)]):TS.utility.search.makeClause("fuzzy_with_email",k)});h=h.concat(E)}if(a.not_member_of&&a.not_member_of.length){var x=a.not_member_of.map(function(k){return TS.utility.search.makeClause("not_member_of",k)});h.push(x.length>1?TS.utility.search.makeConjunction("OR",x):x[0])}if(a.member_of&&a.member_of.length){var b=a.member_of.map(function(k){return TS.utility.search.makeClause("member_of",k)});h.push(b.length>1?TS.utility.search.makeConjunction("OR",b):b[0])}if(a._last_include_org&&a._last_org_team_ids.length){var B=a._last_org_team_ids.map(function(k){return TS.utility.search.makeClause("belongs_to_team_id",k)});h.push(B.length>1?TS.utility.search.makeConjunction("OR",B):B[0])}var U=h.length>1?TS.utility.search.makeConjunction("AND",h):h[0],D={query:U,count:a.max_api_results,include_bots:a.include_bots,include_deleted:a.include_deleted,ignore_guest_accounts:a.ignore_guest_accounts,only_local_team:a.only_local_team,only_admins:a.only_admins,include_profile_only_users:a.include_profile_only_users,raw_query:a.query,solr:a.solr};return a._last_include_org&&(D.all_of_org=a._last_include_org),a._cursor_mark&&(D.cursor_mark=a._cursor_mark),a.determine_membership_for_channel&&(D.determine_membership_for_channel=a.determine_membership_for_channel),D},"_buildPromiseToSearchMembersArguments"),m=c(function(a){var h=s(a);return a.num_new=0,TS.utility.search.promiseToSearch(h).then(function(E){if(!E.data.items.length)return Promise.resolve(a);a.num_remaining||(a.num_remaining=E.data.num_found,a.num_found=E.data.num_found),a.num_remaining-=E.data.items.length,a._cursor_mark=E.data.next_cursor_mark;var x=E.data.items.map(function(b){var B=TS.interop.members.getMemberById(b.id);return B||(a._last_include_org&&b.team_id!==TS.model.team.id&&(b.is_primary_owner=!1,b.is_owner=!1,b.is_admin=!1),B=TS.members.legacyUpsertMember(b).member),B}).filter(function(b){return b.is_self&&!a.include_self||TS.interop.rules.members.isSlackbot(b)&&!a.include_slackbot?(a.num_found-=1,!1):a.limit_by_model_relevancy?TS.utility.members.isMemberRelevantToModel(b,a.limit_by_model_relevancy):!0});return a.num_new=x.length,a.items.push.apply(a.items,x),Promise.resolve(a)})},"_promiseToSearchMembersWorker"),v=c(function(a){return _.isObject(a)?_.omitBy(a,function(h,E){return E.indexOf("image_")===0}):a},"_omitImagesFromProfile"),l=c(function(a,h){var E="NOOP",x=[];return Object.keys(h).forEach(function(b){if(b==="profile"){var B=v(a.profile),U=v(h.profile);if(_.isObject(U)){(B.status_text!==U.status_text||B.status_emoji!==U.status_emoji)&&(E="CHANGED",x.push("current_status"));var D=Object.keys(B).filter(function(ee){return typeof U[ee]>"u"}).concat(["status_text","status_emoji"]);B=_.omit(B,D),U=_.omit(U,D),_.isEqual(B,U)||(E="CHANGED",x.push(b))}}else if(b==="enterprise_user")if(a[b])for(var k in h[b])_.isEqual(a[b][k],h[b][k])||(E="CHANGED",x.push(b));else E="CHANGED",x.push(b);else if(b==="id"){var H=a.id!=h.id&&a.enterprise_user&&h.enterprise_user;if(H){var Y=a.enterprise_user.id===a.id,V=h.id!=h.enterprise_user.id;Y&&V&&(E="CHANGED",x.push(b))}}else b==="teams"?(E="CHANGED",x.push(b)):a[b]!=h[b]&&(b==="is_admin"&&TS.has_pri[f]&&(TS.warn(f,`${b}is changing from \`${a[b]}\` to \`${h[b]}\``),TS.console.trace(f)),h[b]&&!TS.utility.isScalar(h[b])?(a[b]=h[b],TS.warn(`${b} is not scalar! it needs to be handled by upsertMember specifically to test if it has changed! ${typeof h[b]}`)):(typeof h[b]!="boolean"||!h[b]!=!a[b])&&(x.push(b),E="CHANGED"))}),t(a)&&x.push("is_unknown"),{status:E,what_changed:x}},"_processExistingMemberForUpserting"),i=4,f=1975,g=c(function(a){if(a.status==="CHANGED"){if(a.what_changed.indexOf("is_unknown")!==-1)return a;a.what_changed.indexOf("profile")!==-1&&TS.members.changed_profile_sig.dispatch(a.member),a.what_changed.indexOf("deleted")!==-1&&TS.members.changed_deleted_sig.dispatch(a.member)}return a},"_signalUpsert")})()},1484214105:()=>{(function(){TS.registerModule("membership",{onStart:function(){var r=1/0;TS.members.changed_deleted_sig.add(u,this,r)}});var u=c(function(){TS.interop.memberCounts.markAllMemberCountsAsStale()},"_invalidateAllMemberCounts")})()},2693193630:()=>{(function(){TS.registerModule("menu.member",{member:null,onStart:function(){},startWithEnterpriseMemberHeader:function(r){var t=15;if(!TS.menu.isRedundantClick(r)&&!TS.model.menu_is_showing){TS.menu.buildIfNeeded(),TS.menu.clean();var n={enterprise_name:$("[data-enterprise-name]").val(),signout_url:TS.boot_data.signout_url};TS.menu.$menu_header.addClass("hidden").empty(),TS.menu.$menu_items.html(TS.templates.menu_enterprise_member_header(n)),TS.menu.$menu_items.on("click.menu","li",u),TS.kb_nav.setSubmitItemHandler(u),TS.menu.start(r,null,{menu_class:"member_menu"});var o=$("[data-header-menu-toggle]"),s=-TS.menu.$menu.outerWidth()+o.outerWidth(),m=o.outerHeight()+t;TS.menu.positionAt(o,s,m),r.preventDefault()}},end:function(){TS.menu.member.member=null,TS.menu.end(),TS.menu.clean()}});var u=c(function(r){var t=$(this).attr("id");t!=="sign_out"&&t!=="view_account"&&(r.preventDefault(),TS.warn(`not sure what to do with clicked element id:${t}`))},"_onEnterpriseMemberHeaderClick")})()},7164614212:()=>{(function(){TS.registerModule("menu",{$menu:null,$submenu:null,$submenu_origin:null,$submenu_parent:null,$menu_header:null,$menu_items:null,$menu_list_container:null,$menu_list:null,$menu_footer:null,menu_lazy_load:null,user_group:null,$target_element:null,$secondary_target_element:null,large_dom_trigger:500,menu_items_hidden:!0,has_submenu:!1,menu_closed_sig:new signals.Signal,onStart:function(){},buildIfNeeded:_.once(function(){TS.menu.$menu=$(TS.templates.menu());var n=TS.menu.$menu;if(TS.boot_data.app!=="mobile"&&TS.qs_args.new_scroll!="0"){if(n.appendTo($("body")),!TS.environment.supports_custom_scrollbar){var o=TS.qs_args.debug_scroll=="1";n.find("#menu_items_scroller").monkeyScroll({debug:o})}n.detach()}TS.menu.$menu_header=n.find("#menu_header"),TS.menu.$menu_body=n.find(".menu_body"),TS.menu.$menu_list_container=n.find("#menu_list_container"),TS.menu.$menu_list=n.find("#menu_list"),TS.menu.$menu_items=n.find("#menu_items"),TS.menu.$menu_footer=n.find("#menu_footer")}),startWithList:function(n,o,s){if(!(!o||!o.length)&&!TS.menu.isRedundantClick(n)){s=s||{},TS.menu.buildIfNeeded(),TS.menu.clean(),TS.menu.$menu_header.addClass("hidden").empty(),TS.menu.$menu_items.html(o.html()),TS.menu.$menu.addClass(s.menu_class),(s.close_on_click||s.onClick)&&TS.menu.$menu_items.on("click.menu","li",function(v){typeof s.onClick=="function"&&s.onClick(v),s.close_on_click&&TS.menu.end()}),TS.menu.start(n,void 0,s);var m=t(s.align_right);TS.menu.positionAt(TS.menu.$target_element,m.left,m.top)}},did_start_slack_menu_signal_listeners:!1,stopListeningForRebuildWorthiness:function(){TS.menu.did_start_slack_menu_signal_listeners=!1},startWithEditTeamProfileListActions:function(n,o,s){if(!TS.menu.isRedundantClick(n)&&!TS.model.menu_is_showing){TS.menu.buildIfNeeded();var m=$(n.target),v=TS.team.getTeamProfileFieldById(m.data("id")),l={id:v.id,hidden:!!(v&&v.is_hidden),is_scim:s.is_scim};TS.menu.clean(),TS.menu.$menu_header.addClass("hidden").empty(),TS.menu.$menu_items.html(TS.templates.admin_menu_edit_team_profile_list_action_items(l)),TS.menu.$menu_items.on("click.menu","li",o),TS.menu.start(n),TS.menu.positionAt(m.find('[data-action="edit_team_profile_list_menu"]'),-(TS.menu.$menu.width()+6),0),TS.menu.keepInBounds()}},positionAt:function(n,o,s){o=o||0,s=s||0;var m=n.offset(),v=m.left+o,l=m.top+s;TS.menu.$menu.css({top:l,left:v})},isRedundantClick:function(n){return!!(n&&TS.menu.last_e&&(n.target==TS.menu.last_e.target||n.currentTarget==TS.menu.last_e.currentTarget))},isLarge:function(){return TS.menu&&TS.menu.$menu&&TS.menu.$menu.find("li").length>TS.menu.large_dom_trigger},start:function(n,o,s){if(s=s||{},TS.menu.last_e=n,!r){var m=$(n.target).offset(),v=m.left+$(n.target).width()+10,l=m.top;o&&(v=n.pageX+10,l=n.pageY+10)}$(".tooltip").hide(),TS.tips.hideAll(),$(n.currentTarget).addClass("active"),TS.menu.$target_element=$(n.currentTarget),TS.model.menu_is_showing=!0;var i=TS.menu.$menu;s.onClose&&i.one("closed",s.onClose),s.menu_class&&i.addClass(s.menu_class);var f=TS.menu.isLarge();r||i.css({top:l,left:v});var g=i.find("#menu_items_scroller");g.scrollTop(0),i.appendTo($("body")),!f&&!r?(i.css("opacity",0),i.stop().transition({opacity:1},200)):i.css("opacity",1),i.find(".menu_close").on("click",TS.menu.end),s.ignore_bounds||TS.menu.keepInBounds(),TS.ui.utility.updateClosestMonkeyScroller(g,!0),TS.menu.menu_lazy_load&&TS.menu.menu_lazy_load.detachEvents&&TS.menu.menu_lazy_load.detachEvents(),TS.menu.menu_lazy_load=TS.menu.$menu_items.find(".lazy").lazyload({container:$("#menu_items_scroller"),all_images_same_size:!0,throttle:250}),s.ignore_bounds||$(window).bind("resize",TS.menu.keepInBounds),$(window.document).bind("keydown",TS.menu.onKeyDown),$("html").bind("mousedown touchstart",TS.menu.onMouseDown);var a=i.find(".menu_list"),h=a.length?a:i.find("#menu_items");TS.menu.has_submenu?TS.kb_nav.start(h,"li:not(.divider)",i,{onLeftKeyDownIfSubmenuExists:TS.menu.onLeftKeyDownIfSubmenuExists,onRightKeyDownIfSubmenuExists:TS.menu.onRightKeyDownIfSubmenuExists}):TS.kb_nav.start(h,"li:not(.divider)");var E=a.length?a.first().find("a, button").first():null;TS.ui&&TS.ui.a11y&&TS.ui.a11y.focusAndAddTabindex(E),r=!1,u=s.on_esc},clean:function(){TS.menu.$menu_footer.empty(),TS.menu.$menu_header.removeClass("hidden"),TS.menu.$menu.removeClass("no_min_width no_max_width profile_preview flex_menu search_filter_menu popover_menu no_icons team_menu member_menu file_menu all_unreads_sort_order_menu searchable_member_list_filter_menu selectable member_file_filter_menu app_card member_file_filter_menu").css("max-height",""),TS.menu.$menu.removeAttr("data-qa"),TS.menu.$menu.find("#menu_items_scroller").css("max-height",""),TS.menu.$menu.find(".arrow, .arrow_shadow").remove(),TS.menu.$menu_items.off("mouseenter.section_header"),TS.menu.$menu.removeClass("narrow_menu"),TS.menu.$menu_body.off("mouseenter.section_header"),TS.menu.$menu.removeClass("date_picker"),TS.boot_data.page_needs_enterprise&&(TS.menu.$menu_list_container.html('<div id="menu_list" role="menu"></div>').removeClass("populated"),TS.menu.$menu_list=TS.menu.$menu.find("#menu_list")),TS.menu.$menu.removeAttr("data-model-ob-id"),TS.menu.$menu.removeAttr("data-thread-ts"),TS.menu.$menu.find(".member_item")&&(TS.menu.$menu.find(".member_item").remove(),TS.menu.$menu.find(".list_items").css("height",0)),u=null},end:function(){TS.menu.$submenu&&TS.menu.$submenu_parent&&TS.menu.$submenu_parent.submenu("destroy"),TS.menu.$menu.width(""),TS.model.menu_is_showing=!1,TS.menu.menu_items_hidden=!0,TS.menu.has_submenu=!1,TS.menu.$submenu_parent=null,TS.menu.submenu_template_args={},TS.menu.did_start_slack_menu_signal_listeners&&TS.menu.stopListeningForRebuildWorthiness();var n=TS.menu.$menu,o=c(function(){TS.model.menu_is_showing||(setTimeout(function(){TS.model.menu_is_showing||(TS.menu.last_e=null)},50),n.detach(),TS.menu.$menu_header.empty(),TS.menu.$menu_footer.empty(),TS.menu.$menu_items.empty(),TS.menu.$menu_items.removeClass("hidden"),TS.menu.$menu_body.empty(),TS.menu.clean())},"menu_end");!TS.menu.isLarge()&&!r?n.stop().transition({opacity:0},200,o):o(),n.trigger("closed"),TS.menu.$target_element&&(TS.menu.$target_element.removeClass("active"),TS.menu.$target_element=null),TS.menu.$secondary_target_element&&(TS.menu.$secondary_target_element.removeClass("active"),TS.menu.$secondary_target_element=null),TS.menu.user_group=null,TS.menu.$menu_header.unbind("click.menu"),TS.menu.$menu_items.off("click.menu"),TS.menu.$menu_body.off("click.menu"),$(window).unbind("resize",TS.menu.keepInBounds),$(window.document).unbind("keydown",TS.menu.onKeyDown),$("html").unbind("mousedown touchstart",TS.menu.onMouseDown),TS.tips.unhideAll(),TS.menu.search_filter_is_showing=!1,n.removeClass("narrow_menu"),TS.menu.menu_lazy_load&&TS.menu.menu_lazy_load.detachEvents&&(TS.menu.menu_lazy_load.detachEvents(),TS.menu.menu_lazy_load=null),TS.kb_nav.end(),TS.menu.menu_closed_sig.dispatch()},onKeyDown:function(n){var o=TS.utility.keymap,s=n.which,m=n.metaKey||n.ctrlKey||n.altKey;s==o.esc?(n.stopPropagation(),n.preventDefault(),TS.menu.end(),u&&u()):!m&&!TS.utility.isArrowKey(s)&&s!=o.tab&&s!=o.enter&&s!=o.shift&&TS.kb_nav.clearHighlightedItem()},onLeftKeyDownIfSubmenuExists:function(){var n=!1;if(TS.menu.$submenu&&TS.menu.$submenu.hasClass("kb_active")){TS.menu.$submenu.removeClass("kb_active"),TS.kb_nav.end(),TS.kb_nav.highlightItemWithKey(TS.menu.$submenu_origin);var o=TS.menu.$menu.find(".menu_list"),s=o.length?o:TS.menu.$menu.find("#menu_items");TS.kb_nav.start(s,"li:not(.divider)",TS.menu.$menu,{onLeftKeyDownIfSubmenuExists:TS.menu.onLeftKeyDownIfSubmenuExists,onRightKeyDownIfSubmenuExists:TS.menu.onRightKeyDownIfSubmenuExists}),["member_current_status_item","switch_teams"].indexOf(TS.menu.$submenu_origin.attr("id"))===-1&&TS.menu.$submenu_origin.submenu("destroy"),n=!0}return n},onRightKeyDownIfSubmenuExists:function(){var n=!1;return TS.menu.$submenu&&(TS.menu.$submenu.hasClass("kb_active")?(TS.menu.$submenu.removeClass("kb_active"),TS.menu.end()):(TS.menu.$submenu.addClass("kb_active"),TS.kb_nav.end(),TS.kb_nav.highlightItemWithKey(TS.menu.$submenu.find("li:not(.divider)").first()),TS.kb_nav.start(TS.menu.$submenu.find("ul"),"li:not(.divider)",TS.menu.$submenu,{onLeftKeyDownIfSubmenuExists:TS.menu.onLeftKeyDownIfSubmenuExists,onRightKeyDownIfSubmenuExists:TS.menu.onRightKeyDownIfSubmenuExists})),n=!0),n},onMouseDown:function(n){var o=$(n.target);(o.closest("#menu, .submenu, .trap_menu_clicks").length===0||o.hasClass("popover_mask"))&&TS.menu.end()},keepInBounds:function(){window.requestAnimationFrame?TS.utility.rAF(TS.menu.keepInBoundsThrottled):TS.menu.keepInBoundsThrottled()},keepInBoundsThrottled:function(){var n=TS.menu.$menu,o=10,s=n.dimensions_rect(),m={top:0+o,right:$(window).width()-o,bottom:$(window).height()-(o+14),left:0+o};TS.utility.doesRectContainRect(m,s)||(s.left<m.left?n.css("left",m.left):s.right>m.right&&n.css("left",Math.max(m.left,m.right-s.width)),s.top<m.top?n.css("top",m.top):s.bottom>m.bottom&&n.css("top",Math.max(m.top,m.bottom-s.height+$(window).scrollTop())))}});var r=!1,t=c(function(n){var o=3,s=TS.menu.$target_element.outerHeight()+o,m=0;return n&&(m=TS.menu.$target_element.outerWidth()-TS.menu.$menu.outerWidth()),{left:m,top:s}},"_getOffsets");$.widget("TS.submenu",{_create:function(){this.element.data("has-submenu",!0);var n=TS.interop.i18n.t("submenu","menu_source")(),o=`<div class="menu submenu${this.options.help?" submenu_help":""}" data-origin-id="${this.element.attr("id")}" data-model-ob-id="${this.element.data("modelObId")}"><ul aria-hidden="true" aria-label="${n}">${this.options.items_html}</ul></div>`,s=-13,m=11,v=TS.menu.$menu.offset().left+TS.menu.$menu.width()+s,l=this.element.offset().top-m;if(this.$submenu=$(o),this.$submenu.appendTo("body"),TS.menu.$submenu=this.$submenu,TS.menu.$submenu_origin=this.element,v+this.$submenu.width()>window.innerWidth){var i=TS.menu.$menu.offset().left-s,f=window.innerWidth-v;i>f&&(v=TS.menu.$menu.offset().left-this.$submenu.width()-s)}if(l+this.$submenu.height()>window.innerHeight){var g=l,a=Math.abs(window.innerHeight-(l+this.$submenu.height()));g>a?l=window.innerHeight-this.$submenu.height()-m:l=m}this.$submenu.css({position:"absolute",left:`${v}px`,top:`${l}px`});var h=this.options.onclick;h&&this.$submenu.on("click",function(E){h.call(this,E)})},_destroy:function(){TS.menu.$submenu=null,TS.menu.$submenu_origin=null,this.options.ondestroy&&this.options.ondestroy(),this.$submenu.remove()}})})();var u},7004812553:()=>{(function(){TS.registerModule("mpims",{onStart:function(){TS.prefs.display_real_names_override_changed_sig.add(r),TS.prefs.team_display_real_names_changed_sig.add(r),TS.members.changed_profile_sig.add(u)},legacyGetMembersInDisplayOrder:function(n){if(n){var o=TS.model&&TS.model.user?TS.model.user.id:TS.boot_data.user_id;return _.chain(n.members).without(o).map(s=>TS.redux.members.getPotentiallyUnknownMemberById(s)).compact().value()}},checkMpimMatch:function(n,o,s){if(n){for(var m=!0,v=!0,l=TS.mpims.legacyGetMembersInDisplayOrder(n),i=0;i<o.length;i+=1){for(var f=!1,g=0;g<l.length;g+=1)(TS.utility.members.checkMemberMatch(l[g],o[i],m)||s&&TS.utility.members.checkMemberMatch(l[g],s[i],m))&&(f=!0);f||(v=!1)}return v}}});var u=c(function(n){TS.model.mpims.forEach(function(o){o.members.indexOf(n.id)!==-1&&t(o)})},"_memberRealNameChanged"),r=c(function(){TS.model.mpims.forEach(t)},"_realNamePrefChanged"),t=c(function(n){n._display_name=void 0},"_clearDisplayNameCache")})()},1515948675:()=>{(function(){TS.registerModule("prefs",{all_notifications_prefs_changed_sig:new signals.Signal,highlight_words_changed_sig:new signals.Signal,seen_welcome_2_changed_sig:new signals.Signal,emoji_mode_changed_sig:new signals.Signal,obey_inline_img_limit_changed_sig:new signals.Signal,expand_inline_imgs_changed_sig:new signals.Signal,expand_internal_inline_imgs_changed_sig:new signals.Signal,expand_non_media_attachments_changed_sig:new signals.Signal,webapp_spellcheck_changed_sig:new signals.Signal,color_names_in_list_changed_sig:new signals.Signal,search_exclude_channels_changed_sig:new signals.Signal,box_enabled_changed_sig:new signals.Signal,dropbox_enabled_changed_sig:new signals.Signal,read_changed_sig:new signals.Signal,push_changed_sig:new signals.Signal,time24_changed_sig:new signals.Signal,sidebar_behavior_changed_sig:new signals.Signal,dtop_notif_changed_sig:new signals.Signal,muted_channels_changed_sig:new signals.Signal,mac_ssb_bullet_changed_sig:new signals.Signal,team_hide_referers_changed_sig:new signals.Signal,sidebar_theme_changed_sig:new signals.Signal,no_invites_widget_in_sidebar_changed_sig:new signals.Signal,k_key_omnibox_auto_hide_count_changed_sig:new signals.Signal,display_real_names_override_changed_sig:new signals.Signal,team_display_real_names_changed_sig:new signals.Signal,team_perms_pref_changed_sig:new signals.Signal,privacy_policy_seen_changed_sig:new signals.Signal,two_factor_update_seen_changed_sig:new signals.Signal,compliance_export_start_changed_sig:new signals.Signal,team_disallow_public_file_urls_changed_sig:new signals.Signal,mentions_exclude_at_channels_changed_sig:new signals.Signal,mentions_exclude_at_user_groups_changed_sig:new signals.Signal,team_auth_mode_changed_sig:new signals.Signal,team_sso_auth_restrictions_changed_sig:new signals.Signal,preferred_skin_tone_changed_sig:new signals.Signal,separate_private_channels_changed_sig:new signals.Signal,separate_shared_channels_changed_sig:new signals.Signal,whats_new_read_changed_sig:new signals.Signal,team_dnd_enabled_changed_sig:new signals.Signal,team_dnd_start_hour_changed_sig:new signals.Signal,team_dnd_end_hour_changed_sig:new signals.Signal,team_invites_only_admins_changed_sig:new signals.Signal,tz_changed_sig:new signals.Signal,keyboard_changed_sig:new signals.Signal,msg_input_send_btn_changed_sig:new signals.Signal,msg_input_send_btn_auto_set_changed_sig:new signals.Signal,team_allow_calls_changed_sig:new signals.Signal,team_calling_app_name_changed_sig:new signals.Signal,team_calling_app_id_changed_sig:new signals.Signal,frecency_jumper_changed_sig:new signals.Signal,jumbomoji_changed_sig:new signals.Signal,hide_hex_swatch_changed_sig:new signals.Signal,channel_sort_changed_sig:new signals.Signal,show_memory_instrument_changed_sig:new signals.Signal,enable_unread_view_changed_sig:new signals.Signal,enable_react_emoji_picker_changed_sig:new signals.Signal,team_disable_file_editing_changed_sig:new signals.Signal,team_disable_file_deleting_changed_sig:new signals.Signal,team_display_email_addresses_changed_sig:new signals.Signal,email_alerts_changed_sig:new signals.Signal,team_uses_customized_custom_status_presets_changed_sig:new signals.Signal,team_loud_channel_mentions_limit_changed_sig:new signals.Signal,locale_changed_sig:new signals.Signal,enable_shared_channels_changed_sig:new signals.Signal,prefs_loaded:!1,setPrefs:function(r){var t=TS.prefs.getPref("muted_channels");TS.redux.prefs.setUserPrefs(r),TS.prefs.prefs_loaded=!0,TS.prefs.mergeFrecencyJumper(TS.ui.frecency.isEnterprise()?TS.prefs.getPref("frecency_ent_jumper"):TS.prefs.getPref("frecency_jumper")),TS.prefs.setLoudChannels(TS.prefs.getPref("loud_channels")),TS.prefs.setSuppressedChannels(TS.prefs.getPref("at_channel_suppressed_channels")),TS.prefs.setPushSuppressedChannels(TS.prefs.getPref("push_at_channel_suppressed_channels")),TS.prefs.setNeverChannels(TS.prefs.getPref("never_channels")),TS.prefs.setMutedChannels(TS.prefs.getPref("muted_channels"),t),TS.prefs.setLoudChannelsSet(TS.prefs.getPref("loud_channels_set")),TS.prefs.setPushLoudChannels(TS.prefs.getPref("push_loud_channels")),TS.prefs.setPushMentionChannels(TS.prefs.getPref("push_mention_channels")),TS.prefs.setPushLoudChannelsSet(TS.prefs.getPref("push_loud_channels_set")),TS.prefs.setSearchExcludeChannels(TS.prefs.getPref("search_exclude_channels")),TS.prefs.setChannelSort(TS.prefs.getPref("channel_sort")),TS.prefs.setSidebarThemeCustomValues(TS.utility.parseJSONOrElse(TS.prefs.getPref("sidebar_theme_custom_values"),void 0)),TS.prefs.setPrefLocal("emoji_autocomplete_big",!1)},setChannelSort:function(r){TS.model.channel_sort=r},setHighlightWords:function(r){TS.prefs.setPrefLocal("highlight_words",r)},setSuppressedChannels:function(r){let{skipSettingLocalPref:t=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};t||TS.prefs.setPrefLocal("at_channel_suppressed_channels",r),TS.model.at_channel_suppressed_channels=[],r&&typeof r=="string"&&(TS.model.at_channel_suppressed_channels=TS.model.at_channel_suppressed_channels.concat(r.split(",")))},setPushSuppressedChannels:function(r){let{skipSettingLocalPref:t=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};t||TS.prefs.setPrefLocal("push_at_channel_suppressed_channels",r),TS.model.push_at_channel_suppressed_channels=[],r&&typeof r=="string"&&(TS.model.push_at_channel_suppressed_channels=TS.model.push_at_channel_suppressed_channels.concat(r.split(",")))},setLoudChannels:function(r){let{skipSettingLocalPref:t=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};t||TS.prefs.setPrefLocal("loud_channels",r),TS.model.loud_channels=[],r&&typeof r=="string"&&(TS.model.loud_channels=TS.model.loud_channels.concat(r.split(",")))},setNeverChannels:function(r){let{skipSettingLocalPref:t=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};t||TS.prefs.setPrefLocal("never_channels",r),TS.model.never_channels=[],r&&typeof r=="string"&&(TS.model.never_channels=TS.model.never_channels.concat(r.split(",")))},setMutedChannels:function(r,t){var n;if(t||(t=TS.prefs.getPref("muted_channels")),t!==r||!u)n=TS.prefs.getPref("muted_channels")&&typeof TS.prefs.getPref("muted_channels")=="string"?TS.prefs.getPref("muted_channels").split(","):[],TS.prefs.setPrefLocal("muted_channels",r);else return;u=!0;var o,s,m=[],v=[];r&&typeof r=="string"&&(m=m.concat(r.split(",")),v=_.difference(n,m));const l=!1;for(o=0;o<m.length;o+=1)s=TS.redux.channels.getEntityById(m[o],l),s&&s.unread_cnt&&(s._show_in_list_even_though_no_unreads=!0);return TS.model.channels.forEach(function(i){TS.notifs.isCorGMuted(i.id)||(i._show_in_list_even_though_no_unreads=!1)}),TS.model.groups.forEach(function(i){TS.notifs.isCorGMuted(i.id)||(i._show_in_list_even_though_no_unreads=!1)}),TS.redux.channels.updateMutedChannels(m),v},setLoudChannelsSet:function(r){let{skipSettingLocalPref:t=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};t||TS.prefs.setPrefLocal("loud_channels_set",r),TS.model.loud_channels_set=[],r&&typeof r=="string"&&(TS.model.loud_channels_set=TS.model.loud_channels_set.concat(r.split(",")))},setPushLoudChannels:function(r){let{skipSettingLocalPref:t=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};t||TS.prefs.setPrefLocal("push_loud_channels",r),TS.model.push_loud_channels=[],r&&typeof r=="string"&&(TS.model.push_loud_channels=TS.model.push_loud_channels.concat(r.split(",")))},setPushMentionChannels:function(r){let{skipSettingLocalPref:t=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};t||TS.prefs.setPrefLocal("push_mention_channels",r),TS.model.push_mention_channels=[],r&&typeof r=="string"&&(TS.model.push_mention_channels=TS.model.push_mention_channels.concat(r.split(",")))},setPushLoudChannelsSet:function(r){let{skipSettingLocalPref:t=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};t||TS.prefs.setPrefLocal("push_loud_channels_set",r),TS.model.push_loud_channels_set=[],r&&typeof r=="string"&&(TS.model.push_loud_channels_set=TS.model.push_loud_channels_set.concat(r.split(",")))},setSearchExcludeChannels:function(r){let{skipSettingLocalPref:t=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};t||TS.prefs.setPrefLocal("search_exclude_channels",r),TS.model.search_exclude_channels=[],r&&typeof r=="string"&&(TS.model.search_exclude_channels=TS.model.search_exclude_channels.concat(r.split(",")))},mergeFrecencyJumper:function(r){return(!r||typeof r!="object")&&(r=TS.utility.parseJSONOrElse(r||null)||{}),TS.model.frecency_jumper=r,!0},legacyOnTeamPrefChanged:function(r){r.name==="msg_edit_window_mins"?TS.prefs.setTeamPrefLocal("msg_edit_window_mins",r.value):r.name==="allow_message_deletion"?TS.prefs.setTeamPrefLocal("allow_message_deletion",!!r.value):r.name==="hide_referers"?(TS.prefs.setTeamPrefLocal("hide_referers",!!r.value),TS.prefs.team_hide_referers_changed_sig.dispatch()):r.name==="display_real_names"?(TS.prefs.setTeamPrefLocal("display_real_names",!!r.value),TS.prefs.team_display_real_names_changed_sig.dispatch()):r.name==="display_email_addresses"?(TS.prefs.setTeamPrefLocal("display_email_addresses",!!r.value),TS.prefs.team_display_email_addresses_changed_sig.dispatch()):r.name.indexOf("who_can_")===0?TS.prefs.getTeamPref(r.name)!=r.value&&(TS.prefs.setTeamPrefLocal(r.name,r.value),TS.prefs.team_perms_pref_changed_sig.dispatch(r.name)):r.name==="compliance_export_start"?TS.prefs.getTeamPref("compliance_export_start")!=r.value&&(TS.prefs.setTeamPrefLocal("compliance_export_start",r.value),TS.prefs.compliance_export_start_changed_sig.dispatch()):r.name==="disallow_public_file_urls"?(TS.prefs.setTeamPrefLocal("disallow_public_file_urls",!!r.value),TS.prefs.team_disallow_public_file_urls_changed_sig.dispatch()):r.name==="auth_mode"?(TS.prefs.setTeamPrefLocal("auth_mode",r.value),TS.prefs.team_auth_mode_changed_sig.dispatch()):r.name==="sso_auth_restrictions"?(TS.prefs.setTeamPrefLocal("sso_auth_restrictions",r.value),TS.prefs.team_sso_auth_restrictions_changed_sig.dispatch()):r.name==="dnd_enabled"?(TS.prefs.setTeamPrefLocal("dnd_enabled",r.value),TS.prefs.team_dnd_enabled_changed_sig.dispatch()):r.name==="dnd_start_hour"?(TS.prefs.setTeamPrefLocal("dnd_start_hour",r.value),TS.prefs.team_dnd_start_hour_changed_sig.dispatch()):r.name==="dnd_end_hour"?(TS.prefs.setTeamPrefLocal("dnd_end_hour",r.value),TS.prefs.team_dnd_end_hour_changed_sig.dispatch()):r.name==="invites_only_admins"?(TS.prefs.setTeamPrefLocal("invites_only_admins",r.value),TS.prefs.team_invites_only_admins_changed_sig.dispatch()):r.name==="allow_calls"?(TS.prefs.setTeamPrefLocal("allow_calls",r.value),TS.prefs.team_allow_calls_changed_sig.dispatch()):r.name==="calling_app_id"?(TS.prefs.setTeamPrefLocal("calling_app_id",r.value),TS.prefs.team_calling_app_id_changed_sig.dispatch()):r.name==="calling_app_name"?(TS.prefs.setTeamPrefLocal("calling_app_name",r.value),TS.prefs.team_calling_app_name_changed_sig.dispatch()):r.name==="disable_file_editing"?(TS.prefs.setTeamPrefLocal("disable_file_editing",r.value),TS.prefs.team_disable_file_editing_changed_sig.dispatch()):r.name==="disable_file_deleting"?(TS.prefs.setTeamPrefLocal("disable_file_deleting",r.value),TS.prefs.team_disable_file_deleting_changed_sig.dispatch()):r.name==="uses_customized_custom_status_presets"?(TS.prefs.setTeamPrefLocal(r.name,r.value),TS.prefs.team_uses_customized_custom_status_presets_changed_sig.dispatch()):r.name==="loud_channel_mentions_limit"?(TS.prefs.setTeamPrefLocal(r.name,r.value),TS.prefs.team_loud_channel_mentions_limit_changed_sig.dispatch()):r.name==="enable_shared_channels"?(TS.prefs.setTeamPrefLocal(r.name,r.value),TS.prefs.enable_shared_channels_changed_sig.dispatch()):r.name==="dropbox_legacy_picker"?(TS.prefs.setTeamPrefLocal(r.name,r.value),TS.prefs.dropbox_enabled_changed_sig.dispatch()):TS.prefs.setTeamPrefLocal(r.name,r.value)},getPref:function(r){return TS.redux.prefs.getUserPref(r)},setPrefLocal:function(r,t){TS.redux.prefs.setUserPref(r,t)},getTeamPref:function(r){return TS.redux.prefs.getTeamPref(r)},setTeamPrefLocal:function(r,t){TS.redux.prefs.setTeamPref(r,t)},legacyOnPrefChanged:function(r){switch(r.name){case"all_notifications_prefs":TS.prefs.setPrefLocal("all_notifications_prefs",r.value),TS.prefs.all_notifications_prefs_changed_sig.dispatch(r.value);break;case"locale":TS.prefs.setPrefLocal("locale",r.value),TS.prefs.locale_changed_sig.dispatch(r.value);break;case"flannel_server_pool":TS.prefs.setPrefLocal("flannel_server_pool",r.value);break;case"color_names_in_list":TS.prefs.setPrefLocal("color_names_in_list",!!r.value),TS.prefs.color_names_in_list_changed_sig.dispatch();break;case"display_real_names_override":TS.prefs.setPrefLocal("display_real_names_override",r.value),TS.prefs.display_real_names_override_changed_sig.dispatch();break;case"growls_enabled":TS.prefs.setPrefLocal("growls_enabled",!!r.value),TS.prefs.dtop_notif_changed_sig.dispatch();break;case"sidebar_theme":TS.prefs.getPref("sidebar_theme")!==r.value&&(TS.prefs.setPrefLocal("sidebar_theme",r.value),TS.prefs.sidebar_theme_changed_sig.dispatch());break;case"sidebar_theme_custom_values":TS.prefs.getPref("sidebar_theme_custom_values")!==r.value&&(TS.prefs.setSidebarThemeCustomValues(JSON.parse(r.value)),TS.prefs.sidebar_theme_changed_sig.dispatch());break;case"expand_inline_imgs":TS.prefs.setPrefLocal("expand_inline_imgs",!!r.value),TS.prefs.expand_inline_imgs_changed_sig.dispatch();break;case"webapp_spellcheck":TS.prefs.setPrefLocal("webapp_spellcheck",!!r.value),TS.prefs.webapp_spellcheck_changed_sig.dispatch();break;case"expand_internal_inline_imgs":TS.prefs.setPrefLocal("expand_internal_inline_imgs",!!r.value),TS.prefs.expand_internal_inline_imgs_changed_sig.dispatch();break;case"expand_non_media_attachments":TS.prefs.setPrefLocal("expand_non_media_attachments",!!r.value),TS.prefs.expand_non_media_attachments_changed_sig.dispatch();break;case"messages_theme":TS.prefs.setPrefLocal("messages_theme",r.value),TS.prefs.setTheme(),TS.prefs.messages_theme_changed_sig.dispatch();break;case"highlight_words":TS.prefs.setHighlightWords(r.value),TS.prefs.highlight_words_changed_sig.dispatch();break;case"at_channel_suppressed_channels":TS.prefs.setSuppressedChannels(r.value),TS.prefs.dtop_notif_changed_sig.dispatch();break;case"push_at_channel_suppressed_channels":TS.prefs.setPushSuppressedChannels(r.value),TS.prefs.push_changed_sig.dispatch();break;case"loud_channels":TS.prefs.setLoudChannels(r.value);break;case"never_channels":TS.prefs.setNeverChannels(r.value);break;case"muted_channels":TS.prefs.setMutedChannels(r.value),TS.prefs.muted_channels_changed_sig.dispatch();break;case"loud_channels_set":TS.prefs.setLoudChannelsSet(r.value),TS.prefs.dtop_notif_changed_sig.dispatch();break;case"push_loud_channels":TS.prefs.setPushLoudChannels(r.value);break;case"push_mention_channels":TS.prefs.setPushMentionChannels(r.value);break;case"push_loud_channels_set":TS.prefs.setPushLoudChannelsSet(r.value),TS.prefs.push_changed_sig.dispatch();break;case"emoji_use":break;case"user_colors":break;case"graphic_emoticons":TS.prefs.setPrefLocal("graphic_emoticons",r.value),TS.prefs.emoji_mode_changed_sig.dispatch();break;case"ss_emojis":TS.prefs.setPrefLocal("ss_emojis",r.value),TS.prefs.emoji_mode_changed_sig.dispatch();break;case"obey_inline_img_limit":TS.prefs.setPrefLocal("obey_inline_img_limit",r.value),TS.prefs.obey_inline_img_limit_changed_sig.dispatch();break;case"search_only_my_channels":case"search_only_current_team":case"search_exclude_bots":break;case"search_exclude_channels":TS.prefs.setSearchExcludeChannels(r.value),TS.prefs.search_exclude_channels_changed_sig.dispatch();break;case"has_uploaded":TS.prefs.setPrefLocal("has_uploaded",!!r.value);break;case"has_invited":TS.prefs.setPrefLocal("has_invited",!!r.value);break;case"has_created_channel":TS.prefs.setPrefLocal("has_created_channel",!!r.value);break;case"no_joined_overlays":TS.prefs.setPrefLocal("no_joined_overlays",!!r.value);break;case"no_created_overlays":TS.prefs.setPrefLocal("no_created_overlays",!!r.value);break;case"seen_welcome_2":TS.prefs.setPrefLocal("seen_welcome_2",!!r.value),TS.prefs.seen_welcome_2_changed_sig.dispatch();break;case"box_enabled":TS.prefs.setPrefLocal("box_enabled",!!r.value),TS.prefs.box_enabled_changed_sig.dispatch();break;case"dropbox_enabled":TS.prefs.setPrefLocal("dropbox_enabled",!!r.value),TS.prefs.dropbox_enabled_changed_sig.dispatch();break;case"mark_msgs_read_immediately":TS.prefs.getPref("mark_msgs_read_immediately")!==!!r.value&&(TS.prefs.setPrefLocal("mark_msgs_read_immediately",!!r.value),TS.prefs.read_changed_sig.dispatch());break;case"start_scroll_at_oldest":TS.prefs.getPref("start_scroll_at_oldest")!==!!r.value&&(TS.prefs.setPrefLocal("start_scroll_at_oldest",!!r.value),TS.prefs.read_changed_sig.dispatch());break;case"mac_ssb_bullet":TS.prefs.getPref("mac_ssb_bullet")!==!!r.value&&(TS.prefs.setPrefLocal("mac_ssb_bullet",!!r.value),TS.prefs.mac_ssb_bullet_changed_sig.dispatch());break;case"all_channels_loud":TS.prefs.getPref("all_channels_loud")!==!!r.value&&(TS.prefs.setPrefLocal("all_channels_loud",!!r.value),TS.prefs.dtop_notif_changed_sig.dispatch());break;case"push_everything":TS.prefs.getPref("push_everything")!==!!r.value&&(TS.prefs.setPrefLocal("push_everything",!!r.value),TS.prefs.push_changed_sig.dispatch());break;case"push_mention_alert":TS.prefs.getPref("push_mention_alert")!==!!r.value&&(TS.prefs.setPrefLocal("push_mention_alert",!!r.value),TS.prefs.push_changed_sig.dispatch());break;case"push_dm_alert":TS.prefs.getPref("push_dm_alert")!==!!r.value&&(TS.prefs.setPrefLocal("push_dm_alert",!!r.value),TS.prefs.push_changed_sig.dispatch());break;case"time24":TS.prefs.getPref("time24")!==!!r.value&&(TS.prefs.setPrefLocal("time24",!!r.value),TS.prefs.time24_changed_sig.dispatch());break;case"sidebar_behavior":TS.prefs.getPref("sidebar_behavior")!=r.value&&(TS.prefs.setPrefLocal("sidebar_behavior",r.value),TS.prefs.sidebar_behavior_changed_sig.dispatch());break;case"two_factor_update_seen":TS.model.two_factor_update_seen!=r.value&&(TS.mode.prefs.two_factor_update_seen=r.value,TS.prefs.two_factor_update_seen_changed_sig.dispatch());break;case"privacy_policy_seen":TS.prefs.getPref("privacy_policy_seen")!=r.value&&(TS.prefs.setPrefLocal("privacy_policy_seen",r.value),TS.prefs.privacy_policy_seen_changed_sig.dispatch());break;case"last_seen_at_channel_warning":TS.prefs.getPref("last_seen_at_channel_warning")!=r.value&&TS.prefs.setPrefLocal("last_seen_at_channel_warning",r.value);break;case"mentions_exclude_at_channels":TS.prefs.getPref("mentions_exclude_at_channels")!=r.value&&(TS.prefs.setPrefLocal("mentions_exclude_at_channels",r.value),TS.prefs.mentions_exclude_at_channels_changed_sig.dispatch());break;case"mentions_exclude_at_user_groups":TS.prefs.getPref("mentions_exclude_at_user_groups")!=r.value&&(TS.prefs.setPrefLocal("mentions_exclude_at_user_groups",r.value),TS.prefs.mentions_exclude_at_user_groups_changed_sig.dispatch());break;case"no_invites_widget_in_sidebar":TS.prefs.getPref("no_invites_widget_in_sidebar")!=r.value&&(TS.prefs.setPrefLocal("no_invites_widget_in_sidebar",r.value),TS.prefs.no_invites_widget_in_sidebar_changed_sig.dispatch());break;case"k_key_omnibox_auto_hide_count":TS.prefs.getPref("k_key_omnibox_auto_hide_count")!=r.value&&(TS.prefs.setPrefLocal("k_key_omnibox_auto_hide_count",r.value),TS.prefs.k_key_omnibox_auto_hide_count_changed_sig.dispatch());break;case"show_sidebar_quickswitcher_button":TS.prefs.getPref("show_sidebar_quickswitcher_button")!=r.value&&TS.prefs.setPrefLocal("show_sidebar_quickswitcher_button",r.value);break;case"preferred_skin_tone":TS.prefs.getPref("preferred_skin_tone")!=r.value&&(TS.prefs.setPrefLocal("preferred_skin_tone",r.value),TS.prefs.preferred_skin_tone_changed_sig.dispatch());break;case"separate_private_channels":TS.prefs.getPref("separate_private_channels")!=r.value&&(TS.prefs.setPrefLocal("separate_private_channels",r.value),TS.prefs.separate_private_channels_changed_sig.dispatch());break;case"separate_shared_channels":TS.prefs.getPref("separate_shared_channels")!=r.value&&(TS.prefs.setPrefLocal("separate_shared_channels",r.value),TS.prefs.separate_shared_channels_changed_sig.dispatch());break;case"whats_new_read":TS.prefs.getPref("whats_new_read")!=r.value&&(TS.prefs.setPrefLocal("whats_new_read",r.value),TS.prefs.whats_new_read_changed_sig.dispatch());break;case"tz":TS.prefs.getPref("tz")!=r.value&&(TS.prefs.setPrefLocal("tz",r.value),TS.prefs.tz_changed_sig.dispatch());break;case"keyboard":TS.prefs.getPref("keyboard")!=r.value&&(TS.prefs.setPrefLocal("keyboard",r.value),TS.prefs.keyboard_changed_sig.dispatch());break;case"msg_input_send_btn":TS.prefs.getPref("msg_input_send_btn")!=r.value&&(TS.prefs.setPrefLocal("msg_input_send_btn",r.value),TS.prefs.msg_input_send_btn_changed_sig.dispatch());break;case"msg_input_send_btn_auto_set":TS.prefs.getPref("msg_input_send_btn_auto_set")!=r.value&&(TS.prefs.setPrefLocal("msg_input_send_btn_auto_set",r.value),TS.prefs.msg_input_send_btn_auto_set_changed_sig.dispatch());break;case"frecency_jumper":if(TS.ui.frecency.isEnterprise())break;TS.prefs.conditionallyClogFrecencyDueToSizeChange("PREF_USER_TEAM_FRECENCY_SHRINKAGE",JSON.stringify(TS.model.frecency_jumper),r.value),TS.prefs.mergeFrecencyJumper(r.value)&&TS.prefs.frecency_jumper_changed_sig.dispatch();break;case"frecency_ent_jumper":TS.prefs.conditionallyClogFrecencyDueToSizeChange("PREF_USER_ORG_FRECENCY_SHRINKAGE",JSON.stringify(TS.model.frecency_jumper),r.value),TS.log(666,"Received a pref_change event for frecency_ent_jumper."),TS.prefs.mergeFrecencyJumper(r.value)&&TS.prefs.frecency_jumper_changed_sig.dispatch();break;case"jumbomoji":TS.prefs.getPref("jumbomoji")!=r.value&&(TS.prefs.setPrefLocal("jumbomoji",r.value),TS.prefs.jumbomoji_changed_sig.dispatch());break;case"hide_hex_swatch":TS.prefs.getPref("hide_hex_swatch")!=r.value&&(TS.prefs.setPrefLocal("hide_hex_swatch",r.value),TS.prefs.hide_hex_swatch_changed_sig.dispatch());break;case"a11y_animations":TS.prefs.getPref("a11y_animations")!==r.value&&TS.prefs.setPrefLocal("a11y_animations",r.value);break;case"show_memory_instrument":TS.prefs.getPref("show_memory_instrument")!==r.value&&(TS.prefs.setPrefLocal("show_memory_instrument",r.value),TS.prefs.show_memory_instrument_changed_sig.dispatch());break;case"channel_sort":TS.prefs.getPref("channel_sort")!==r.value&&(TS.prefs.setPrefLocal("channel_sort",r.value),TS.prefs.setChannelSort(TS.prefs.getPref("channel_sort")),TS.prefs.channel_sort_changed_sig.dispatch());break;case"enable_unread_view":TS.prefs.getPref("enable_unread_view")!==r.value&&(TS.prefs.setPrefLocal("enable_unread_view",r.value),TS.prefs.enable_unread_view_changed_sig.dispatch());break;case"enable_react_emoji_picker":TS.prefs.getPref("enable_react_emoji_picker")!==r.value&&(TS.prefs.setPrefLocal("enable_react_emoji_picker",r.value),TS.prefs.enable_react_emoji_picker_changed_sig.dispatch());break;case"client_logs_pri":TS.prefs.setPrefLocal(r.name,r.value),TS.console.setAppropriatePri();break;case"email_alerts":TS.prefs.setPrefLocal(r.name,r.value),TS.prefs.email_alerts_changed_sig.dispatch();break;default:TS.prefs.setPrefLocal(r.name,r.value)}},hex_regex:/^#?([0-9a-f]{6})$/i,conditionallyClogFrecencyDueToSizeChange:function(r,t,n){n.length/t.length<.1&&TS.interop.clog.track(r,{updated_user_client_prefs:{existing_frecency:t,new_frecency:n}})},setSidebarThemeCustomValues:function(r){var t=!1;r&&typeof r=="object"&&r.length===void 0&&_.forOwn(r,function(n,o){if(t=!1,!n||!n.substr||(r[o]=n.substr(0,7),!n.match(TS.prefs.hex_regex)))return!1;t=!0}),t?TS.prefs.setPrefLocal("sidebar_theme_custom_values",JSON.stringify(r)):(TS.prefs.setPrefLocal("sidebar_theme","default"),TS.prefs.setPrefLocal("sidebar_theme_custom_values",JSON.stringify(TS.sidebar_themes.default_themes.default_theme)))},setPrefByAPI:function(r,t){return TS.interop.api.callExpedited("users.prefs.set",r).then(function(n){const{data:s,args:m}=n;if(s&&s.prefs&&m){const v=m.name&&[m.name]||_.keys(TS.interop.url.queryStringParse(m.prefs));_.forEach(v,l=>TS.prefs.legacyOnPrefChanged({name:l,value:s.prefs[l]}))}if(t)return t(!0,s,m)}).catch(function(n){const{args:o}=n;var s;o.hasOwnProperty("name")?s=`pref name: ${o.name}`:o.prefs&&(s="(multiple prefs)"),TS.interop.utility.getLogger({getState:TS.redux.getState}).error(s,"TS.prefs.setPrefByAPI call got a not ok rsp",{subtype:"API response error"}),setTimeout(function(){o.prefs?TS.error("multi preferences setting failed."):TS.error(`"${o.name}" preference setting failed.`)},0)})},setTeamPrefByAPI:function(r,t,n){return TS.interop.api.callExpedited("team.prefs.set",{prefs:JSON.stringify(r)}).then(function(o){const{data:s}=o;if(TS.web){n=n||[];var m=Object.keys(r).concat(n);m.forEach(function(v){s.prefs.hasOwnProperty(v)&&(r.hasOwnProperty(v)||TS.prefs.getTeamPref(v)!==s.prefs[v])&&TS.prefs.legacyOnTeamPrefChanged({name:v,value:s.prefs[v]})})}return Promise.resolve(s.prefs)}).catch(function(o){const{data:s}=o;return t&&t(s),Promise.reject(s)})},removeTeamFromEnterpriseExcludeTeamPref:function(r){if(!TS.boot_data.page_needs_enterprise)return;const t=TS.prefs.getPref("enterprise_excluded_app_teams");if(!t)return;const n=t?t.split(","):[];_.pull(n,r),TS.prefs.setPrefByAPI({name:"enterprise_excluded_app_teams",value:n.join(",")})}});var u=!1})()},1386085343:()=>{(function(){TS.registerModule("redux.bots",{bulkUpsertBots:function(u){_.isArray(u)&&TS.redux.dispatch(TS.interop.redux.models.bots.bulkUpsertBots({bots:u}))}})})()},3657898688:()=>{(function(){TS.registerModule("redux.channels.interop",{maybeWrapEntity:function(D){return!D||!D.id?D:U(D.id)}});var u=TS.interop.channels.getChannelById,r={},t={},n={},o=c(function(){var D=window.Proxy&&B();return D},"_shouldWrapEntityInProxyObject"),s=c(function(D,k,H){if(!(!D||!k)){var Y={id:D};Y[k]=H,TS.interop.channels.updateOneKeyForChannel(Y)}},"_updateOneKeyForChannel"),m=["_show_in_list_even_though_no_unreads","deleted","has_draft","is_archived","is_frozen","is_channel","is_ext_shared","is_group","is_im","is_member","is_mpim","is_open","is_org_shared","is_pending_ext_shared","is_starred","last_read","members","priority","unread_cnt","unread_highlight_cnt","internalTeamIds","pendingAndConnectedTeamIds"],v=["_display_name","_archive_msgs","_checking_at_channel_status","_delayed_fetch_timer","_did_defer_initial_msg_history","_display_name_lc","_display_name_truncated","_i18n_ns_history","_i18n_ns","_internal_name","_jumper_previous_name_match","_latest_via_users_counts","_mark_most_recent_read_timer","_marked_reason","_members","_mention_count_display_via_users_counts","_name_lc","_prev_last_read","_score","_users_counts_info","active_members","can_thread","create_channel","created","creator","date_created","enterprise_id","fetched_history_after_scrollback_time","has_fetched_history_after_scrollback","has_pins","history_changed","history_fetch_failed","history_fetch_retries","history_is_being_fetched","id","inherit","is_default","is_general","is_global_shared","is_limited","is_moved","is_non_threadable","is_org_default","is_org_mandatory","is_private","is_read_only","is_thread_only","last_made_active","last_msg_input","latest","length","member","msgs","name_normalized","name","needs_joined_message","never_needs_joined_msg","note","num_members","old_name","oldest_msg_ts","opened_this_session","org","parent_group","pinned_items","pinned_items_count","presence","previous_names","purpose","scroll_top","shares","domain","tooltip","topic","unlinked","unread_count_display","unread_count","unread_highlight_cnt_in_client","unread_highlights","unreads","user","was_archived_this_session","isUnknown","isNonExistent","fromAnotherTeam","internalTeamIds","team_id","pendingAndConnectedTeamIds","previously_connected_team_ids","pending_connected_team_ids","conversation_host_id"],l=["_get","_is_interop_channel_object","_set","_setWithReduxAction","attributes","children","disabled","is_broadcast_keyword","is_divider","is_emoji","is_usergroup","is_view","is_app_action","nodeType","old_name","props_to_define","selector","then","title","toObject","toJSON","window","@@toStringTag"],i=_.reduce(m,function(D,k){return D[k]=!0,D},{}),f=_.reduce(v,function(D,k){return D[k]=!0,D},{}),g=_.reduce(l,function(D,k){return D[k]=!0,D},{}),a={},h=c(function(D,k){if(!f[k]&&!i[k]&&!g[k]&&_.isString(k)){TS.console.logStackTrace(`Accessing an unknown key ${k} on a model object`),n[k]||(n[k]=!0),B()&&TS.console.error(`Dev only warning: Trying to get an unknown field "${k}" from a model object. If this is not a typo and you are relying on this property, please try and store this data outside of the model ob, or add to the model_ob_keys_as_map whitelist in TS.redux.channels.interop.source.js. Questions? Feel free to ask in #dhtml`);var H=u(D.id);return H&&H[k]}return D[k]},"_proxyGet"),E=c(function(D,k,H){if(_.isString(k)&&(r[k]=(r[k]||0)+1),!f[k]&&!i[k]&&_.isString(k)){if(TS.console.logStackTrace(`Setting an unknown key ${k} on a model object`),n[k]||(n[k]=!0),B())throw new Error(`Dev only warning: Trying to set an unknown field "${k}" on a model object. If this is not a typo and you are relying on this property, please try and store this data outside of the model ob, or add to the model_ob_keys_as_map whitelist in TS.redux.channels.interop.source.js. Questions? Feel free to ask in #dhtml`);var Y=u(D.id);Y&&(Y[k]=H)}return D[k]=H,!0},"_proxySet"),x=c(function(D){this.id=D,Object.defineProperties(this,this.props_to_define)},"_Channel"),b={};_.without(v,"id").forEach(function(D){b[D]={enumerable:!0,get:function(){return this._get(D)},set:function(k){return this._set(D,k)}},m.forEach(function(k){b[k]={enumerable:!0,get:function(){return this._get(k)},set:function(H){return this._setWithReduxAction(k,H)}}})}),x.prototype.props_to_define=b,x.prototype._is_interop_channel_object=!0,x.prototype._get=function(D){var k=u(this.id);if(k)return k[D]},x.prototype._set=function(D,k){var H=u(this.id);return H&&(H[D]=k),!0},x.prototype._setWithReduxAction=function(D,k){var H=u(this.id);return H&&H[D]!==k&&(s(this.id,D,k),t[D]=(t[D]||0)+1),!0};var B=c(function(){return TS.boot_data&&(TS.boot_data.version_ts==="dev"||TS.boot_data.version_ts==="local_js")},"_isDev"),U=c(function(D){if(!D)throw new Error("Must pass in a valid id to _createWrappedEntityById");var k,H=o();return a[D]?k=a[D]:(k=new x(D),H&&(k=new window.Proxy(k,{get:function(Y,V){return h(Y,V)},set:function(Y,V,ee){return E(Y,V,ee)}})),a[D]=k),k},"_createWrappedEntityById")})()},3706413573:()=>{(function(){TS.registerModule("redux.channels",{onStart:function(){u=!0,t=TS.interop.rules.channels.isIm||r,Object.defineProperty(TS.model,"channels",{get:function(){return i("channels")}}),Object.defineProperty(TS.model,"groups",{get:function(){return i("groups")}}),Object.defineProperty(TS.model,"mpims",{get:function(){return i("mpims")}}),Object.defineProperty(TS.model,"ims",{get:function(){return i("ims")}})},bulkAddEntities:function(f){TS.interop.channels.bulkAddChannels({channels:f})},updateMutedChannels:function(){let f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];var g=_.reduce(f,function(a,h){return a[h]=!0,a},{});TS.redux.dispatch(TS.interop.redux.actions.setMutedChannels(g))},getEntityById:function(f,g){return TS.interop.channels.getEntityById(f,g)},getPublicOrPrivateChannelByName:function(f){var g=o(f);if(TS.interop.rules.channels.isPublicChannel(g)||TS.interop.rules.channels.isPrivateChannel(g))return g},getImByMemberId:function(f){var g=s(f),a=TS.redux.channels.getEntityById(g);return t(a)?a:null},test:function(){var f={};return f}});let u=!1;function r(){TS.interop.utility.getLogger({getState:TS.redux.getState}).error(`missing-isIm: onStartDidRun=${u}, i(${_.has(window,"TS.interop")}), i.r(${_.has(window,"TS.interop.rules")}), i.r.c(${_.has(window,"TS.interop.rules.channels")}), i.r.c.i(${_.has(window,"TS.interop.rules.channels.isIm")})`);const f=Date.now()-(window.localStorage.isImBugLastEncountered||0);throw localStorage.isImBugLastEncountered=Date.now(),f>6e4&&TS.reload(null,"isIM bug detected"),new Error("TS.interop.rules.channels.isIm not present on page, not sure how to proceed")}c(r,"_isImErrorHandler");var t=r,n=TS.interop.channels.getAllChannels,o=TS.interop.channels.getChannelByName,s=TS.interop.channels.getImIdByMemberId,m,v={},l={channels:void 0,groups:void 0,mpims:void 0,ims:void 0},i=c(function(f){var g=n(),a;switch(f){case"channels":a=c(function(h){return h.is_channel&&!h.fromAnotherTeam},"filter");break;case"groups":a=c(function(h){return h.is_group&&!h.is_mpim&&!h.fromAnotherTeam},"filter");break;case"ims":a=t;break;case"mpims":a=c(function(h){return h.is_group&&h.is_mpim},"filter");break;default:}return g===m&&v[f]||(g!==m&&(m=g,v={}),v[f]=_.filter(g,a),v[f]=_.map(v[f],TS.redux.channels.interop.maybeWrapEntity),l[f]||(l[f]=_.defer(function(){delete v[f],delete l[f],m=null}))),v[f]},"_buildModelArrayKey")})()},6318582152:()=>{(function(){TS.registerModule("redux.files",{onStart:function(){Object.defineProperty(TS.model,"files",{get:function(){return TS.redux.files.getAllFiles()},set:function(){return!1}})},getFileById:function(o){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;var m=r(o,s);return!m||m.id!==o?null:m},getAllFiles:function(){var o=u();return o===t||(n=_.values(o),t=o),n}});var u=TS.redux.bindSelectorToStore("TS.interop.redux.models.files.getAllFiles"),r=TS.redux.bindSelectorToStore("TS.interop.redux.models.files.getFileById"),t,n})()},3404403316:()=>{(function(){TS.registerModule("redux.members",{onStart:function(){TS.boot_data.no_login||(u=TS.utility.enableFeatureForUser(1),Object.defineProperty(TS.model,"members",{get:function(){return TS.redux.members.getAllMembers()},set:function(){return!1}}),Object.defineProperty(TS.model,"user",{get:function(){return TS.interop.members.getCurrentMember()}}))},getPotentiallyUnknownMemberById:function(r){if(r&&r[0]==="@"&&(r=r.substring(1)),!TS.interop.utility.looksLikeMemberId(r)){u&&TS.console.logStackTraceToBackEnd("non-ID passed into getPotentiallyUnknownMemberById","member_name_as_id_lookup",1);const n=TS.interop.members.getMemberByName(r);if(n)return n}const t=TS.interop.members.getPotentiallyUnknownMemberById(r);return t?t.isUnknown?(TS.members.legacySetMemberUnknown(r),_.omit({...t,is_unknown:!0},"isUnknown")):t.isNonExistent?_.omit({...t,is_non_existent:!0},"isNonExistent"):t:null},getMemberByEmail:function(r){var t=TS.interop.members.getMemberByEmail(r);return!t||!t.profile?null:t},getAllMembers:function(){var r=TS.interop.members.getAllMembers();return _.values(r)},hasMemberWithId:function(r){return TS.interop.members.hasMemberWithId(r)}});var u})()},5790153495:()=>{(function(){TS.registerModule("redux.prefs",{setUserPrefs:function(u){TS.interop.prefs.setUserPrefs(u)},setTeamPrefs:function(u){TS.interop.prefs.setTeamPrefs(u)},setEnterprisePrefs:function(u){TS.interop.prefs.setEnterprisePrefs({prefs:u})},setUserPref:function(u,r){TS.redux.prefs.getUserPref(u)!==r&&TS.interop.prefs.setUserPref({pref:u,value:r})},setTeamPref:function(u,r){TS.redux.prefs.getTeamPref(u)!==r&&TS.interop.prefs.setTeamPref({pref:u,value:r})},getUserPref:function(u){return TS.interop.prefs.getUserPref(u)},getTeamPref:function(u){return TS.interop.prefs.getTeamPref(u)},test:function(){var u={};return u}})})()},9170865939:()=>{(function(){TS.registerModule("redux.teams",{onStart:function(){Object.defineProperty(TS.model,"team",{get:function(){return TS.redux.teams.getCurrentTeam()},set:function(){return TS.error("TS.redux.teams: trying to set TS.model.team???"),!1}})},upsertTeam:function(u){if(!(!u||!u.id))return TS.interop.teams.upsertTeam({team:u})},getTeamById:function(u,r){return TS.interop.teams.getTeamById?TS.interop.teams.getTeamById(u,r):null},getCurrentTeam:function(){return TS.interop.teams.getCurrentTeam?TS.interop.teams.getCurrentTeam():null},fetchAndUpsertEnterpriseOrgInfo:function(){return TS.interop.teams.fetchAndUpsertEnterpriseOrgInfo?TS.redux.dispatch(TS.interop.teams.fetchAndUpsertEnterpriseOrgInfo()):null}})})()},4354742961:()=>{(function(){TS.registerModule("redux.user_groups",{onStart:function(){Object.defineProperty(TS.model,"user_groups",{get:function(){return TS.redux.user_groups.getAllUserGroups()},set:function(){return TS.error("TS.redux.user_groups: trying to set TS.model.user_groups???"),!1}})},getAllUserGroups:function(){var t=TS.interop.userGroups.getAllUserGroups();return t===u||(r=_.values(t).sort(TS.interop.i18n.mappedSorter("_name_lc")),u=t),r}});var u,r})()},1496158114:()=>{(function(){TS.registerModule("shared",{onStart:function(){},legacyGetActiveModelOb:function(){var n;return TS.boot_data.channel_id?n=TS.interop.channels.getPublicChannelById(TS.boot_data.channel_id):TS.boot_data.im_id?n=TS.interop.channels.getImById(TS.boot_data.im_id):TS.boot_data.mpim_id?n=TS.interop.channels.getMpimById(TS.boot_data.mpim_id):TS.boot_data.group_id?n=TS.interop.channels.getGroupById(TS.boot_data.group_id):(TS.warn("error getActiveModelOb found no ob"),TS.warn(`TS.boot_data.channel_id: ${TS.boot_data.channel_id}`),TS.warn(`TS.boot_data.im_id: ${TS.boot_data.im_id}`),TS.warn(`TS.boot_data.group_id: ${TS.boot_data.group_id}`)),n},ensureModelObsArePresent:function(n,o){return!n||!n.length?Promise.resolve():TS.interop.channels.fetchAndUpsertChannelsById({ids:n,reason:o}).then(s=>{let{missing:m}=s;return _.isEmpty(m)||m.forEach(v=>TS.interop.channels.upsertChannel({id:v,isNonExistent:!0})),Promise.resolve()})},legacyEnsureModelObsInDataArePresent:function(n,o){const s=TS.interop.utility.extractAllModelObIds(n);return o==="search.messages"&&TS.boot_data.page_needs_enterprise&&r(n,s),TS.shared.ensureModelObsArePresent(s,o)},legacyBatchUpsertObjects:function(n){TS.has_pri[t]&&TS.log(t,`Flannel: upserting batch of ${n.length} objects`);var o=[],s=[],m=[];_.forEach(n,function(g){TS.interop.utility.looksLikeMemberId(_.get(g,"id"))?TS.redux.members.hasMemberWithId(g.id)?o.push(g):s.push(g):u(g)&&m.push(g)});var v=!!s.length,l=[];function i(g){TS.has_pri[t]&&TS.log(t,`Flannel: upserting and signaling user ${g.id} from query results`);var a=TS.members.legacyUpsertAndSignal(g).member;l.push(a)}c(i,"upsertAndSignalMember");function f(g){TS.has_pri[t]&&TS.log(t,`Flannel: upserting user ${g.id} from query results`);var a=TS.members.legacyUpsertMember(g).member;l.push(a)}return c(f,"upsertMember"),o.forEach(i),v&&(TS.members.legacyStartBatchUpsert(),s.forEach(f),TS.members.legacyFinishBatchUpsert()),m.length&&(TS.redux.bots.bulkUpsertBots(m),m.forEach(g=>{TS.has_pri[t]&&TS.log(t,`Flannel: upserting bot ${g.id} from query results`);var a=TS.interop.bots.getBotById(g.id);l.push(a)})),l}});var u=c(function(n){var o=_.get(n,"id[0]");return o==="B"},"_isBot");function r(n,o){var s=TS.model.team.id;_.remove(o,function(m){var v=_.find(n.messages.matches,function(f){return f.channel.id==m},this),l=_.get(v,"channel"),i=TS.interop.rules.channels.isOrgShared(l)||TS.interop.rules.channels.isExternallySharedChannel(l);if(v&&_.get(v,"team")!=s&&_.startsWith(m,"C")&&!i)return m})}c(r,"_excludeNonLocalModelObs");var t=1989})()},9410205190:()=>{(function(){const u="STORAGE";TS.registerModule("storage",{version:"0.85",cache_ts_version:window.boot_data&&boot_data.cache_ts_version||"unknown_version",do_compression:!TS.model.is_our_app&&typeof window.Worker<"u"&&(!window.bowser||!bowser.phantom&&!bowser.msie),test:function(){return{getLocalStorage:me,setLocalStorage:he,getKeys:b,set:se}},onStart:function(){TS.storage.onStart=function(){},TS.storage.do_compression||(TS.interop.console.info(u,"Special case: force-enabling LS compression for this session."),TS.storage.do_compression=!0),TS.storage.version+=TS.storage.do_compression?"-compressed-LZString":"";var C=s||!Z||function(){return!TS.storage.storageAvailable()&&(U(),!TS.storage.storageAvailable())?(TS.interop.console.info(u,"TS.storage.storageAvailable() = false in onStart after flushing all our keys, so disabling"),!0):!1}();TS.has_pri[K]&&(TS.log(K,`TS.storage.onStart should_disable:${C}`),TS.log(K,`TS.storage.do_compression:${TS.storage.do_compression} (_ls.getItem('is_compressed') === 'yes'):${Z&&Z.getItem("is_compressed")==="yes"}`)),TS.ui.window_unloaded_sig.add(k),TS.ui.window_focus_changed_sig.add(H),TS.storage.setDisabled(C),se("rxn_records",null);var N=TS.storage.fetchExpandableState();TS.redux.dispatch(TS.interop.redux.features.expandables.bulkSetExpanded(N))},setDisabled:function(C){s!=C&&(C||!Z?(s=!0,Z&&U()):(s=!1,B()),TS.log(K,`_disabled:${s}`))},storageAvailable:function(){if(!Z)return!1;try{var C="test_to_see_if_we_can_write_to_local_storage";return Z.setItem(C,"foo"),Z.removeItem(C),!0}catch{return!1}},storageSize:function(C){var N=0;if(!Z)return N;for(var y=b(),L=0,R,M,A=0;A<y.length;A+=1)L+=1,R=y[A],M=Z.getItem(R),!M&&M!==""?TS.interop.console.info(u,`${R} not measurable value, typeof:${typeof M}`):(N+=M.length,C&&TS.info(`${R}=${(M.length*2/1024).toFixed(2)}KB (total=${(N/1024).toFixed(2)}KB)`));return C&&TS.info(`total for ${L} items is ${(N/1024).toFixed(2)}KB`),N},flush:function(C){TS.has_pri[K]&&TS.log(K,"TS.storage.flush()"),U(),C&&TS.storage.clearBufferAndCache()},clearBufferAndCache:function(){TS.has_pri[K]&&TS.log(K,"TS.storage.clearBufferAndCache()"),v={},l={},TS.compresion&&TS.compression.terminate()},fetchStorageVersion:function(){return te("storage_version")},storeStorageVersion:function(C){se("storage_version",C,!0)},fetchCacheTSStorageVersion:function(){return te("storage_cache_ts_version")},fetchOldestTs:function(C){return te(o(C),null)},fetchLastEventTS:function(C){return te("last_event_ts","",C)||""},fetchExpandableState:function(){var C=te("expandable_state",{});return C&&typeof C=="object"?C:{}},fetchCustomEmoji:function(){return te("custom_emoji",null)||null},fetchApps:function(){return te("apps",null)||null},fetchCmds:function(){return te("cmds",null)||null},fetchFrecency:function(C){return te(`frecency_${C}`)},storeFrecency:function(C,N){se(`frecency_${C}`,N)},clearFrecency:function(C){se(`frecency_${C}`,"")},fetchLastEKMChangeTimestamp:function(){return te("last_ekm_change_ts","0")||"0"},storeLastEKMChangeTimestamp:function(C){se("last_ekm_change_ts",C)}});var r=`${window.boot_data.user_id}_`,t="channel_msgs_",n="oldest_msg_ts_",o=c(function(C){return n+C},"_makeOldestTsId"),s,m=!1,v={},l={},i=1e3,f=!1,g=1e3,a=!1,h=1e3,E=!1,x=!1,b=c(function(){var C=[];if(!Z)return C;var N=Z.length;if(!N)return C;for(var y=0;y<N;y+=1)C.push(Z.key(y));return C},"_getKeys"),B=c(function(){var C;if(!s){var N=TS.storage.fetchStorageVersion()||"",y=N.indexOf("-compressed")!=-1||Z.getItem("is_compressed")==="yes";TS.storage.do_compression&&!y?(TS.interop.console.info(u,"migrating to compressed format"),C=b(),C.forEach(function(M){var A=M.replace(r,""),F=_e(M,Z.getItem(M)),W=`converting: ${M} -> ${A} val.length: ${F==null?-1:String(F).length}`;se(A,null),se(A,F),te(A)==F?TS.has_pri[K]&&TS.log(K,`${W} SUCCESS _get(name) has a value:${!!te(A)}, and it it the same as val`):TS.error(`${W} FAILURE _get(name) !== val`)}),TS.interop.console.info(u,`migration to compressed format complete, ${C.length} migrated`),TS.storage.storeStorageVersion(TS.storage.version)):TS.has_pri[K]&&TS.log(K,"no migration needed"),Z.setItem("is_compressed",TS.storage.do_compression?"yes":"no")}var L=TS.storage.fetchCacheTSStorageVersion();TS.has_pri[K]&&TS.log(K,`storage_cache_ts_version:${L}`);var R=TS.storage.fetchStorageVersion()||"";TS.has_pri[K]&&(TS.log(K,`TS.storage.version:${TS.storage.version}`),TS.log(K,`storage_version:${R}`),TS.log(K,`TS.storage last_unload_flushing: ${te("last_unload_flushing")}`),TS.log(K,`TS.storage.storageAvailable(): ${TS.storage.storageAvailable()}`)),C=b(),TS.has_pri[K]&&TS.dir(K,C,"_getKeys()"),TS.storage.storageAvailable()?R!=TS.storage.version?(TS.log(K,`storage_version:${R} does not match TS.storage.version:${TS.storage.version} so flushing all our keys: ${C.join(", ")}`),U()):TS.storage.fetchLastEventTS()||(TS.log(K,"TS.storage.fetchLastEventTS() is empty so flushing channel data"),D()):(TS.log(K,"TS.storage.storageAvailable() = false so flushing all our keys"),U()),TS.storage.storeStorageVersion(TS.storage.version)},"_setUp"),U=c(function(){b().forEach(function(C){C.indexOf(r)===0&&Z.removeItem(C)})},"_removeAllOurKeys"),D=c(function(){var C=b();TS.has_pri[K]&&TS.log(K,C,"_getKeys()");for(var N,y=0;y<C.length;y+=1)N=C[y],N.indexOf(r)===0&&(N.indexOf(t)==-1&&N.indexOf(n)==-1||(Z.removeItem(N),delete v[N]));for(N in v)N.indexOf(r)===0&&(N.indexOf(t)==-1&&N.indexOf(n)==-1||delete v[N]);l={},C=b(),TS.dir(488,C,"_getKeys()")},"_completelyEmptyAllStorage"),k=c(function(){m=!0,se("last_unload_flushing",new Date().toString(),!0),ee(!0,"_windowUnloaded"),TS.compression.terminate()},"_windowUnloaded"),H=c(function(){ee(!0,"_windowBlurred")},"_windowBlurred"),Y=c(function(C){return typeof C=="string"||typeof C=="number"||!C?C:JSON.stringify(C)},"_prepareValForStorage"),V=c(function(C){return C==="undefined"||C==="null"?null:C},"_correctBadValsFromStorage"),ee=c(function(C,N){if(!s){var y=new Date,L=Date.now(),R,M=0,A,F=!1,W,J,re,X,Q;for(A in v)if(!v[A].being_flushed){if(X=Y(v[A].val),X==null)Z.removeItem(A),delete v[A],delete l[A];else try{ge(A,X)}catch(le){TS.error(0,le),U(),delete v[A],delete l[A];continue}if(M+=1,R=Date.now()-L,F&&TS.has_pri[K]&&TS.log(K,`_flushBuffer _ls.setItem ${A}: ${R}ms ${v[A]&&v[A].val&&v[A].val.toString?v[A].val.toString().substr(0,100):"NULL?"}`),!C&&(W=new Date-y,!E&&W>h)){E=!0,re=new Date;try{J=TS.storage.storageSize()}catch{}re=new Date-re,Q=`Took ${W}ms for ${M} item (!all case) (threshold is ${h} ms). Key: ${A}. Buffer length: ${v[A]&&v[A].val&&v[A].val.toString()?v[A].val.toString().length:"unknown (not a string)"}. localStorage size: ${J||"unknown"}. Time to read LS size: ${re}`,TS.info(`_flushBuffer exceeded slow write threshold: ${Q}`)}if(v[A]&&(v[A].being_flushed=!0),!C){TS.has_pri[K]&&TS.log(K,`_flushBuffer: Wrote one item. why: ${N}`);return}l={}}if(M&&!x&&(W=new Date-y,W>h)){x=!0;try{J=TS.storage.storageSize()}catch{}Q=`Took ${W}ms for ${M} items (threshold is ${h} ms). localStorage size: ${J}. App open for ${((Date.now()-TS.boot_data.start_ms)/1e3/60).toFixed(2)} min. why: ${N}`,TS.info(`_flushBuffer exceeded slow write threshold (all case): ${Q}`)}TS.has_pri[K]&&(M===0?TS.log(K,"_flushBuffer: Nothing to save."):TS.log(K,`_flushBuffer: Saved ${M}${M===1?" item":" items"} why: ${N}`))}},"_flushBuffer"),te=c(function(C,N,y){var L=r+C;if(y&&TS.info(`_get name:${C} k:${L} disabled:${s} _buffer["${L}"].val:${v[L]&&v[L].val}`),s||L in v)return v[L]&&v[L].val||N;if(l.hasOwnProperty(L))return l[L];var R=_e(L,pe(L,Z.getItem(L)),N,y);return l[L]=R,R},"_get"),_e=c(function(C,N,y,L){var R=new Date,M=V(N);L&&TS.info(`_get _correctBadValsFromStorage(_ls.getItem(k)) k:${C} typeof result:${typeof M} /^[{[]/.test(result):${/^[{[]/.test(M)}`);var A;if(M&&typeof M=="string"&&/^[{[]/.test(M)&&(M=TS.utility.parseJSONOrElse(M)||M),M=M||(y!==void 0?y:null),R=new Date-R,!f&&R>i){f=!0;try{A=TS.storage.storageSize()}catch{}var F=`_get took longer than threshold: Took ${R}ms to read ${C} (theshold is ${i}ms), length = ${M&&!isNaN(M.length)?M.length:"unknown"}. Storage size: ${A}`;TS.info(F)}return M},"_convertTypeForFetch"),se=c(function(C,N,y,L){var R=!1,M=new Date,A,F=r+C;if(v[F]={val:N,being_flushed:!1},l[F]=v[F].val,L&&TS.info(`_set immediate:${y} name:${C} k:${F} disabled:${s} do_compression:${TS.storage.do_compression} _buffer["${F}"].val:${v[F].val}`),y){if(!s){var W=Y(N);if(W==null)Z.removeItem(F),delete v[F];else try{ge(F,W,y)}catch{TS.interop.console.warn(`_set _ls.setItem failed, flushing. TS.storage.storageSize():${TS.storage.storageSize(!1)}`),R=!0}}if(L&&TS.info(`_set failed:${R}`),!R)if(L&&TS.info(`_set _buffer["${F}"]:${v[F]&&JSON.stringify(v[F])}`),M=new Date-M,M>g){if(TS.interop.console.info(u,`_set immediately ${C}: ${M}ms ${N&&N.toString?N.toString().substr(0,100):"NULL?"}`),!a){a=!0;try{A=TS.storage.storageSize()}catch{}var J=`_set exceeded slow set threshold (immediate): Took ${M}ms to write ${F} (theshold is ${g}ms), length = ${N&&!isNaN(N.length)?N.length:"unknown"}. Storage length: ${A}`;TS.info(J)}}else TS.has_pri[K]&&TS.log(K,`_set GOOD immediately: ${y} ${C}: ${M}ms`,N)}},"_set"),Z=window.localStorage,me=c(function(){return Z},"_getLs"),he=c(function(C){Z=C},"_setLs"),ge=c(function(C,N,y){if(N=String(N),TS.storage.do_compression){TS.compression.compress(C,N,y||m,ce);return}ce({k:C,str:N})},"_compressAndStore"),ce=c(function(C){Z.setItem(C.k,C.str);var N=c(function(y){var L=Z.getItem(C.k);if(L===C.str){y>1&&TS.interop.console.info(u,`${C.k} now saved, try #${y}`),delete v[C.k],delete l[C.k];return}if(y>1&&(!v[C.k]||v[C.k].val!=C.str)){TS.error(`buffer changed for ${C.k} so we don't care anymore, a new value is being set for it, try #${y}`);return}TS.error(`WTF not saved, try #${y} ${C.k} ${(C.str||"").length} typeof ob.str:${typeof C.str} from_ls:${typeof L}`),Z.setItem(C.k,C.str),setTimeout(N,1e3,y+1)},"testAndFinishOrTryAgain");N(1)},"_afterCompress"),pe=c(function(C,N){if(!TS.storage.do_compression)return N==="\u4000"?(TS.interop.utility.getLogger({getState:TS.redux.getState}).error({storage_version:TS.storage.fetchStorageVersion(),ts_storage_version:TS.storage.version,is_our_app:TS.model.is_our_app,typeof_window_worker:typeof window.Worker,has_bowser:!!window.bowser},"decompress_empty_string_fail"),""):N;var y=Date.now();N&&(N=LZString.decompress(N));var L=Date.now()-y;return N&&TS.has_pri[K]&&TS.log(K,`${C} took ${L}ms to _decompress str.length: ${N.length}`),N==="\u4000"?(TS.interop.utility.getLogger({getState:TS.redux.getState}).error({storage_version:TS.storage.fetchStorageVersion(),ts_storage_version:TS.storage.version,is_our_app:TS.model.is_our_app,typeof_window_worker:typeof window.Worker,has_bowser:!!window.bowser},"decompress_double_compressed_fail"),""):N},"_decompress"),K=488})()},5110391454:()=>{(function(){TS.registerModule("team",{team_name_changed_sig:new signals.Signal,onStart:function(){TS.team.team_name_changed_sig.add(r)},ensureTeamProfileFields:function(){return u||(u=TS.interop.api.call("team.profile.get").then(function(t){TS.redux.teams.upsertTeam(_.assign({id:TS.boot_data.team_id},{profile:t.data.profile}))}),u)},getTeamProfileFieldById:function(t){TS.model.team.profile.fields.length||TS.warn("Ensure profile fields exist before calling getTeamProfileFieldById");for(var n=0;n<TS.model.team.profile.fields.length;n+=1)if(TS.model.team.profile.fields[n].id===t)return TS.model.team.profile.fields[n];return null},getVisibleTeamProfileFields:function(){return TS.model.team.profile.fields.length||TS.warn("Ensure profile fields exist before calling getVisibleTeamProfileFields"),TS.model.team.profile.fields.filter(function(t){return!t.is_hidden})},getHiddenTeamProfileFields:function(){return TS.model.team.profile.fields.length||TS.warn("Ensure profile fields exist before calling getHiddenTeamProfileFields"),TS.model.team.profile.fields.filter(function(t){return t.is_hidden})},sortTeamProfileFieldsByOrdering:function(t){if(!t||!t.length)TS.warn("Ensure profile fields exist before calling sortTeamProfileFieldsByOrdering");else return _.clone(t).sort(function(n,o){return n.ordering-o.ordering})}});var u,r=c(function(){$("#team_name").text(TS.model.team.name),document.title=document.title.replace(TS.model.last_team_name,TS.model.team.name),TS.model.last_team_name=TS.model.team.name},"_handleTeamRename")})()},603105959:()=>{(function(){TS.registerModule("teams",{rename_sig:new signals.Signal,changed_icon_sig:new signals.Signal,onStart:function(){TS.teams.changed_icon_sig.add(r),TS.teams.rename_sig.add(r)},getTeamById:function(o,s){return _.isString(o)?TS.redux.teams.getTeamById(o,s):null},ensureTeamsArePresent:function(o){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"TS.teams.ensureTeamsArePresent";if(!_.isArray(o))return Promise.reject(Error("t_ids is not an array"));var m=_.filter(o,function(v){var l=!1,i=TS.teams.getTeamById(v,l);return!i||i._other_account});return m.length?u(m,s):Promise.resolve()},ensureTeamsInDataArePresent:function(o){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"TS.teams.ensureTeamsInDataArePresent";var m=TS.interop.utility.extractAllTeamIds(o);return TS.teams.ensureTeamsArePresent(m,s)},test:function(){var o={_getSharedTeamIdsForMember:n};return Object.defineProperty(o,"_getTeamsByIdFromApi",{get:function(){return u},set:function(s){u=s}}),o}});var u=c(function(o,s){if(!_.isArray(o))return Promise.reject(Error("t_ids is not an array"));const m=250,v=_.chunk(o,m);return Promise.map(v,l=>TS.interop.api.callExpedited("team.info",{teams:l,_x_reason:s}).then(i=>{var f=[];return i.data.teams.forEach(function(g){g&&g.id&&g.id.charAt(0)==="E"?TS.warn(`EVALUE-1721: team.info response included an Enterprise org of ${g.id}. NOT adding to model. Client requested teams=${l.join(", ")}.`):f.push(TS.redux.teams.upsertTeam(g))}),f}).catch(i=>{TS.error(`_getTeamsByIdFromApi failed with ${i.data&&i.data.error||"unknown error"}, when requesting teams=${l.join(", ")}`)})).then(l=>_.compact(_.flatten(l)))},"_getTeamsByIdFromApi"),r=c(function(o){o.id!==TS.model.team.id&&t(o)},"_handleTeamChange"),t=c(function(o){if(_.isObject(o)){var s=TS.utility.teams.getMembersForTeam(o);s.length&&_.forEach(s,function(m){TS.members.changed_profile_sig.dispatch(m)})}},"_updateTeamMembers"),n=c(function(o){return o?_.get(o,"enterprise_user")?_.intersection(_.get(o,"enterprise_user.teams",[]),_.get(TS.model.user,"enterprise_user.teams",[])):_.get(o,"team_id")===_.get(TS.model.user,"team_id")?[o.team_id]:[]:[]},"_getSharedTeamIdsForMember")})()},3693504700:()=>{(function(){TS.registerModule("templates.builders",{newWindowName:function(){return TS.boot_data.app==="web"||TS.boot_data.app==="calls"?"_self":`new_${u.toString()}`},strBuilder:function(r,t){return r.replace(/\${([a-z_]+)}/g,function(n,o){return o.indexOf("_html")>-1?t[o]:_.escape(t[o])})},atLabel:function(r){r==="group"&&(r="channel");var t=(_.keyBy(TS.interop.broadcast_keywords.getAllBroadcastKeywords(),"ms_name")[r]||{}).name||"channel";return`@${t}`},loadingHTML:function(){return TS.templates.infinite_spinner({color:"white",size:"medium"})},test:function(){var r={};return r}});var u=Date.now()})()},3318067913:()=>{(function(){TS.registerModule("templates.helpers",{onStart:function(){TS.templates.helpers.register()},register:function(){Handlebars.registerHelper("debugger",function(){debugger}),Handlebars.registerHelper("i18n_ns",function(t){if(!_.isObject(this)){TS.warn(`Cannot set i18n namespace "${t}". Chances are you\u2019ve inadvertently changed the context in a Handlebars partial to something that\u2019s not an object.`);return}this._i18n_ns&&(this._i18n_ns_history?this._i18n_ns_history.push(this._i18n_ns):this._i18n_ns_history=[this._i18n_ns]),this._i18n_ns=t}),Handlebars.registerHelper("_i18n_ns_end",function(){this._i18n_ns_history&&this._i18n_ns_history.length&&(this._i18n_ns=this._i18n_ns_history.pop())}),Handlebars.registerHelper("t",function(t){var n;typeof t=="string"?(n=t,t=arguments[1]):n=t.fn();var o;t.hash.ns!==void 0?o=t.hash.ns:this._i18n_ns!==void 0?o=this._i18n_ns:o=t.data.root&&t.data.root._i18n_ns?t.data.root._i18n_ns:"";var s=this;_.isObject(s)||(s={this:s});var m={},v;_.forOwn(t.hash,function(h,E){m[E]=s[E],s[E]=Handlebars.Utils.escapeExpression(h)});var l=n.match(/{[^\s}]+}/g);if(l&&l.length){var i=c(function(h){var E=h.split(".");if(E.length>1){var x=0,b=E.length,B=s;for(x;x<b;x+=1)if(B=B[E[x]],B===void 0)return;return B}return s[h]},"getValue"),f,g=0,a=l.length;for(g;g<a;g+=1)v=l[g].slice(1,-1),t.hash[v]===void 0&&(f=i(v),f!==void 0&&(m[v]=s[v],s[v]=Handlebars.Utils.escapeExpression(f)))}return t.hash.debug&&(TS.info("debug handlerbars t helper"),TS.info(this)),s.__handlebars=!0,n=TS.interop.i18n.t(n,o)(s),_.forOwn(m,function(h,E){s[E]=h}),n}),Handlebars.registerHelper("zdLocale",function(){return TS.interop.i18n.zdLocale()}),Handlebars.registerHelper("exampleEmail",function(t){return TS.utility.exampleEmailAddress(t)}),Handlebars.registerHelper("convertTimestampToMilliseconds",function(t){return t*1e3}),Handlebars.registerHelper("listify",function(t,n){n.hash.map&&(t=_.map(t,n.hash.map));var o=_.get(n.hash,"conjunction"),s=_.get(n.hash,"strong"),m=_.get(n.hash,"no_escape"),v=TS.interop.i18n.listify(t,{conj:o,strong:s,noEscape:m});return new Handlebars.SafeString(v.join(""))}),Handlebars.registerHelper("isMac",function(t){return TS.model.is_mac?t.fn(this):t.inverse(this)}),Handlebars.registerHelper("isOurApp",function(t){return TS.model.is_our_app?t.fn(this):t.inverse(this)}),Handlebars.registerHelper("feature",function(t){var n=t.hash.flag;return TS.qs_args[n]==1||TS.boot_data[n]==1?t.fn(this):t.inverse(this)}),Handlebars.registerHelper("pageNeedsEnterprise",function(t){return TS.boot_data.page_needs_enterprise?t.fn(this):t.inverse(this)}),Handlebars.registerHelper("experiment",function(t){var n=t.hash.name,o=t.hash.group||"treatment";return TS.interop.experiments.getGroupForUser(n)===o?t.fn(this):t.inverse(this)}),Handlebars.registerHelper("cash",function(t){var n=t.hash.all_digits||!1,o=t.hash.currency_code||"USD",s=parseInt(t.hash.value,10);return TS.interop.currency.formatCurrency(s,o,{displayTrailingZeroes:n})}),Handlebars.registerHelper("initialsSafe",function(t){var n=TS.interop.rules.teams.getTeamInitials(t,{limit:2});return new Handlebars.SafeString(n)}),Handlebars.registerHelper("json",function(t){return typeof t=="object"&&t!==null&&t.name==="json"?JSON.stringify(this):JSON.stringify(t)}),Handlebars.registerHelper("currentTeamNameSafe",function(){return new Handlebars.SafeString(_.escape(_.get(TS.model.team,"name","")))}),Handlebars.registerHelper("convertFilesize",function(t){return TS.interop.utility.convertFilesize(t)}),Handlebars.registerHelper("roundToThree",function(t){return TS.utility.roundToThree(t)}),Handlebars.registerHelper("if_equal",function(t,n){return n=u(n),t==n.hash.compare?n.fn(this):n.inverse(this)}),Handlebars.registerHelper("if_gt",function(t,n){return n=u(n),t>n.hash.compare?n.fn(this):n.inverse(this)}),Handlebars.registerHelper("if_lt",function(t,n){return n=u(n),t<n.hash.compare?n.fn(this):n.inverse(this)}),Handlebars.registerHelper("or",function(t,n,o){return o=u(o),t||n?o.fn(this):o.inverse(this)}),Handlebars.registerHelper("and",function(t,n,o){return o=u(o),t&&n?o.fn(this):o.inverse(this)}),Handlebars.registerHelper("foreach",function(t,n){return n.inverse&&!t.length?n.inverse(this):t.map(function(o,s){var m={index:s,value:o,length:t.length};return m.first=s===0,m.last=s===t.length-1,n.fn(m)}).join("")}),Handlebars.registerHelper("repeat",function(t,n){for(var o="",s=0;s<t;s+=1)o+=n.fn(s);return o}),Handlebars.registerHelper("newWindowName",TS.templates.builders.newWindowName),Handlebars.registerHelper("memberIsUnavailable",function(t,n){return n=u(n),TS.interop.rules.members.isUnavailable(TS.redux.getState(),t)?n.fn(this):n.inverse(this)}),Handlebars.registerHelper("isModelObExtShared",function(t,n){return TS.interop.utility.isModelObjectExternal(t)?n.fn(this):n.inverse(this)}),Handlebars.registerHelper("shouldUseInitialsIcon",function(t,n,o){return t&&t.icon&&(t.icon.image_default||n)?o.fn(this):o.inverse(this)}),Handlebars.registerHelper("makeTeamNameList",function(t,n){if(n=n||{},n=n.hash||n,!t)return"";var o=_.map(t,m=>TS.teams.getTeamById(m)).map(m=>TS.interop.rules.teams.isUnknown(m)?TS.templates.unknown_team({id:m.id,subtler:n.subtler}):_.escape(TS.interop.rules.teams.getTeamDisplayName(m))),s=TS.interop.i18n.listify(o,{...n,noEscape:!0}).join("");if(s)return new Handlebars.SafeString(s)}),Handlebars.registerHelper("getMemberPreviewLinkImageArgs",function(t,n,o,s,m,v,l){var i;if(typeof t=="object"?i=t:i=TS.interop.members.getMemberById(t),!i||!i.profile)return"";o=o===!0,s=s===!0,m=m===!0,v=v===!0,l=typeof l=="string"?l:!1,t==="USLACKBOT"&&l&&(i=TS.utility.slackbot.getWithFeels(l));var f,g,a;switch(g="background-image: ",a=[],n){case 20:f=i.profile.image_48;break;case 24:f=i.profile.image_48;break;case 32:f=i.profile.image_72;break;case 36:f=i.profile.image_72;break;case 48:f=i.profile.image_72;break;case 56:f=i.profile.image_192;break;case 72:f=i.profile.image_192;break;case 192:f=i.profile.image_512||i.profile.image_192;break;case 512:f=i.profile.image_1024||i.profile.image_512||i.profile.image_192;break;default:f=i.profile.image_72;break}if(a.push(`url('${f}')`),n===512){var h=i.profile.image_72;a.push(`url('${h}')`)}o?g=a.length?a.join(", "):"":g=a.length?g+a.join(", "):"";var E={omit_link:s,omit_badge:m,lazy:o,member:i,size:n,include_restricted_overlay:!v||!0,bg_img_style:g};return E}),Handlebars.registerHelper("getGuestBadgeSize",function(t){var n;switch(t){case 24:n=10;break;case 32:case 36:case 48:n=16;break;case 72:n=24;break;case 192:n=48;break;case 512:n=96;break;default:n=16}return n}),Handlebars.registerHelper("getTeamBadgeSize",r),Handlebars.registerHelper("getPrefCompliantMemberNameById",function(t){return TS.interop.rules.members.getPrefCompliantMemberNameById(t)}),Handlebars.registerHelper("getMemberComponentPrimaryName",function(t,n){return n?n==="real_name"?TS.interop.rules.members.getMemberRealName(t):TS.getMemberMentionName(t):TS.interop.rules.members.getPrefCompliantMemberName(t,!1,!1)}),Handlebars.registerHelper("memberComponentHasSecondaryName",function(t,n,o){var s=!1;return t&&(n?n==="real_name"?s=!!TS.interop.rules.members.getMemberProfileFieldDisplayName(t):s=!!TS.interop.rules.members.getMemberRealName(t):s=!!TS.interop.rules.members.getMemberSecondaryName(t)),s&&!t.is_invited_user?o.fn(this):o.inverse(this)}),Handlebars.registerHelper("getMemberComponentSecondaryName",function(t,n){if(n){if(n==="real_name")return TS.interop.rules.members.getMemberProfileFieldDisplayName(t);if(n==="display_name")return TS.interop.rules.members.getMemberProfileFieldDisplayName(t)?TS.interop.rules.members.getMemberRealName(t):""}return TS.interop.rules.members.getMemberSecondaryName(t)}),Handlebars.registerHelper("getTeamById",function(t){return TS.teams.getTeamById(t)}),Handlebars.registerHelper("getTeamDisplayName",function(t){return TS.interop.rules.teams.isUnknown(t)?new Handlebars.SafeString(TS.templates.unknown_team({id:t.id})):TS.interop.rules.teams.getTeamDisplayName(t)}),Handlebars.registerHelper("getMemberPreviewLinkTarget",function(t){return TS.utility.shouldLinksHaveTargets()?new Handlebars.SafeString(`target="/team/${t.id}"`):""}),Handlebars.registerHelper("tinyspeck",function(t){return t.inverse(this)}),Handlebars.registerHelper("math",function(t,n,o){return arguments.length<4&&(o=n,n="+"),t=parseFloat(t),o=parseFloat(o),{"+":t+o,"-":t-o,"*":t*o,"/":t/o,"%":t%o}[n]}),Handlebars.registerHelper("loadingHTML",function(){return new Handlebars.SafeString(TS.templates.builders.loadingHTML())}),Handlebars.registerHelper("versioned_loading_animation",function(){return vvv_abs_url+"/img/loading.gif"}),Handlebars.registerHelper("versioned_upload_file_icon",function(t){if(t==="1x")return vvv_abs_url+"/img/upload_file_icon.png";if(t==="2x")return vvv_abs_url+"/img/upload_file_icon@2x.png"}),Handlebars.registerHelper("versioned_default_application_icon",function(){return vvv_abs_url+"/img/apps/default_new_app_icon.png"}),Handlebars.registerHelper("versioned_tos_book_illustration",function(t){if(t==="1x")return vvv_abs_url+"/img/signup/book_illustration.png";if(t==="2x")return vvv_abs_url+"/img/signup/book_illustration@2x.png"}),Handlebars.registerHelper("number",function(t){return _.isUndefined(t)?"":TS.interop.i18n.number(t)||""}),Handlebars.registerHelper("atLabel",function(t){return TS.templates.builders.atLabel(t)}),Handlebars.registerHelper("dangerouslyRenderHTML",function(t){return new Handlebars.SafeString(t)}),Handlebars.registerHelper("getTeamIconOfSize",function(t,n){return t&&t.icon?t.icon[`image_${n}`]:null}),Handlebars.registerHelper("getIconSizeToFit",function(t){return TS.interop.utility.getIconSizeToFit(t,[230,132,102,88,68,44,34])}),Handlebars.registerHelper("escape",function(t){return _.escape(t)})},test:function(){return{_optionsFnInverseBooleanHelper:u}}});var u=c(function(t){return typeof t.fn!="function"&&(t.fn=function(){return!0}),typeof t.inverse!="function"&&(t.inverse=function(){return!1}),t},"_optionsFnInverseBooleanHelper"),r=c(function(t){var n;switch(t){case 32:case 36:case 48:n=16;break;case 72:n=22;break;case 192:case 512:break;default:n=16}return n},"_getTeamBadgeSize")})()},1182967304:()=>{(function(){TS.registerModule("templates",{onStart:function(){r(),TS.prefs&&TS.prefs.sidebar_behavior_changed_sig.add(TS.templates.sidebarBehaviorPrefChanged,TS.templates)},sidebarBehaviorPrefChanged:function(){TS.templates.makeSidebarBehaviorRule()},makeSidebarBehaviorRule:function(){var n,o="sidebar_behavior",s=$(`#${o}`);TS.prefs.getPref("sidebar_behavior")==="hide_read_channels"?n="				.channels_list_holder ul li:not(.unread):not(.active):not(.show_in_list_even_though_no_unreads) {					display: none;			}":TS.prefs.getPref("sidebar_behavior")==="hide_read_channels_unless_starred"&&(n="				.channels_list_holder div:not(#starred_div)>ul li:not(.unread):not(.active):not(.is_starred):not(.show_in_list_even_though_no_unreads) {					display: none;			}"),n?s.length?s.text(n):$(`<style type="text/css" id="${o}">${n}</style>`).appendTo("head"):$(`#${o}`).remove()}});var u=/{{\s*i18n_ns\s*('|")[a-zA-Z0-9]+('|")\s*}}/,r=c(function(){Object.keys(TS.raw_templates).forEach(function(n){TS.templates[n]=t(n,TS.raw_templates[n]),TS.raw_template_paths||(TS.raw_template_paths={},TS.interop.utility.getLogger({getState:TS.redux.getState}).error("MISSING_RAW_TEMPLATE_PATHS")),TS.templates[`${n}_path`]=TS.raw_template_paths[n],Handlebars.registerPartial(n,TS.templates[n])}),delete TS.raw_templates},"_load"),t=c(function(n,o){if(!o)return TS.warn(`${n} was passed no html`),null;u.test(o)&&(o+=" {{_i18n_ns_end}}");var s=Handlebars.compile(o);return function(m){m=m||{};var v=!1,l=!1,i=TS.interop.experiments.getGroupForUser("jira_newxp_2040");if(i==="variant"){var f=Math.floor(Math.random()*1e5);v=f==1,TS.templates_to_audit&&TS.templates_to_audit.includes(n)&&(v=!0,l=!0)}if(v)try{var g={contexts:{ui_context:{action:"impression",ui_properties:{element_name:`${n}.hbs`}}}};!TS.interop.environment.isDev&&!TS.interop.environment.isQa&&TS.interop.clog.track("HANDLEBARS_TEMPLATE_LOGS",g);var a=/\/[A-Z0-9-.]*\//g,h=window.location.pathname.replace(a,"/#####/"),E=new Error;E.fileName=TS.templates[`${n}_path`],E.message=`${h} ${window.location.hash}`,E.stack="";var x="HANDLEBARS_TEMPLATE_LOGS";l&&(x="HANDLEBARS_TEMPLATE_LOGS_AUDIT"),TS.interop.utility.getLogger({getState:TS.redux.getState}).error(E,x,{subtype:n})}catch{}return s(m)}},"_compile")})()},6131426979:()=>{(function(){TS.registerModule("tips",{onStart:function(){u.delegate(".ts_tip_lazy, .ts_tip_float","mouseenter",v),u.delegate(".ts_tip_float","mouseleave",l),u.on("click",".ts_tip",function(){g($(this))})},hideAll:function(){$(".ts_tip").addClass("ts_tip_hide")},unhideAll:function(){$(".ts_tip").removeClass("ts_tip_hide")},updateTipTitle:function(x,b){var B=a(x);B.length?B.html(b):x.attr("title",b),t&&t[0]==x[0]&&(b?(o.html(b),f()):i())}});var u=$("BODY"),r=null,t=null,n=null,o=null,s=10,m=0,v=c(function(x){t=$(x.currentTarget);var b=t.hasClass("ts_tip_multiline");if(t.addClass("ts_tip_hidden"),t.children(".ts_tip_tip").length==0&&E(t,b),t.removeAttr("title"),t.removeClass("ts_tip_lazy"),$("#ts_tip_float_floater").remove(),t.hasClass("ts_tip_float")){var B=t.attr("class").split(/\s+/).filter(function(D){return D==="ts_tip_float"||D==="ts_tip_lazy"?!1:D.indexOf("ts_tip")===0}),U=TS.templates.builders.strBuilder('<div id="ts_tip_float_floater" style="width:${w}px; height:${h}px;" class="${classes}">${tip_html}</div>',{w:t.outerWidth(),h:t.outerHeight(),classes:B.join(" "),tip_html:t.find(".ts_tip_tip").clone()[0].outerHTML});n=$(U),u.append(n),m=setTimeout(function(){n.removeClass("ts_tip_hidden"),f()},s),r=t.closest(":scrollable(vertical)"),r.on("scroll.ts_tip_removal",i),t.on("destroyed.ts_tip_removal",i),t.hasClass("ts_tip_hide_on_click")&&t.on("click.ts_tip_removal",i),b?o=n.find(".ts_tip_multiline_inner"):(o=n.find(".ts_tip_tip_inner"),o.length||(o=n.find(".ts_tip_tip")))}else setTimeout(function(){t.removeClass("ts_tip_hidden")},s)},"_onMouseEnter"),l=c(function(){i()},"_onMouseLeave"),i=c(function(){clearTimeout(m),n&&n.addClass("ts_tip_hidden"),t&&t.length&&(t.off("click.ts_tip_removal"),t.off("destroyed.ts_tip_removal")),r&&r.off("scroll.ts_tip_removal"),r=null,t=null,n=null,o=null},"_hideFloater"),f=c(function(){var x=t.offset(),b=2,B=window.innerWidth-b,U=window.innerHeight-b,D=n.hasClass("ts_tip_multiline"),k=c(function(){return D?n.find(".ts_tip_multiline_inner").dimensions_rect():n.find(".ts_tip_tip").dimensions_rect()},"getRect"),H=c(function(V){n.removeClass("			ts_tip_right 			ts_tip_rightish 			ts_tip_left 			ts_tip_leftish 			ts_tip_multiline_top_leftish 			ts_tip_multiline_top_left 			ts_tip_multiline_top_right 			ts_tip_multiline_top_rightish 		").addClass(V)},"setHorizontalPositionClass");n.css("left",x.left).css("top",x.top);var Y=k();Y.bottom>U?n.removeClass("ts_tip_bottom").addClass("ts_tip_top"):Y.top<b&&n.removeClass("ts_tip_top").addClass("ts_tip_bottom"),D?(Y.right>B?H("ts_tip_multiline_top_rightish"):Y.left<b&&H("ts_tip_multiline_top_leftish"),Y=k(),Y.right>B?H("ts_tip_multiline_top_right"):Y.left<b&&H("ts_tip_multiline_top_left")):(Y.right>B?H("ts_tip_rightish"):Y.left<b&&H("ts_tip_leftish"),Y=k(),Y.right>B?H("ts_tip_right"):Y.left<b&&H("ts_tip_left"))},"_positionFloater"),g=c(function(x){var b=a(x),B="tip-toggle-auto",U;if(x.data(B)?U=x:b.data(B)&&(U=b),!!(U&&U.length)){var D=b.html(),k=U.data(B);if(!k)return TS.warn("No toggle state text defined on tipped element. Please add text to data-tip-toggle-text or data-tip-toggle-auto attribute");TS.tips.updateTipTitle(x,k),U.data(B,D)}},"_toggleTipTitle"),a=c(function(x){var b=x.find(".ts_tip_multiline_inner");return b.length||(b=x.find(".ts_tip_tip_inner")),b.length||(b=x.find(".ts_tip_tip")),b},"_getTipEl"),h=c(function(x){if(!x.text().trim().length&&!x.attr("aria-label"))return _.uniqueId("ts_tip_tip_")},"_possiblyMakeLabelId"),E=c(function(x,b){var B="",U=_.escape(x.prop("title")),D=h(x),k=D?` id="${D}"`:"";B=b?`<span class="ts_tip_multiline_inner">${U}</span>`:U;var H=["<span",k,' class="ts_tip_tip"',">",B,"</span>"];x.append(H.join("")),x.attr("aria-labelledby",D)},"_buildDom")})()},540370361:()=>{(function(){TS.registerModule("ui.a11y",{onStart:function(){$(document).on("focus","input[placeholder],textarea[placeholder]",function(r){u($(r.target))}),$(document).on("blur","input[placeholder],textarea[placeholder]",function(r){u($(r.target))})},focusAndAddTabindex:function(r){r&&(r.attr("tabindex")&&r.data("previous-tabindex",r.attr("tabindex")),r.attr("tabindex","0"),r.focus())},getContrastColor:function(r){var t=!1;if(r=r.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(v,l,i,f){return l+l+i+i+f+f}),r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(r),r){var n=parseInt(r[1],16),o=parseInt(r[2],16),s=parseInt(r[3],16),m=(n*299+o*587+s*114)/1e3;t=m>=128?"#000000":"#FFFFFF"}return t}});var u=c(function(r){var t=r.attr("placeholder"),n=r.attr("aria-label")||"",o=!!n.length,s=!!r.val().trim().length;if(s&&!o&&t.length){r.attr("aria-label",t);return}!s&&o&&n==t&&r.removeAttr("aria-label")},"_labelWithPlaceholder")})()},4556606753:()=>{(function(){TS.registerModule("ui.admin_user_groups",{user_groups_fetched:new signals.Signal,onStart:function(){$("body").on("click",'[data-action="admin_user_groups_modal"]',function(){v()}),$("body").on("click",'[data-action="admin_user_groups_modal_new"]',function(){TS.ui.admin_user_groups.add()})},start:function(){v()},add:function(){v(),o=!0,k()},editInfo:function(y){v(),o=!0,k(y)},editMembers:function(y){v(),o=!0,_e(y,!1)},disable:function(y){v(),o=!0,U(y,"disable_user_group")},enable:function(y){v(),o=!0,U(y,"enable_user_group")},interopFunctions:function(y){let{action:L,userGroup:R,defaultChannels:M}=y;switch(L){case"add":k();break;case"enable":U(R,"enable_user_group");break;case"disable":U(R,"disable_user_group");break;case"editInfo":k(R,M);break;case"editMembers":_e(R,!1);break;default:}},test:function(){var y={_isFullLocalMember:ce};return Object.defineProperty(y,"_isFullLocalMember",{get:function(){return ce},set:function(L){ce=L}}),y}});var u,r,t,n=[],o=!1,s=!1,m=!1,v=c(function(){var y=TS.templates.user_group_modal({show_info_pane:!TS.prefs.getPref("hide_user_group_info_pane"),show_user_groups_add:TS.boot_data.can_create_user_groups}),L={body_template_html:y,onShow:l,onCancel:i};L.full_height_contents=!0,L.modal_contents_container_class="overflow_hidden",C="",TS.interop.userGroups.setSearchQuery(C),TS.ui.fs_modal.start(L)},"_start"),l=c(function(){u=$("#all_user_groups"),r=$("#user_groups_form_div"),t=$("#user_groups_toggle_div"),b(),$("#user_groups_create_btn").on("click",()=>{k()})},"_onShow"),i=c(function(){u=null,r=null,t=null,o=!1,N=null,$(window).off("resize",x),TS.ui.admin_user_groups.user_groups_fetched.dispatch(n),pe(TS.model.user_groups),K()},"_onCancel"),f=c(function(y){y&&y.preventDefault(),o?TS.ui.fs_modal.close():b(),pe(TS.model.user_groups)},"_onReset"),g=c(function(){o?TS.ui.fs_modal.close():b(),TS.ui.admin_user_groups.user_groups_fetched.dispatch(n),pe(TS.model.user_groups)},"_onUpdateComplete"),a=c(function(){o||(TS.ui.fs_modal.bindBackButton(b),TS.ui.fs_modal.showBackButton())},"_bindBackButton"),h=c(function(y){if(!n||!y)return!1;for(var L=0,R=n.length;L<R;L+=1)if(n[L].auto_type===y)return n[L];return!1},"_findAutoUserGroup"),E=c(function(y){let L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!y){var R=$("#user_group_name_input").val()||"",M=$("#user_group_handle_input").val()||"";if(L.group_name=R,L.group_handle=M,L.error&&(L.error==="forbidden_handle"||L.error==="forbidden_name")){var A=R+M;if(A){var F=h("owner"),W=h("admin"),J=!!A.match(/admins/i),re=!!A.match(/owners/i);L.suggest_auto_group=!0,L.can_create_auto_owners=re&&TS.model.user.is_admin&&!F,L.can_enable_auto_owners=re&&F&&F.date_delete,L.can_create_auto_admins=J&&TS.model.user.is_admin&&!W,L.can_enable_auto_admins=J&&W&&W.date_delete}}return $("#user_group_alerts").html(TS.templates.user_group_alerts(L)),!0}return!1},"_alertIfNotOk"),x=c(function(){var y=$("#user_groups_header");if(y.length){var L=$("#user_groups_list_scroller");if(L.length){var R=y[0].offsetHeight,M=$(window).height(),A=250,F=M*.15,W=Math.max(A,M-R-F);L.css("height",W)}}},"_onResizeList"),b=c(function(){var y=$("#user_groups_list_div");y&&!s&&(TS.interop.mountUserGroupsList(TS.boot_data.team_id,y[0],{isLegacy:!0,isUserGroupBrowser:!0,includeDeactivated:!0,onClearSearch:()=>ge()}),y.addClass("ug_modern_list"),s=!0),u.removeClass("hidden"),r.addClass("hidden"),t.addClass("hidden"),B(),TS.ui.fs_modal.hideBackButton()},"_switchListView"),B=c(function(){$(window).on("resize",x),x(),$("#user_group_modal_search").on("keydown keyup change",he),N=$("#user_groups_header .user_groups_search .icon_close"),N.off("click").on("click",ge),u.off("click");var y=c(function(R,M){if(R){o=!1;let A=null;M.subteam&&M.subteam.id&&(A=M.subteam.id),M.usergroup&&M.usergroup.id&&(A=M.usergroup.id),b(A)}},"autoMethodHandler"),L={owners:{create:function(){TS.interop.api.call("subteams.createAuto",{type:"owner"}).then(function(R){let{data:M,args:A,request_id:F}=R;var W=!0;return y&&y(W,M,A,F),{data:M,args:A,request_id:F}}).catch(function(R){let{data:M,args:A,request_id:F}=R;var W=!1;return y&&y(W,M,A,F),{data:M,args:A,request_id:F}})},enable:function(){var R=h("owner");R&&TS.redux.dispatch(TS.interop.userGroups.enableUserGroup({usergroup:R.id})).then(M=>{y(!0,M)})}},admins:{create:function(){TS.interop.api.call("subteams.createAuto",{type:"admin"}).then(function(R){let{data:M,args:A,request_id:F}=R;var W=!0;return y&&y(W,M,A,F),{data:M,args:A,request_id:F}}).catch(function(R){let{data:M,args:A,request_id:F}=R;var W=!1;return y&&y(W,M,A,F),{data:M,args:A,request_id:F}})},enable:function(){var R=h("admin");R&&TS.redux.dispatch(TS.interop.userGroups.enableUserGroup({usergroup:R.id})).then(M=>{y(!0,M)})}}};r.off("click").on("click","a.user_group_auto_action",function(R){var M=$(R.target),A=M.data("auto-type"),F=M.data("auto-action");if(L[A]&&L[A][F])return L[A][F](),R.preventDefault(),!1})},"_bindListUI"),U=c(function(y,L){if(!y){TS.warn("Cannot switch toggle view to undefined User Group");return}K(),t.html(TS.templates.user_group_toggle({action:L,user_group:y})),t.find('[data-action="cancel"]').on("click",f),t.find(".user_group_toggle_btn").on("click",function(){var R=$(this).data("action");_.includes(["enableUserGroup","disableUserGroup"],R)&&TS.redux.dispatch(TS.interop.userGroups[R]({usergroup:y.id})).then(()=>{R==="enableUserGroup"&&D(y),g()}).catch(function(M){const{data:A}=M;return E(!1,A)})}),u.addClass("hidden"),t.removeClass("hidden"),a()},"_switchToggleView"),D=c(function(y){TS.interop.userGroups.upsertUserGroup(y),TS.interop.userGroups.searchLocalUserGroups()},"_upsertUserGroup"),k=c(function(y,L){K(),r.html(TS.templates.user_group_settings_form(y)),m=!1,$("#user_group_default_channels").lazyFilterSelect(ee(y,L)),te(y),u.addClass("hidden"),r.removeClass("hidden"),a()},"_switchSettingsFormView"),H=c(function(y,L){if(!y||!L)return!1;const R=y&&y.id,M=L.prefs.channels.concat(L.prefs.groups);return _.includes(M,R)},"isPreselected"),Y=c(function(y,L){const R=_.get(L,"prefs.channels",[]);return(R.length?TS.shared.ensureModelObsArePresent(R):Promise.resolve()).then(function(){return TS.interop.searcher.search({query:y,options:{entities:{channels:{includePublic:!0,includePrivate:!0,includeFromAnotherTeam:!1,includeMpims:!1,includeArchived:!1,searchPreviousNames:!1,onlyVisibleMpims:!1,includeRequired:!0}},limit:100,tiered:!0,allowEmptyQuery:!0,sort:{frecency:!0}}})}).then(function(A){return A})},"getLFSChannels"),V=c(function(y,L){return function(R){return Y(R,y).then(function(M){const A=_.map(M,F=>{const W=F.id,J=m?!1:H(F,y);return{model_ob:F,lfs_id:W,preselected:J}});return!m&&L&&L.length>0&&_.differenceWith(L,A,(W,J)=>W.id===J.lfs_id).forEach(W=>{W&&W.id&&A.push({lfs_id:W.id,model_ob:W,preselected:!0})}),m=!0,{replace_all_items:!0,all_items_fetched:!0,items:A}})}},"_getLFSChannelsProvider"),ee=c(function(y,L){return{data_promise:V(y,L),template:function(R){const M=R.model_ob;let A="";return A+=TS.interop.rules.channels.isPublicChannel(M)?"#":'<ts-icon class="ts_icon_lock ts_icon_inherit"></ts-icon>',A+=_.escape(M.name||TS.interop.i18n.t("private channel","channel_token")()),TS.interop.rules.channels.isOrgShared(M)?A+=' <ts-icon class="ts_icon_shared_channel ts_icon_inherit"></ts-icon>':TS.interop.utility.isModelObjectExternal(M)&&(A+=TS.templates.shared_channels_icon({model_ob:M,tooltip:!0,connectedTeamIds:TS.interop.rules.channels.getConnectedTeamIds(TS.redux.getState(),M),inherit:!0})),new Handlebars.SafeString(A)},placeholder_text:""}},"_getLFSChannelsOptions"),te=c(function(y){var L,R,M;y?(L=TS.interop.userGroups.updateUserGroup,R=!1,M=y.id):(L=TS.interop.userGroups.createUserGroup,R=!0);var A=$("#user_group_handle_input");A.on("input",function(){$(this).closest(".handle_input").toggleClass("empty",!this.value.length)}),r.find(".user_group_settings_form").on("submit",function(re){re.preventDefault();var X=$('input[name="name"]').val(),Q=$('input[name="handle"]').val(),le=$('input[name="description"]').val(),ue=$("#user_group_default_channels").lazyFilterSelect("value");ue=_.map(ue,"model_ob.id");var de={name:X,handle:Q,description:le,channels:ue};M&&(de.usergroup=M),TS.redux.dispatch(L(de)).then(function(d){const S=d.usergroup;D(S),R?_e(S,R):g(),TS.user_groups.updated_info_sig.dispatch(S.id)}).catch(function(d){const{data:S}=d;return E(!1,S)})}),r.find(".user_group_settings_form").on("reset",f);var F=$("#save_user_group"),W=$("#user_group_name_input");function J(){var re=W.val(),X=A.val();!_.isEmpty(re)&&!_.isEmpty(X)?F.removeAttr("disabled"):F.attr("disabled",!0)}c(J,"inputChange"),F.length&&W.length&&A.length&&(W.on("change",J),W.on("keyup",J),A.on("change",J),A.on("keyup",J),J())},"_bindSettingsFormUI"),_e=c(function(y,L){var R=!!y.is_external||!!y.auto_type||!TS.interop.userGroups.canEditUserGroups(),M=c(function(){r.html(TS.templates.user_group_members_form({is_new:L,is_locked:R,user_group:y}))},"renderForm"),A=c(function(){var W=$("#member_count"),J=y.user_count||0,re=c(function(){var Q=$(L?"#create_group":"#save_group");Q.length&&(J<1?Q.prop("disabled",!0):Q.prop("disabled",!1))},"updateForm"),X={approx_item_height:36,template:function(Q){var le=TS.templates.user_group_invite_member_small(Q);return new Handlebars.SafeString(le)},onItemAdded:function(){J+=1,W.html(J),re()},onItemRemoved:function(){J-=1,W.html(J),re()},filter:function(Q,le){var ue=Q.member;le.charAt(0)==="@"&&(le=le.substr(1));var de=new RegExp(`^${TS.utility.regexpEscape(le)}`,"i"),d=new RegExp(`(-|_|\\+|\\s|\\.|@)${TS.utility.regexpEscape(le)}`,"i");return TS.utility.members.checkMemberMatch(ue,de)||TS.utility.members.checkMemberMatch(ue,d)},disabled:R,data_promise:se(y)};$("#user_group_members_select").lazyFilterSelect(X),me(y),u.addClass("hidden"),r.removeClass("hidden"),K(),re()},"renderUI");if(L)M(),TS.ui.fs_modal.hideBackButton(),A();else{var F=c(function(){M(),a(),A()},"work");if(TS.user_groups.legacyNeedsToFetchMembership(y))TS.interop.userGroups.getUserGroupMembers(y.id,function(W){if(W&&W.users){y=W;const J=_.get(y,"users",[]);return TS.interop.members.ensureMembersArePresent(J).then(F)}});else{const W=_.get(y,"users",[]);return TS.interop.members.ensureMembersArePresent(W).then(F)}}},"_switchMembersFormView"),se=c(function(y){var L=!0;return function(R,M){R.charAt(0)==="@"&&(R=R.substring(1));var A=!1;if(L&&(L=!1,_.get(y,"users.length")&&(A=!0)),A){var F=y.users.map(X=>TS.interop.members.getMemberById(X));F.sort(TS.members.memberSorterByName);var W=F.map(function(X){return X?{member:X,lfs_id:String(X.id),preselected:!0}:{}});return Promise.resolve(W)}if(M>0)return Promise.resolve([]);var J={query:R,include_org:!1,include_slackbot:!1,include_self:!0,full_profile_filter:!1,include_bots:!0,include_profile_only_users:!0},re=Z(J);return re}},"_buildMembersSelectDataPromise"),Z=c(function(y){return Promise.resolve().then(function(){return TS.members.promiseToSearchMembers(y).then(function(L){var R=[];return L.query===""?R=TS.utility.teams.getMembersForTeam(TS.model.team):R=L.items,L.items=R.filter(ce).map(function(M){return{member:M,lfs_id:String(M.id)}}),L})})},"_getSearchPromise"),me=c(function(y){r.find(".user_group_members_form").on("submit",function(L){L.preventDefault();var R=$("#user_group_members_select").lazyFilterSelect("value");R=R.map(function(M){return M.member.id}),TS.redux.dispatch(TS.interop.userGroups.updateMembersOfUserGroup({usergroup:y.id,users:R})).then(M=>{g(),TS.user_groups.updated_info_sig.dispatch(M.usergroup.id)}).catch(M=>{const{data:A}=M;E(!1,A)})}),r.find(".user_group_members_form").on("reset",function(L){L.preventDefault(),f(L)})},"_bindMembersFormUI"),he=c(function(y){var L=$(y.target),R=L.val();R!==C&&(C=R,N.toggleClass("hidden",R===""),TS.interop.userGroups.setSearchQuery(C))},"_updateSearch"),ge=c(function(){var y=$("#user_group_modal_search");C="",y.val(""),setTimeout(function(){y.focus()},0),N.addClass("hidden"),TS.interop.userGroups.setSearchQuery(C)},"_clearSearch"),ce=c(function(y){return y?!!((TS.interop.rules.members.isMemberOnTeam(y,TS.model.team.id)||y.is_profile_only_user)&&!y.deleted&&!y.is_ultra_restricted&&!y.is_restricted&&!(y.is_bot||TS.interop.rules.members.isSlackbot(y))):!1},"_isFullLocalMember"),pe=c(function(y){var L=$("#user_groups_tab .count");L.html(y.length)},"_updateTabUserGroupsCount"),K=c(function(){s=!1;var y=$("#user_groups_list_div");TS.interop.unmountUserGroupsList(y[0])},"_cleanupListView"),C,N})()},2021630798:()=>{(function(){TS.registerModule("ui.fs_modal",{is_showing:!1,transition_duration:250,start:function(V){if(TS.ui.fs_modal.is_showing)return k(V);f=_.defaults({},V,g),TS.ui.fs_modal.is_showing=!0,TS.tips.hideAll(),a(),f.modal_class&&u.addClass(f.modal_class),f.modal_bg_class&&r.addClass(f.modal_bg_class),f.modal_contents_container_class&&u.find(".contents_container").addClass(f.modal_contents_container_class),n=u.find(".contents"),o=u.find("#fs_modal_sidebar"),s=u.find("#fs_modal_header"),v=u.find("#fs_modal_footer_content");var ee;if(f.body_template_html?(ee=f.body_template_html,f.body&&TS.warn("Both body and body_template_html were passed in settings to TS.ui.fs_modal.start(). Using body_template.")):ee=TS.templates.fs_modal_generic_contents({settings:f,fs_modal_header:_.includes(f.modal_class,"fs_modal_header"),fs_modal_footer:_.includes(f.modal_class,"fs_modal_footer")}),n.html(ee),f.header_html&&s.replaceWith(f.header_html),f.footer_html&&v.html(f.footer_html),f.sidebar_html&&o.html(f.sidebar_html),V.title&&u.attr("aria-label",V.title),!V.title&&s&&u.attr("aria-labelledby","fs_modal_header"),$("#client-ui").attr("aria-hidden",!0),u.on("click",".dialog_go",h),u.on("click",".dialog_secondary_go",E),u.on("click",".dialog_cancel",B),$(window.document).off(".fs_modal"),$(window.document).on("keydown.fs_modal",x),$(window.document).on("focusin.fs_modal",b),t.on("click",function(){f.esc_for_ok?h():B()}),$("html").addClass("fs_modal_active"),setTimeout(function(){r&&r.addClass("active"),u&&u.addClass("active")},0),u.find("input").length?u.find("input").first().focus():document.activeElement&&document.activeElement!==document.body&&document.activeElement.blur(),f.onShow&&f.onShow(),f.onShowComplete||TS.model.is_our_app){var te=!1,_e=H();l=setTimeout(function(){te=!0,f.onShowComplete&&f.onShowComplete(),u.off(`${_e}.fs_modal_show_complete`)},600),u.one(`${_e}.fs_modal_show_complete`,function(){te||(clearTimeout(l),f.onShowComplete&&f.onShowComplete())})}},close:function(V){B(V)},bindBackButton:function(V){$("#fs_modal_back_btn").off("click.fs_modal").on("click.fs_modal",V)},unbindBackButton:function(){$("#fs_modal_back_btn").off("click.fs_modal")},showBackButton:function(){$("#fs_modal_back_btn").removeClass("hidden")},hideBackButton:function(){$("#fs_modal_back_btn").addClass("hidden")},activate:function(){u.addClass("active"),r.addClass("active")},deactivate:function(){u.removeClass("active"),r.removeClass("active")},hideFooter:function(){m.length&&(u.removeClass("fs_modal_footer"),m.addClass("hidden"))},isShowing:function(){return TS.ui.fs_modal.is_showing}});var u,r,t,n,o,s,m,v,l,i=".modal,[role=dialog]:not(.modal),[role=alertdialog]:not(.modal)",f=null,g={title:"",body:"",body_template_html:null,show_go_button:!0,show_secondary_go_button:!1,show_cancel_button:!0,go_button_text:TS.interop.i18n.t("OK","fs_modal")(),go_button_class:"",secondary_go_button_text:TS.interop.i18n.t("OK 2","fs_modal")(),secondary_go_button_class:"",cancel_button_text:TS.interop.i18n.t("Cancel","fs_modal")(),disable_default_controls:!1,disable_esc:!1,onGo:null,onSecondaryGo:null,onCancel:null,onEnd:null,esc_for_ok:!1,onShow:null,enter_always_gos:!1,fullscreen:!1,modal_class:null,modal_bg_class:null,modal_contents_container_class:null,sidebar_html:null,header_html:null,footer_html:null,full_height_contents:!1},a=c(function(){r=null,u=null,s=null,m=null,v=null,t=null,n=null,o=null;var V={settings:f,fs_modal_header:_.includes(f.modal_class,"fs_modal_header"),fs_modal_footer:_.includes(f.modal_class,"fs_modal_footer"),fs_modal_sidebar:_.includes(f.modal_class,"fs_modal_sidebar"),disable_default_controls:f.disable_default_controls},ee=TS.templates.fs_modal(V);$("body").append(ee),r=$("#fs_modal_bg"),u=$("#fs_modal"),s=$("#fs_modal_header"),m=$("#fs_modal_footer"),t=$("#fs_modal_close_btn")},"_build"),h=c(function(){if(!TS.ui.fs_modal.is_showing){TS.error("not showing?");return}f.onGo?f.onGo()!==!1&&B():B()},"_go"),E=c(function(){if(!TS.ui.fs_modal.is_showing){TS.error("not showing?");return}f.onSecondaryGo?f.onSecondaryGo()!==!1&&B():B()},"_secondaryGo"),x=c(function(V){if(V.which==TS.utility.keymap.enter&&(TS.utility.getActiveElementProp("NODENAME")==="BODY"||f.enter_always_gos))f.show_go_button&&(h(),V.preventDefault());else if(V.which==TS.utility.keymap.esc){if(f.disable_esc)return;f.esc_for_ok?h():(B(),f.clog_name&&TS.interop.clog.track(`${f.clog_name}_ACTION`,{source:f.clog_source,action:"close_modal",trigger:"esc_key"}))}},"_onKeyDown"),b=c(function(V){var ee=$(i).filter(function(){return $(this).css("display")!=="none"}).toArray(),te=_.sortBy(ee,function(se){return parseInt($(se).css("z-index"),10)}).pop();if(u.is(te)){var _e=V.target;!u.is(_e)&&!u.has(_e).length&&u.focus()}},"_onFocus"),B=c(function(V){Y(V)&&(u&&u.removeClass("active"),r&&r.removeClass("active"),setTimeout(function(){$("html").removeClass("fs_modal_active")},TS.ui.fs_modal.transition_duration),f.onCancel&&f.onCancel(),D())},"_cancel"),U=c(function(){u.removeAttr("aria-label"),u.removeAttr("aria-labelledby"),u.remove(),r.remove(),TS.ui.fs_modal.is_showing=!1},"_clean"),D=c(function(){setTimeout(function(){U(),$("#client-ui").removeAttr("aria-hidden")},TS.ui.fs_modal.transition_duration),$(window.document).off("keydown.fs_modal"),$(window.document).off("focusin.fs_modal"),clearTimeout(l),u.off(`${H()}.fs_modal_show_complete`),f.onEnd&&f.onEnd(),TS.tips.unhideAll()},"_end"),k=c(function(V){u.removeClass("active"),f.onCancel&&f.onCancel();var ee=r.attr("id",null).addClass("fs_modal_bg");return new Promise(te=>{setTimeout(function(){u.remove(),TS.ui.fs_modal.is_showing=!1,te(TS.ui.fs_modal.start(V)),setTimeout(ee.remove.bind(ee),TS.ui.fs_modal.transition_duration)},TS.ui.fs_modal.transition_duration)})},"_swap"),H=c(function(){var V={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",transition:"transitionend"};for(var ee in V)if(u[0].style[ee]!==void 0)return V[ee]},"_getTransitionEndEventName"),Y=c(function(V){return V?!0:!(TS.ui.lazy_filter_select.is_list_open||TS.model.menu_is_showing||TS.model.dialog_is_showing||TS.utility.isTabCompleteShowing())},"_canClose")})()},5908611399:()=>{(function(){TS.registerModule("ui.lazy_filter_select",{STYLES:{default:"default",filter_in_list:"filter_in_list",normal:"normal",small:"small"},onStart:function(){$("select[data-lazy-filter-select], label[data-lazy-filter-select] select").addClass("hidden").lazyFilterSelect({use_data_attributes:!0})},create:function(e,p){if(p.use_data_attributes){var w=Object.keys(e.data());w.forEach(function(q){if(q.indexOf("lazyFilterSelect")>-1&&q!=="TS-lazyFilterSelect"&&e.data(q)!==""){var ie=e.data(q);(ie==="true"||ie==="false")&&(ie=ie==="true"),p[q.replace("lazyFilterSelect","").toLowerCase()]=ie}})}e.prop("tagName")==="SELECT"&&typeof p.single>"u"&&(p.single=!e.prop("multiple"));var T=$.extend({},u,p);p.approx_divider_height===void 0&&(T.approx_divider_height*=1),p.approx_item_height===void 0&&(T.approx_item_height*=1);var O=$('<div class="lazy_filter_select">');T.classes&&O.addClass(T.classes),e.prop("disabled")&&(T.disabled=!0),T.disabled&&O.addClass("disabled"),T.style=_.get(TS.ui.lazy_filter_select.STYLES,T.style,TS.ui.lazy_filter_select.STYLES.default),P(T)&&!T.single&&(TS.warn("Multi-select lazyFilterSelect instances can't use the 'filter_in_list' style. Using 'default' style instead."),T.style=TS.ui.lazy_filter_select.default);var z=TS.templates.lazy_filter_select_container({instance:T,aria_labelledby:e.attr("aria-labelledby"),STYLES:TS.ui.lazy_filter_select.STYLES});return O.html(z),T.append?O.appendTo(e):O.insertAfter(e),O.addClass(`${T.style}_style`),T.single&&(O.addClass("single"),O.attr("tabindex",0)),T.width&&O.css("width",T.width),T.css&&O.css(T.css),T.$container=O,T.$select=e,T.$input_container=O.find(".lfs_input_container"),T.$lfs_value=O.find(".lfs_value"),T.$input=O.find(".lfs_input"),T.$list_container=O.find(".lfs_list_container"),T.$list=O.find(".lfs_list"),T.$status=O.find(".lfs_status"),T.$status_loading_indicator=T.$status.find(".lfs_status_loading_indicator"),T.$status_content=T.$status.find(".lfs_status_content"),P(T)?T.$filter_input=O.find(".lfs_filter_input"):T.$filter_input=T.$input,T._page_number=1,T._slug_id_counter=1,T.run=ge,T.data_promise?(K(T)&&T._running_promise.cancel("Uhhh..."),T._running_promise=pe(T,"").then(function(q){T.data=q,T.run(),o(T)},function(q){o(T),TS.interop.utility.getLogger({getState:TS.redux.getState}).error(q,"LFS error"),G(T,q,"Something failed while trying to return the initial data for lazyFilterSelect.")})):(T.data&&(T.data=T.data.slice()),_.forEach(T.data,function(q,ie,oe){q&&q._is_interop_channel_object&&(oe[ie]=_.assign({},q))}),T.run(),o(T)),T.current_items_in_view_signal=new signals.Signal,T},is_list_open:!1});var u={allow_item_unselect:!1,allow_list_position_above:!1,always_visible:!1,append:!1,approx_divider_height:28,approx_item_height:30,data_promise:null,data_qa:"lfs",disabled:!1,filter:function(e,p){var w=e.toString();if(p=p.toLowerCase(),e instanceof jQuery||e instanceof HTMLElement){w=$(e).text();var T=$(e).attr("data-additional-search-field");if(T&&T.toLowerCase().indexOf(p)>-1)return!0}return w.toLowerCase().indexOf(p)>-1},input_debounce_wait_time:void 0,listItemClass:null,max_selected_items:1/0,min_query_length:0,monkey_scroll:!0,no_default_selection:!1,noResultsTemplate:function(e){return I(this)&&e.length<this.min_query_length?TS.interop.i18n.t("{query_length, plural, =0 {Start typing to see results\u2026} other {Keep typing to see results\u2026}}","lazy_filter_select")({query_length:e.length}):TS.interop.i18n.t("No items matched {query}","lazy_filter_select")({query:TS.interop.i18n.safeString(`<strong>${_.escape(e)}</strong>`)})},errorTemplate:function(e){return e||TS.interop.i18n.t("Couldn't load results.","lazy_filter_select")()},onInputBlur:_.noop,onInputFocus:_.noop,onReady:function(){},onItemAdded:function(){},onItemRemoved:function(){},onKeyDown:function(){},onMaxItemsSelected:function(){},onListShown:_.noop,onListHidden:_.noop,adjustAvailableSpaceAbove:_.identity,adjustAvailableSpaceBelow:_.identity,placeholder_text:TS.interop.i18n.t("Choose an option\u2026","lazy_filter_select")(),filter_placeholder_text:TS.interop.i18n.t("Search","lazy_filter_select")(),renderDividerFunc:null,render_item_func:null,restrict_input_container_height:!1,restrict_preselected_item_removal:!1,scroll_threshold:1e3,set_height:!0,single:!1,sluggify:{enabled:!1,delimiter:null,key_name:null,validator:null},style:TS.ui.lazy_filter_select.STYLES.default,template:function(e){var p=e.toString(),w,T;return(e instanceof jQuery||e instanceof HTMLElement)&&(p=$(e).text(),w=de($(e).attr("data-additional-search-field"),this),T=de($(e).attr("data-ts-icon"),this)),p=de(p,this),w&&(p+=` <span class="addl_text">${w}</span>`),T&&(p+=` <ts-icon class="addl_icon ${T}"></ts-icon>`),new Handlebars.SafeString(p)},tokenClass:null,tokenTemplate:null,tokenTemplateSingle:null,use_data_attributes:!1,_$active:null,_all_done_fetching:!1,_list_built:!1,_list_visible:!1,_mouse:{},_page_number:1,_prevent_blur:!1,_previous_val:"",_running_promise:null,_scroll_callback_was_called:!1,_selected:[],_showing_status:!1};$.widget("TS.lazyFilterSelect",{_create:function(){this.instance=TS.ui.lazy_filter_select.create(this.element,this.options)},_destroy:function(){this.instance.$container.remove(),delete this.instance},blur:function(){this.instance.$filter_input.blur()},clearValue:function(){if(this.instance.single){if(this.instance._selected.length){var e=this.instance.$input_container.find(".lfs_item");me(this.instance,e)}}else se(this.instance)},container:function(){return this.instance.$container},disable:function(){g(this.instance)},disabled:function(){return this.instance.disabled},enable:function(){h(this.instance)},focus:function(){this.instance.$filter_input.focus()},getInstance:function(){return this.instance},hideList:function(){U(this.instance,{force:!0}),fe(this.instance)},recomputeHeight:function(){le(this.instance)},setValue:function(e,p){var w=this.element[0].selectedIndex;this.element.val(e),this.element[0].selectedIndex<0&&(this.element[0].selectedIndex=0);var T=this.element[0].options[this.element[0].selectedIndex];if(this.instance.single){if(this.element[0].selectedIndex==w&&!p)return}else se(this.instance);var O=b(this.instance,$(T));y(this.instance,O)},forceSelectItem:function(e){this.instance.$lfs_value.html(s(this.instance,e,{force_selected:!0})),this.instance.$container.addClass("value")},showList:function(){F(this.instance)},update:function(e){Q(this.instance,e)},updatePlaceholder:function(e){this.instance.placeholder_text=e,this.instance.$input.prop("placeholder",e)},updateFilterPlaceholder:function(e){P(this.instance)&&(this.instance.filter_placeholder_text=e,this.instance.$filter_input.prop("placeholder",e))},value:function(){return this.instance._selected}});var r=c(function(e,p){if(D(e)&&p.trim()&&f(e)){var w={};w[e.sluggify.key_name]=p.trim(),w.lfs_id=null,w.lfs_slug_id=e._slug_id_counter,e._slug_id_counter+=1,e._selected.push(w);var T=TS.templates.lazy_filter_select_item({content:e.tokenTemplate(w),applied_classes:"lfs_token",slug_id:w.lfs_slug_id,data_qa:e.data_qa}).replace(/(\r\n|\n|\r)/gm,""),O=$(T);O.insertBefore(e.$input),e.sluggify.validator&&e.sluggify.validator(O),ee(e,e.data),F(e),e.$filter_input.val(""),e._previous_val="",t(e),e.onItemAdded(w),f(e)||e.onMaxItemsSelected()}},"_addUserCreatedSlugFromString"),t=c(function(e){e.single||(e.$input.prop("size",e.$filter_input.val().length+1),e.$filter_input.val().length+e._selected.length===0?A(e):(e.$input_container.removeClass("empty"),e.$input_container.removeClass("error"),d(e)))},"_adjustInput"),n=c(function(e){e.data_promise&&e.$list.on("scroll",function(){var p=$(this).scrollTop(),w=e.$list.height(),T=e.$list.find(".list_items").height(),O=T-p-w;O<=e.scroll_threshold&&!e._scroll_callback_was_called&&!e._all_done_fetching?(i(e,e._previous_val,e._page_number+1),e._scroll_callback_was_called=!0):O>e.scroll_threshold&&e._scroll_callback_was_called&&(K(e)&&e._running_promise.cancel("User scrolled back and we do not need to add more data"),e._scroll_callback_was_called=!1)})},"_bindListListeners"),o=c(function(e){e.$container.on("mouseleave",Re.bind(null,e)),e.$container.on("click",Te.bind(null,e)),e.$container.parents("label").on("click",be.bind(null,e)),e.$container.on("keydown",Be.bind(null,e)),e.$input_container.on("focus",Ue.bind(null,e)),e.$input.on("focus",ye.bind(null,e));var p;_.isUndefined(e.input_debounce_wait_time)?p=we:p=_.debounce(we,e.input_debounce_wait_time),e.$filter_input.on("input",p.bind(null,e)),e.$filter_input.on("keydown",Ee.bind(null,e)),e.$filter_input.on("blur",Ne.bind(null,e)),e.$lfs_value.on("click",ke.bind(null,e)),e.$lfs_value.on("mousedown",We.bind(null,e)),e.$input_container.on("click",".lfs_token",Ce.bind(null,e)),e.$input_container.on("mousedown",".lfs_token",je.bind(null,e)),e.$list_container.on("mousedown",Me.bind(null,e)),e.$list_container.on("mouseup",ze.bind(null,e)),e.$list_container.on("mousemove",".lfs_item",xe.bind(null,e)),e.$list_container.on("mouseleave",".lfs_item.active",Ke.bind(null,e)),e.$list_container.on("click",".lfs_item",Le.bind(null,e)),e.onReady()},"_bindUI"),s=c(function(e,p,w){var T=$(p);w=w||{};var O=w.force_selected||k(e,p),z=p.disabled||p.lfs_disabled;e.restrict_preselected_item_removal&&p.preselected&&(z=!0);var q;w.should_tokenize&&_.isFunction(e.tokenTemplate)?q=e.tokenTemplate(p):e.single&&_.isFunction(e.tokenTemplateSingle)?q=e.tokenTemplateSingle(p):q=e.template(p);var ie=de(T.data("lfs-item-desc"),e),oe={active:e._previous_val!==""&&!O&&!z,disabled:z,lfs_token:w.should_tokenize,selected:O,single:e.single,group_item:T.hasClass("group_item")};return _.isFunction(e.tokenClass)&&(oe[e.tokenClass(p)]=!0),TS.templates.lazy_filter_select_item({content:q,icon:T.data("lfs-item-icon"),desc:new Handlebars.SafeString(ie),applied_classes:TS.utility.getAppliedClasses(oe),lfs_id:p.lfs_id,data_qa:e.data_qa}).replace(/(\r\n|\n|\r)/gm,"")},"_buildItem"),m="position_above",v="show_status",l=c(function(e){if(!(!e._list_built&&!e._showing_status)){e.$list_container.removeClass(m);var p=e.$list.css("max-height");e.$list.css({"max-height":0});var w=e.$list[0].scrollHeight,T=parseInt(e.$list_container.css("padding-top"),10)+parseInt(e.$list_container.css("padding-bottom"),10)+parseInt(e.$list_container.css("border-top-width"),10)+parseInt(e.$list_container.css("border-bottom-width"),10)+parseInt(e.$list_container.css("margin-top"),10)+parseInt(e.$list_container.css("margin-bottom"),10);P(e)&&(T+=e.$filter_input.outerHeight()+parseInt(e.$filter_input.css("margin-bottom"),10));var O=parseInt(e.$list_container.css("max-height"),10),z=2*e.approx_item_height+T,q=Math.min(w+T,O),ie=$(window).height(),oe=e.$input_container[0].getBoundingClientRect().bottom+parseInt(e.$input_container.css("margin-bottom"),10),ve=e.adjustAvailableSpaceBelow(ie-oe);if(e.allow_list_position_above){var Ie=e.$input_container[0].getBoundingClientRect().top+parseInt(e.$input_container.css("margin-top"),10),Se=e.adjustAvailableSpaceAbove(Ie),Oe=Se>=q,Ae=ve>=q&&ve>z;Oe&&!Ae&&(ve=Se,e.$list_container.addClass(m))}var De=Math.floor(Math.min(ve,q)-T);e.$list.css({"max-height":De||p})}},"_sizeAndPositionItemsList"),i=c(function(e,p,w){K(e)&&e._running_promise.cancel("Scrolling happened"),!e._all_done_fetching&&(e._running_promise=e.data_promise(p,w).then(function(T){var O=T;if(O.items&&(O=O.items),O&&O.length){e._page_number+=1,e._current_data||(e._current_data=e.data.slice()),typeof T.all_items_fetched<"u"&&(e._all_done_fetching=!!T.all_items_fetched),typeof T.num_remaining<"u"&&T.num_remaining===0&&(e._all_done_fetching=!0);var z,q=parseInt(T.num_new,10)||0;z=O.slice(-q),z.length?(T._replace_all_items||T.replace_all_items?e._current_data=z:e._current_data=e._current_data.concat(z),a(e,e._current_data)):e._all_done_fetching=!0}else e._all_done_fetching=!0},function(T){TS.interop.utility.getLogger({getState:TS.redux.getState}).error(T,"LFS error"),G(e,T,"Something failed while trying to return the next batch of data for lazyFilterSelect.")}))},"_callScrollCallback"),f=c(function(e){return e._selected.length<e.max_selected_items},"_canAddNewItem"),g=c(function(e){e.disabled||(e.disabled=!0,e.$container.addClass("disabled"),e.$input.prop("disabled",!0),e.$filter_input.prop("disabled",!0))},"_disable"),a=c(function(e,p){_e(e,p),ee(e,p);var w=e._list_built&&(!e.data||e.data.length===0||e.always_visible);w&&F(e,!0),t(e)},"_doAllTheThingsRequiredWithNewData"),h=c(function(e){e.disabled&&(e.disabled=!1,e.$container.removeClass("disabled"),e.$input.prop("disabled",!1),e.$filter_input.prop("disabled",!1))},"_enable"),E=c(function(e,p){for(var w=e.data,T=[],O=0;O<w.length;O+=1){var z=w[O];if(z.lfs_group||z.is_divider){for(var q=[],ie=0;ie<z.children.length;ie+=1){var oe=z.children[ie];e.filter(oe,p)&&q.push(oe)}q.length>0&&T.push({is_divider:!0,lfs_group:!0,label:z.label,children:q})}else e.filter(z,p)&&T.push(z)}return T},"_filterGroup"),x=c(function(e){return e.attr("data-lfs-id")||e.prop("lfs_id")||null},"_getLfsId"),b=c(function(e,p,w){var T=x(p),O;if(w)O=e._selected;else if(O=e.data_promise&&e._current_data?e._current_data:e.data,T.indexOf(".")!==-1){var z=parseInt(T.split(".")[0],10);O=O[z]?O[z].children:O[0].children}var q=O.filter(function(ie){return ie.lfs_id===T});return q.length?q[0]:null},"_getData"),B=c(function(e,p){var w=parseInt(p.attr("data-lfs-slug-id"),10),T=e._selected,O=T.filter(function(z){return z.lfs_slug_id===w});return O.length?O[0]:null},"_getUserCreatedSlugData"),U=c(function(e,p){p=p||{};var w=!e._list_visible||e.always_visible||e.disabled;w&&!p.force||(e._list_visible=!1,e.$list_container.removeClass("visible"),e.$container.removeClass("list_visible"),e.$input_container.removeClass("active"),e._list_built&&e.$list.longListView("setHidden",!0),e._$active=null,e.onListHidden())},"_hideList"),D=c(function(e){return e.sluggify.enabled?e.sluggify.delimiter?e.sluggify.key_name?e.single?(TS.error("Sluggify only works in multi-select versions of lazyFilterSelect."),!1):!0:(TS.error("You must pass a key name to use sluggify with lazyFilterSelect."),!1):(TS.error("You must pass a delimiter regular expression to use sluggify with lazyFilterSelect."),!1):!1},"_instanceCanSluggify"),k=c(function(e,p){if(!e._selected.length)return!1;var w=e._selected.filter(function(T){return T.lfs_id===p.lfs_id});return!!w.length},"_isAlreadySelected"),H=c(function(e){return e instanceof jQuery?!!e.attr("data-lfs-slug-id"):e.lfs_slug_id!==void 0},"_itemIsUserCreatedSlug"),Y=c(function(e,p,w){if(D(e)&&H(p)){var T=$(p),O=de(T.data("lfs-item-desc"),e);e._slug_id_counter=Math.max(p.lfs_slug_id,e._slug_id_counter)+1,e._selected.push(p);var z,q=TS.templates.lazy_filter_select_item({content:e.tokenTemplate(p),icon:T.data("lfs-item-icon"),desc:new Handlebars.SafeString(O),applied_classes:"lfs_token",slug_id:p.lfs_slug_id,data_qa:e.data_qa}).replace(/(\r\n|\n|\r)/gm,"");return z=$(q),z.insertBefore(e.$input),t(e),e.sluggify.validator&&e.sluggify.validator(z),e.data=w.filter(function(ie){return ie.lfs_slug_id!==p.lfs_slug_id}),e.data}},"_loadSlugAndRemoveFromData"),V=c(function(e){var p=e.children("option, optgroup"),w=p.length>0?[]:void 0;return p.each(function(){if($(this).prop("tagName")==="OPTGROUP"){var T=$(this).children("option").toArray();$(this).prop("disabled")&&(T=T.map(function(O){return O.lfs_disabled=!0,O})),w.push({is_divider:!0,lfs_group:!0,label:$(this).prop("label"),children:T})}else w.push(this)}),w},"_parseHTMLOptionData"),ee=c(function(e,p){if(p||(p=e.data),!p){G(e);return}if(p.length===0){j(e);return}if(fe(e,{keep_input_active:!0}),!e._list_built)(!e.data||e.data.length===0)&&(e.data=p),W(e);else{var w=te(p);e.$list.longListView("setItems",w,!0),e._current_data=p,le(e)}l(e)},"_populate"),te=c(function(e){var p=[];return e.forEach(function(w){if(p.push(w),w.children&&w.children.length)for(var T=0;T<w.children.length;T+=1)p.push(w.children[T])}),p},"_preLongListViewPrep"),_e=c(function(e,p){if(p||(p=e.data),!!p){for(var w="",T=!e.single,O=0;O<p.length;){var z=p[O];if(H(z)){p=Y(e,z,p);continue}if(z.children&&z.children.length&&(z.lfs_group=!0),z.lfs_group||z.is_divider){z.is_divider=!0;for(var q=O,ie=0;ie<z.children.length;ie+=1){var oe=z.children[ie];if(oe.lfs_id=oe.lfs_id||`${q}.${ie}`,(oe.selected||oe.preselected)&&e.no_default_selection===!1){if(e.single&&e._selected.length>0||k(e,oe))continue;e._selected.push(oe),w+=s(e,oe,{should_tokenize:T})}}}else if(z.lfs_id=z.lfs_id||String(O),(z.selected||z.preselected)&&e.no_default_selection===!1){if(e.single&&e._selected.length>0||k(e,z)){O+=1;continue}e._selected.push(z),w+=s(e,z,{should_tokenize:T})}O+=1}w.length>0&&(e.$container.addClass("value"),e.single?e.$lfs_value.html(w):($(w).insertBefore(e.$input),e.$input_container.removeClass("empty"),e.$input_container.removeClass("error"),d(e)))}},"_prepItems"),se=c(function(e){for(;e.$input_container.find(".lfs_token").length>0;)Z(e)},"_removeAllSelected"),Z=c(function(e){var p=e.$input_container.find(".lfs_token").last();p.length&&me(e,p)},"_removeLastSelected"),me=c(function(e,p){if(!e.disabled){if(H(p)){he(e,p);return}var w=b(e,p,!0);if(!(w.disabled||e.restrict_preselected_item_removal&&w.preselected)){e._selected=e._selected.filter(function(O){return O!==w});var T=e.$list.find(`[data-lfs-id="${w.lfs_id}"]`);T.removeClass("selected"),p.remove(),ue(e),e.$filter_input.val().length+e._selected.length===0&&A(e),e._selected.length===0&&e.$container.removeClass("value"),e.onItemRemoved(w)}}},"_removeSelected"),he=c(function(e,p){if(D(e)){var w=B(e,p);e._selected=e._selected.filter(function(T){return T!==w}),p.remove(),ue(e),e.$filter_input.val().length+e._selected.length===0&&A(e),e.onItemRemoved(w)}},"_removeUserCreatedSlug"),ge=c(function(){this.data&&this.data.length===0&&TS.warn("Data passed to lazyFilterSelect is empty."),Q(this,this.data),this.always_visible&&F(this),this.restrict_input_container_height&&(this.$container.addClass("has_restricted_input_container_height"),TS.environment.supports_custom_scrollbar||this.$input_container.monkeyScroll())},"_run"),ce=c(function(e,p,w){if(!e.disabled&&p!==e._previous_val)if(e._all_done_fetching=!1,e._previous_val=p,e._$active=null,t(e),e._page_number=1,e._list_built&&e.$list.longListView("scrollToTop",!0),e.data_promise)K(e)&&e._running_promise.cancel("User entered more text"),e._running_promise=pe(e,p).then(function(O){a(e,O),F(e,w)},function(O){TS.interop.utility.getLogger({getState:TS.redux.getState}).error(O,"LFS error"),G(e,O,"Something failed while trying to return the filtered data for lazyFilterSelect.")});else{F(e,w);var T=E(e,p);ee(e,T),t(e)}},"_runQuery"),pe=c(function(e,p){return new Promise(function(w,T){p.length<e.min_query_length?(e._all_done_fetching=!0,w([])):(_.delay(function(){K(e)&&ne(e)},650),e.data_promise(p).then(function(O){O=O||{},_.isUndefined(O.all_items_fetched)||(e._all_done_fetching=!!O.all_items_fetched),O.num_remaining===0&&(e._all_done_fetching=!0);var z=(O.items||O).slice();w(z),fe(e,{keep_input_active:!0})},function(O){T(O),fe(e)}))})},"_runDataPromiseQuery"),K=c(function(e){return e._running_promise&&e._running_promise.isPending()},"_isRunningPromisePending"),C=c(function(e,p){if(!e.disabled){if(!e._list_visible){F(e);return}var w;e._$active?w=e._$active[p](".lfs_item:not(.disabled, .hidden)").first():w=e.$list.find(".lfs_item:not(.disabled, .hidden)").first(),w.length&&(w.scrollintoview({duration:0}),e._$active&&e._$active.removeClass("active"),w.addClass("active"),e._$active=w)}},"_select"),N=c(function(e){return!(e.hasClass("selected")||e.hasClass("disabled"))},"_selectable"),y=c(function(e,p){if(f(e)){if(e.single&&e._selected.length){var w=e.$list.find(`[data-lfs-id="${e._selected[0].lfs_id}"]`);w.removeClass("selected"),e._selected.length=0,e.$lfs_value.empty()}e._selected.push(p),ue(e);var T=$(s(e,p,{should_tokenize:!e.single}));_.isFunction(e.tokenClass)&&T.addClass(e.tokenClass(p)),e.single?e.$lfs_value.html(T):(T.addClass("lfs_token"),T.insertBefore(e.$input)),e.single||(e.$input_container.removeClass("empty"),e.$input_container.removeClass("error"),d(e)),e.$container.addClass("value"),e.onItemAdded(p),f(e)||e.onMaxItemsSelected(),e.single||e.$filter_input.focus()}},"_selectDataItem"),L=c(function(e){return C(e,"nextAll")},"_selectDown"),R=c(function(e){if(!e.disabled){var p=e._$active;if(p.length&&N(p)&&f(e)){p.addClass("selected"),p.removeClass("active"),e._$active=null;var w=b(e,p);y(e,w)}}},"_selectListItem"),M=c(function(e){return C(e,"prevAll")},"_selectUp"),A=c(function(e){e.$input_container.addClass("empty"),S(e)},"_showEmptyState"),F=c(function(e,p){e.disabled||(TS.utility.rAF(function(){e.$filter_input.focus()}),!e._list_visible&&(e._showing_status&&e.always_visible||(e._list_built||W(e),(e._list_built||e._showing_status)&&(e._list_visible=!0,e.$list_container.addClass("visible"),e.$container.addClass("list_visible"),P(e)||e.$input_container.addClass("active"),e._list_built&&e.$list.longListView("setHidden",!1)),e.single&&!p&&(e.$filter_input.val(""),e._previous_val="",e.$filter_input.focus(),I(e)&&(e.data=[]),ee(e)),e.set_height&&(l(e),e.monkey_scroll&&!TS.environment.supports_custom_scrollbar&&e.$list.monkeyScroll()),e.onListShown())))},"_showList"),W=c(function(e){if(!(!e.data||e.data.length===0)){var p=te(e.data);e._list_built=!0;var w={items:p,approx_item_height:e.approx_item_height,approx_divider_height:e.approx_divider_height,preserve_dom_order:!0,calcDividerHeight:function(T){return T.outerHeight()},makeDivider:function(){return $('<div class="lfs_group"></div>')},makeElement:function(){return $(TS.templates.lazy_filter_select_item().replace(/(\r\n|\n|\r)/gm,""))},renderDivider:function(T,O,z){if(e.renderDividerFunc)return e.renderDividerFunc(T,O,z);T.html(de(O.label,e))},renderItem:function(T,O,z){if(e.render_item_func)return e.render_item_func(T,O,z);var q=$(O),ie="active selected disabled single group_item lfs_token",oe={disabled:O.disabled||O.lfs_disabled,selected:k(e,O),single:e.single,group_item:q.hasClass("group_item")};_.isFunction(e.listItemClass)&&(oe[e.listItemClass(O)]=!0);var ve=TS.utility.getAppliedClasses(oe),Ie={"data-qa":`${e.data_qa}-item-${O.lfs_id}`,"data-lfs-id":O.lfs_id,title:O.title};if(T.attr(Ie).removeClass(ie).addClass(ve).html(e.template(O).string),q.data("lfs-item-icon")){var Se=`url(${q.data("lfs-item-icon")})`,Oe=$('<span class="lfs_item_icon">').css("background-image",Se);T.prepend(Oe)}if(q.data("lfs-item-desc")){var Ae=de(q.data("lfs-item-desc"),e),De=$('<span class="lfs_item_desc">').html(Ae);T.append(De)}}};e.$list.longListView(w),n(e),e.$list_items=e.$container.find(".list_items"),TS.utility.rAF(function(){e.monkey_scroll&&!TS.environment.supports_custom_scrollbar&&e.$list.monkeyScroll(),e.$list.longListView("resizeImmediately"),TS.utility.rAF(function(){e.current_items_in_view_signal.dispatch(e.$list.longListView("getCurrentItemsInView")||[])})}),e.$list.longListView("getCurrentItemsInViewSignal")&&e.$list.longListView("getCurrentItemsInViewSignal").add(function(T){e.current_items_in_view_signal.dispatch(T)})}},"_startListView"),J=c(function(e){e.stopPropagation(),e.preventDefault()},"_stopThePresses"),re=c(function(e,p){if(!(e.single||!e.allow_item_unselect)){var w=b(e,p,!0);p.removeClass("selected"),e._selected=e._selected.filter(function(T){return T!==w}),e.$input_container.find(`.lfs_item[data-lfs-id="${w.lfs_id}"]`).remove(),ue(e),e.$filter_input.val().length+e._selected.length===0&&A(e),e._selected.length===0&&e.$container.removeClass("value"),e.onItemRemoved(w)}},"_unselectItem"),X=c(function(e,p){if(!(!D(e)||!H(p))){var w=p.text().trim();p.length&&he(e,p),e.$filter_input.val(w),t(e),e.$filter_input.select()}},"_unsluggifySlug"),Q=c(function(e,p){if(e.data=p||V(e.$select),e.data&&(e._selected=[],_e(e),e.$filter_input.val().length)){var w=e.$filter_input.val();e._previous_val="",ce(e,w)}},"_update"),le=c(function(e){e.restrict_input_container_height&&TS.ui.utility.updateClosestMonkeyScroller(e.$input_container,!0),e.monkey_scroll&&!TS.environment.supports_custom_scrollbar&&(l(e),TS.utility.rAF(function(){TS.ui.utility.updateClosestMonkeyScroller(e.$list,!0)}))},"_updateMonkeyScroll"),ue=c(function(e){if(!e.append){var p=e._selected.filter(function(w){return w instanceof HTMLOptionElement}).map(function(w){return $(w).val()});e.$select.val(p).trigger("change")}},"_updateVal"),de=c(function(e){return e=_.escape(e),e},"_formatTextForDisplay"),d=c(function(e){e.$input.attr("placeholder",""),P(e)&&e.$filter_input.attr("placeholder","")},"_clearPlaceholderText"),S=c(function(e){e.$input.attr("placeholder",e.placeholder_text),P(e)&&e.$filter_input.attr("placeholder",e.filter_placeholder_text)},"_resetPlaceholderText"),P=c(function(e){return e.style===TS.ui.lazy_filter_select.STYLES.filter_in_list},"_isFilterInListStyle"),I=c(function(e){return _.isFunction(e.data_promise)&&e.min_query_length},"_usingMinQueryLength"),G=c(function(e,p,w){ae(e,e.errorTemplate(p),{internal_error_message:w,clear_active_items:!0})},"_showErrorStatus"),j=c(function(e){var p=e.noResultsTemplate(e.$filter_input.val());ae(e,p,{clear_active_items:!0})},"_showNoResultsStatus"),ne=c(function(e){var p=TS.interop.i18n.t("Loading results\u2026","lazy_filter_select")();ae(e,p,{show_loading_indicator:!0})},"_showLoadingStatus"),ae=c(function(e,p,w){w=w||{},e._showing_status=!0,w.internal_error_message&&TS.error(w.internal_error_message),P(e)||e.$input_container.addClass("active"),w.show_loading_indicator&&e.$status_loading_indicator.removeClass("hidden"),w.clear_active_items&&(e._$active=null),e.$status_content.html(p),e.$list_container.addClass(v)},"_showStatus"),fe=c(function(e,p){p=p||{},e._showing_status=!1,p.keep_input_active||e.$input_container.removeClass("active"),e.$status_loading_indicator.addClass("hidden"),e.$list_container.removeClass(v)},"_hideStatus"),Re=c(function(e){e._prevent_blur=!1},"_onContainerMouseleave"),Te=c(function(e){e.disabled||F(e)},"_onContainerClick"),Be=c(function(e,p){e.disabled||p.which!==13||F(e)},"_onContainerKeydownEnter"),be=c(function(e,p){e.disabled||(p.preventDefault(),F(e))},"_onContainerParentsLabelClick"),Ue=c(function(e){e.$input_container.click(),e.$input.focus()},"_onInputContainerFocus"),ye=c(function(e){e._input_is_focused||(e._input_is_focused=!0,e.$input_container.click(),e.onInputFocus()),e.single||e.$input_container.addClass("active")},"_onInputFocus"),we=c(function(e){var p=e.$filter_input.val();if(D(e)&&p.match(e.sluggify.delimiter)){var w=p.split(e.sluggify.delimiter);w.forEach(function(T){T.length&&r(e,T)})}else ce(e,p,!0)},"_onFilterInputInput"),Ee=c(function(e,p){if(!e.disabled){switch(p.keyCode){case TS.utility.keymap.down:J(p),L(e);break;case TS.utility.keymap.up:J(p),M(e);break;case TS.utility.keymap.enter:$e(e,p);break;case TS.utility.keymap.del:Fe(e,p);break;case TS.utility.keymap.tab:Pe(e,p);break;case TS.utility.keymap.esc:He(e,p);break;default:break}e.onKeyDown(p,p.isDefaultPrevented())}},"_onFilterInputKeydown"),Ne=c(function(e){e._prevent_blur||(U(e),fe(e)),e._input_is_focused=!1,e.onInputBlur()},"_onFilterInputBlur"),$e=c(function(e,p){if(e._$active&&e._$active.length&&e._list_visible){J(p);var w=e._$active,T=!e.single&&e.allow_item_unselect&&k(e,b(e,w));if(T)re(e,w);else{if(!f(e))return;R(e);var O=$(p.currentTarget);O.val()!==""&&(O.val(""),e._previous_val="",ee(e)),e.single&&(U(e),fe(e))}}},"_onFilterInputKeydownEnter"),Fe=c(function(e,p){if(e.$filter_input.val()===""){J(p);var w=e.$input_container.find(".lfs_token").last();D(e)&&H(w)?X(e,w):Z(e)}},"_onFilterInputKeydownDel"),Pe=c(function(e,p){e.$filter_input.val().trim()&&D(e)?(J(p),r(e,e.$filter_input.val())):e.tab_to_nav&&(J(p),p.shiftKey?M(e):L(e))},"_onFilterInputKeydownTab"),He=c(function(e,p){J(p),U(e),fe(e),e.$filter_input.blur()},"_onFilterInputKeydownEsc"),ke=c(function(e,p){e.disabled||(p.stopPropagation(),F(e),e._prevent_blur=!1)},"_onValueClick"),We=c(function(e,p){p.which===1&&(e._prevent_blur=!0)},"_onValueMousedown"),Ce=c(function(e,p){e.disabled||(me(e,$(p.currentTarget)),e._prevent_blur=!1)},"_onTokenClick"),je=c(function(e,p){p.which===1&&(e._prevent_blur=!0)},"_onTokenMousedown"),Me=c(function(e,p){p.which===1&&(e._prevent_blur=!0)},"_onListContainerMousedown"),ze=c(function(e){e._prevent_blur&&e.$filter_input.focus()},"_onListContainerMouseup"),xe=c(function(e,p){if(!e.disabled&&!(p.clientX==e._mouse.lastX&&p.clientY==e._mouse.lastY)){var w=$(p.currentTarget);e._$active&&e._$active.removeClass("active"),!w.hasClass("active")&&N(w)&&(w.addClass("active"),e._$active=w),e._mouse.lastX=p.clientX,e._mouse.lastY=p.clientY}},"_onItemMousemove"),Ke=c(function(e,p){$(p.currentTarget).removeClass("active"),e._$active=null},"_onActiveItemMouseleave"),Le=c(function(e,p){if(!e.disabled){p.preventDefault();var w=$(p.currentTarget);e._$active=w;var T=!e.single&&e.allow_item_unselect&&k(e,b(e,w));if(T)re(e,w);else{var O=N(w);if(!O&&!e.single||!f(e))return;if(!O&&e.single){U(e),p.stopPropagation();return}R(e),e.$filter_input.val()!==""&&(e.$filter_input.val(""),e._previous_val="",ee(e)),e.single&&(U(e),p.stopPropagation())}e._prevent_blur=!1}},"_onItemClick")})()},218669524:()=>{(function(){TS.registerModule("ui.validation",{completed_sig:new signals.Signal,onStart:function(){i(),$("body").on("input.validation paste.validation change.validation","[data-validation]",TS.utility.debounce(function(d){$(d.target).is(".ql-editor")||$(d.target).is(".ql-clipboard")?h($(d.target).closest(".ql-container"),{},d):h($(d.target),{},d)},500)),$("body").on("input.channel-name-validation paste.channel-name-validation change.channel-name-validation",'[data-validation*="channel_name"]',function(d){const S=$(d.target);if(!S.is('input[type="text"]'))return;const P={query:ue(S),count:1};TS.interop.channels.fetchAndUpsertChannelsWithQuery({query:P})}),$("body").on("submit.validation","form[data-validation-form]",function(d){var S=$(d.target),P=TS.ui.validation.validate(S);P||d.preventDefault(),TS.ui.validation.completed_sig.dispatch(S,{event:d,passed:P})})},validate:function(d,S){S=S||{};var P=document;if(d){if(d.is("[data-validation]"))return d.length===1?h(d,S):d.toArray().every(function(j){return h($(j),S)});P=d.get(0)}var I=Array.prototype.slice.call(P.querySelectorAll("[data-validation]"));if(S&&S.fast)return I.every(function(j){return h($(j),S)});if(S&&S.verbose){var G={};return I.forEach(function(j){G[j.name]=h($(j),S)}),G}return I.reduce(function(j,ne){return h($(ne),S)&&j},!0)},register:function(d,S){if(a[d]){TS.warn(`${d} cannot be registered because that key is already in use.`);return}if(typeof S!="function"){TS.warn("Only functions can be registered as validators.");return}a[d]=S},showCustomValidation:function(d,S,P,I){M(d,P.error_message||S,P.class,P,I)},getErrorMessage:function(d,S){switch(d){case"invalid_name_required":return o.required;case"invalid_name_punctuation":return o.punctuation;case"invalid_name_maxlength":return o.maxlength;case"invalid_name_specials":return o.specials;case"name_taken":return o.name_taken({name:S.name});case"restricted_action":return l.restricted_action;case"name_invalid_name_required":return v.required;case"invalid_starts_with_at":return v.at_sign;case"name_invalid_name_maxlength":case"too_long":return v.maxlength;case"invalid_reserved_word":return v.reserved;case"name_invalid_name_specials":return v.specials;case"invalid_emoji_not_allowed":return de(S.name||"");case"display_name_not_allowed":return v.sso_display_name;case"invalid_email":return f.invalid;case"url_in_message":return g.url_in_message;case"invalid_target_domain":return s.invalid_target_domain;case"invalid_target_domain_sameorg":return s.invalid_target_domain_sameorg;case"invalid_target_domain_self":return s.invalid_target_domain_self;default:return TS.interop.i18n.t("For some weird reason, that didn\u2019t work. Please try again to continue.","ui_validation")()}},maybeConvertNameErrorCode:function(d){return d==="invalid_name_specials"?"name_invalid_name_specials":d==="invalid_name_maxlength"?"name_invalid_name_maxlength":d==="invalid_name_required"?"name_invalid_name_required":d},showError:function(d,S,P,I){M(d,P.error_message||S,"validation_error",P,I)},showWarning:function(d,S,P,I){M(d,P.warning_message||S,"validation_warning",P,I)},showSuccess:function(d,S,P,I){M(d,P.success_message||S,"validation_success",P,I)},test:function(){return{validations:a}}});var u=80,r=80,t=21,n=TS.interop.i18n.t("Channel names can\u2019t be longer than {maxLength} characters.","ui_validation")({maxLength:r}),o={name_taken:TS.interop.i18n.t("{name} is already taken by a channel, username, or user group.","ui_validation"),lowercase:TS.interop.i18n.t("Channel names must be all lowercase. Try again?","ui_validation")(),maxlength:n,required:TS.interop.i18n.t("Don\u2019t forget to name your channel.","ui_validation")(),specials:TS.interop.i18n.t("Channel names can\u2019t contain spaces, periods, or most punctuation. Try again?","ui_validation")(),punctuation:TS.interop.i18n.t("Names can\u2019t consist solely of punctuation. Please elaborate!","ui_validation")()},s={invalid_target_domain:TS.interop.i18n.t("{targetDomain}.slack.com\xA0doesn\u2019t appear to be in use.","shared"),invalid_target_domain_sameorg:TS.interop.i18n.t("{targetDomain} is a part of your organization.","shared"),invalid_target_domain_self:TS.interop.i18n.t("You\u2019ll need to enter the Slack URL of the other organization.","shared")()},m={firstalphanumeric:TS.interop.i18n.t("Usernames must start with a letter or number. Sorry about that!","ui_validation")(),lowercase:TS.interop.i18n.t("Sorry, usernames must be lowercase!","ui_validation")(),maxlength:TS.interop.i18n.t("Sorry, that\u2019s a bit too long! Usernames must be fewer than {max_length_plus_one} characters.","ui_validation","10f62c929475d76c2b47d666c9703843310ef356")({max_length_plus_one:t+1}),required:TS.interop.i18n.t("Please fill in a username.","ui_validation")(),specials:TS.interop.i18n.t("Usernames can\u2019t contain special characters. Sorry about that!","ui_validation")()},v={required:TS.interop.i18n.t("Unfortunately, you can\u2019t leave this blank.","ui_validation")(),at_sign:TS.interop.i18n.t("Names can\u2019t start with the @ sign \u2014\xA0that\u2019s how your coworkers will mention you in conversation.","ui_validation","dbbcef363a405836bfc582044f84fec0a0a1cc64")(),maxlength:TS.interop.i18n.t("Unfortunately, names can\u2019t be longer than {maxlength} characters.","ui_validation")({maxlength:u}),reserved:TS.interop.i18n.t("That name\u2019s already being used by Slack.","ui_validation")(),specials:TS.interop.i18n.t("Mostly, names can\u2019t contain punctuation. (Apostrophes, spaces, and periods are fine.)","ui_validation")(),emoji:TS.interop.i18n.t("For all manner of complex reasons, names simply cannot contain emoji. Try again?","ui_validation")(),sso_display_name:TS.interop.i18n.t("Display names are automatically set by your organization.","ui_validation")()},l={},i=c(function(){l={restricted_action:TS.interop.i18n.t("Sorry! An admin in your workspace has restricted who can create private channels.","ui_validation")()}},"_initMpimErrorMessages"),f={invalid:TS.interop.i18n.t("This doesn\u2019t seem like an email address. Sorry!","ui_validation")()},g={url_in_message:TS.interop.i18n.t("Unfortunately, custom messages can\u2019t contain URLs.","ui_validation")()},a={dateandformat:se,firstalphanumeric:he,hasnourl:k,isurl:U,isouathredirecturl:D,lowercase:Z,maxcsv:te,maxlength:Y,mincsv:ee,minlength:H,nospace:me,required:x,reservedwords:b,keywords:B,username:ge,channel_name:pe,team_name:K,is_email:C,membername:ce,is_time:y},h=c(function(d,S,P){S=S||{},d.is("[data-validation-for]")&&(S.custom_for=d.attr("data-validation-for")),S.success_message=TS.interop.i18n.t("Nice, thanks!","ui_validation")(),d.is("[data-validation-success]")&&(S.success_message=d.attr("data-validation-success")),d.is("[data-validation-warning]")&&(S.warning_message=d.attr("data-validation-warning")),d.is("[data-validation-error]")&&(S.error_message=d.attr("data-validation-error")),d.is("[data-validation-trim-value]")&&(S.trim_value=!0),X(d)&&re(d,S);var I=E(d).every(function(G){if(G.indexOf("=")===-1)return a[G.trim()](d,S);var j=G.split("=");return a[j[0]](d,S,j[1])});return TS.ui.validation.completed_sig.dispatch(d,{event:P,passed:I}),R(d,I,S)&&TS.ui.validation.showSuccess(d,S.success_message,S,3e3),d.attr("aria-invalid",!I),I},"_validate"),E=c(function(d){return d.is("[data-validation]")?_.compact(d.attr("data-validation").replace(/\s*(,|=)\s*/g,"$1").split(/\s+/)):[]},"_getValidators");function x(d,S){if(d.is('input[type="radio"]')){if($(document.querySelectorAll(`[name="${d.prop("name")}"][data-validation]`)).filter(":checked").length)return!0;TS.ui.validation.showWarning(d,TS.interop.i18n.t("Please select an option","ui_validation")(),S)}else if(d.is('input[type="checkbox"]')){if($(document.querySelectorAll(`[name="${d.prop("name")}"][data-validation]`)).filter(":checked").length)return!0;TS.ui.validation.showWarning(d,TS.interop.i18n.t("Please select at least one option","ui_validation")(),S)}else if(d.is("select")){var P=_.get(d.data(),"TSLazyFilterSelect",!1);if(P&&!_.isEmpty(P.value())||!P&&!_.isEmpty(d.val()))return!0;TS.ui.validation.showWarning(d,TS.interop.i18n.t("Please select an option","ui_validation")(),S)}else if(X(d)){if(Q(d).trim())return!0;TS.ui.validation.showWarning(d,TS.interop.i18n.t("This field can\u2019t be empty","ui_validation")(),S)}else TS.error("Error: cannot validate")}c(x,"_validateRequired");function b(d,S,P){if(d.is('input[type="radio"]')||d.is('input[type="checkbox"]')||d.is("select"))return!0;if(X(d)){var I=Q(d).trim().toLowerCase(),G=P.split(",");if(G.indexOf(I)===-1)return!0;TS.ui.validation.showWarning(d,TS.interop.i18n.t('"{word}" is a reserved word. Try something else!',"ui_validation")({word:TS.interop.i18n.safeString(_.escape(I))}),S)}else TS.error("WTF: cannot validate")}c(b,"_validateReservedWords");function B(d,S){return b(d,S,TS.model.RESERVED_KEYWORDS.join(","))}c(B,"_validateKeywords");function U(d,S,P){var I=Q(d);S&&S.trim_value&&(I=I.trim());var G=TS.interop.i18n.t("This doesn\u2019t seem like a proper link. Sorry!","ui_validation")(),j,ne=!1,ae=!1;if(!I||d.is('input[type="radio"]')||d.is('input[type="checkbox"]')||d.is("select"))return!0;if(!X(d)){TS.error("Error: cannot validate");return}if(P){j=P.split(","),j.indexOf("http")!=-1&&j.indexOf("https")==-1&&j.push("https");for(var fe=0;fe<j.length;fe+=1)I.indexOf(`${j[fe]}://`)===0&&(ne=!0);!ne&&j.indexOf("https")!=-1&&(G=TS.interop.i18n.t("Please use https (for security).","ui_validation")())}else ne=!0,I.indexOf("://")==-1&&(I=`http://${I}`);if(ae=TS.interop.url.simpleIsUrl(I),ae&&ne)return!0;TS.ui.validation.showWarning(d,G,S)}c(U,"_validateIsUrl");function D(d,S,P){if(U(d,S,P)){var I=Q(d);if(I.indexOf("#")==-1)return!0;const G=TS.interop.i18n.t("Oauth redirect URLs should not contain a fragment component (#)","ui_validation")();TS.ui.validation.showWarning(d,G,S)}}c(D,"_validateIsOauthRedirectUrl");function k(d,S){if(d.is('input[type="radio"]')||d.is('input[type="checkbox"]')||d.is("select"))return!0;if(X(d)){var P=Q(d);if(!P||!TS.interop.url.findUrlsInString(P).length)return!0;TS.ui.validation.showWarning(d,g.url_in_message,S)}else TS.error("Error: cannot validate")}c(k,"_validateHasNoUrl");function H(d,S,P,I){return V(d,"minlength",S,P,I)}c(H,"_validateMinLength");function Y(d,S,P,I){return V(d,"maxlength",S,P,I)}c(Y,"_validateMaxLength");function V(d,S,P,I,G){if(d.is('input[type="radio"]')||d.is('input[type="checkbox"]')||d.is("select"))return!0;if(X(d)){var j=Q(d);if(I=+I,j===void 0||isNaN(I)){TS.error("Error: no length to validate");return}if(S==="minlength"){if(TS.interop.utility.getStringLength(j)>=I)return!0;TS.ui.validation.showError(d,TS.interop.i18n.t("This field can\u2019t be less than {minlength, plural, =1{# character}other{# characters}}","ui_validation")({minlength:I}),P)}else if(S==="maxlength"){if(G||W(d,j.length,I,P),TS.interop.utility.getStringLength(j)<=I)return!0;TS.ui.validation.showError(d,TS.interop.i18n.t("This field can\u2019t be more than {maxlength, plural, =1{# character}other{# characters}}","ui_validation")({maxlength:I}),P)}}else TS.error("Error: cannot validate")}c(V,"_validateLength");function ee(d,S,P){return _e(d,"mincsv",S,P)}c(ee,"_validateMinCSV");function te(d,S,P){return _e(d,"maxcsv",S,P)}c(te,"_validateMaxCSV");function _e(d,S,P,I){if(d.is('input[type="radio"]')||d.is('input[type="checkbox"]')||d.is("select"))return!0;if(X(d)){var G=Q(d).trim();if(I=+I,G===void 0||isNaN(I)){TS.error("Error: no length to validate");return}if(S==="mincsv"){if(G.split(/\s*,\s*/).length>=I)return!0;TS.ui.validation.showError(d,TS.interop.i18n.t("This field can\u2019t have less than {minlength, plural, =1{# value}other{# values}}","ui_validation")({minlength:I}),P)}else if(S==="maxcsv"){if(G.split(/\s*,\s*/).length<=I)return!0;TS.ui.validation.showError(d,TS.interop.i18n.t("This field can\u2019t have more than {maxlength, plural, =1{# value}other{# values}}","ui_validation")({maxlength:I}),P)}}else TS.error("Error: cannot validate")}c(_e,"_validateCSV");function se(d,S,P){if(d.is('input[type="radio"]')||d.is('input[type="checkbox"]')||d.is("select"))return!0;if(X(d)){var I=Q(d).trim();if(!I)return!0;var G,j,ne,ae;switch(P){case"Y-m-d":G="YYYY-MM-DD",j=I.match(/^[0-9]{4}-[0-9]{2}-[0-9]{2}$/),ne=j&&j.length===1&&j[0]===I,ne&&(ae=L(`${I}T00:00:00.000Z`));break;case"m-d":G="MM-DD",j=I.match(/^[0-9]{2}-[0-9]{2}$/),ne=j&&j.length===1&&j[0]===I,ne&&(ae=L(`0000-${I}T00:00:00.000Z`));break;default:TS.error("Error: cannot validate");return}if(ne&&ae)return!0;ne?ae||TS.ui.validation.showWarning(d,TS.interop.i18n.t("{value} doesn\u2019t appear to be a valid date. Sorry!","ui_validation")({value:TS.interop.i18n.safeString(_.escape(I))}),S):TS.ui.validation.showWarning(d,TS.interop.i18n.t("This needs to be in the format {pattern}. Sorry!","ui_validation")({pattern:G}),S)}else TS.error("Error: cannot validate")}c(se,"_validateDateAndFormat");function Z(d,S){var P=X(d)?Q(d):d.val(),I=P===P.toLocaleLowerCase();if(I)return!0;TS.ui.validation.showWarning(d,TS.interop.i18n.t("This field must be lowercase only","ui_validation")(),S)}c(Z,"_validateLowercase");function me(d,S){var P=X(d)?Q(d):d.val(),I=/\s/.test(P);if(!I)return!0;TS.ui.validation.showWarning(d,TS.interop.i18n.t("This field can\u2019t contain spaces","ui_validation")(),S)}c(me,"_validateNospace");function he(d,S){var P=X(d)?Q(d):d.val(),I=/^[^\W_]/.test(P);if(I)return!0;TS.ui.validation.showWarning(d,TS.interop.i18n.t("This first character must be a letter or number","ui_validation")(),S)}c(he,"_validateFirstAlphanumeric");function ge(d,S){var P=$.extend({},S,{quiet:!0});if(!x(d,P))TS.ui.validation.showWarning(d,m.required,S);else if(!Y(d,P,t,!0))TS.ui.validation.showWarning(d,m.maxlength,S);else if(!me(d,P))TS.ui.validation.showWarning(d,m.specials,S);else if(!N(d,P,/^[\w._-]+$/))TS.ui.validation.showWarning(d,m.specials,S);else if(!he(d,P))TS.ui.validation.showWarning(d,m.firstalphanumeric,S);else if(!Z(d,P))TS.ui.validation.showWarning(d,m.lowercase,S);else return!!b(d,S,TS.interop.constants.RESERVED_USERNAMES.join(","))}c(ge,"_validateUsername");function ce(d,S,P){var I=$.extend({},S,{quiet:!0});if(d.is('input[type="radio"]')||d.is('input[type="checkbox"]')||d.is("select"))return!0;if(!X(d)){TS.error("Error: cannot validate");return}var G=_.trim(Q(d)),j=TS.interop.i18n.deburr(G.toLowerCase()),ne=le(P);if(_.includes(ne,"required")&&!x(d,I))return TS.ui.validation.showWarning(d,v.required,S),!1;if(!Y(d,I,u,!0))return TS.ui.validation.showWarning(d,v.maxlength,S),!1;var ae=TS.interop.constants.RESERVED_USERNAMES.concat(TS.model.RESERVED_KEYWORDS).map(function(fe){return TS.interop.i18n.deburr(fe)});return ae.indexOf(j)!==-1?(TS.ui.validation.showWarning(d,v.reserved,S),!1):G.charAt(0)==="@"?(TS.ui.validation.showWarning(d,v.at_sign,S),!1):N(d,I,/^[-_.'\u2018\u2019",(){}[\]/;]+$/)?(TS.ui.validation.showWarning(d,o.punctuation,S),!1):N(d,I,/[`~!@#$%^&*+=\\:"<>?|]/)?(TS.ui.validation.showWarning(d,v.specials,S),!1):TS.emoji.hasUnifiedEmoji(G)?(TS.ui.validation.showWarning(d,de(G),S),!1):!0}c(ce,"_validateRealOrDisplayName");function pe(d,S,P){if(d.is('input[type="radio"]')||d.is('input[type="checkbox"]')||d.is("select"))return!0;if(!X(d)){TS.error("Error: cannot validate");return}var I=Q(d),G=le(P),j=_.includes(G,"fix");j&&(I=ue(d));var ne=TS.validation.channel_name_with_errors(I);return ne!==!0?(S.should_truncate=!1,TS.ui.validation.showWarning(d,ne.error_message,S),!1):!0}c(pe,"_validateChannelName");function K(d,S){S=S||{};var P=Q(d).trim(),I=TS.validation.team_name(P);return I!==!0?(S.should_truncate=!1,I.error_key==="empty"?TS.ui.validation.showCustomValidation(d,I.error_message,S):TS.ui.validation.showError(d,I.error_message,S),!1):!0}c(K,"_validateTeamName");function C(d,S){if(d.is('input[type="radio"]')||d.is('input[type="checkbox"]')||d.is("select"))return!0;if(X(d)){var P=Q(d);if(!P)return!0;var I=P.match(TS.utility.email_regex);if(I&&I.length===1&&I[0]===P)return!0;TS.ui.validation.showWarning(d,f.invalid,S)}else TS.error("Error: cannot validate")}c(C,"_validateIsEmail");function N(d,S,P){var I=X(d)?Q(d):d.val();if(!P.test(I))TS.ui.validation.showWarning(d,TS.interop.i18n.t("This field contains invalid characters","ui_validation")(),S);else return!0}c(N,"_validatePattern");function y(d){let S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(d.is('input[type="radio"]')||d.is('input[type="checkbox"]')||d.is("select"))return!0;if(X(d)){var P=Q(d);if(!P||/((1[0-2]|0?[1-9]):([0-5][0-9]) ?([ap][m]))/i.test(P))return!0;TS.ui.validation.showWarning(d,"Try the format 10:30am",S)}}c(y,"_validateTime");var L=c(function(d){if(!isNaN(Date.parse(d))){var S=new Date(d);return!S.toISOString().indexOf(d)}},"_isValidISODate"),R=c(function(d,S,P){var I=$(document.querySelector(`label[for="${P.custom_for||d.attr("name")}"]`));if(I.length)return!(P&&P.quiet)&&S&&I.data("validation-ephemeral")===!1},"_shouldShowSuccess"),M=c(function(d,S,P,I,G){if(I=I||{},_.isUndefined(I.should_truncate)&&(I.should_truncate=!0),!(I&&I.quiet)){var j=$(document.querySelector(`label[for="${I.custom_for||d.attr("name")}"]`));if(j.length){var ne=j.data("validation-timeout");clearTimeout(ne);var ae=j.find(".validation_message");if(ae.length||(ae=$("<span />").addClass("validation_message").toggleClass("overflow_ellipsis",I.should_truncate),d.is("select")&&j.find("select").length?ae.insertBefore(j.find("select")):ae.appendTo(j)),F(d,j,P),!S){ae.remove();return}ae.get(0).title=S,ae.fadeIn(100),j.data("validation-ephemeral",!!G),G&&j.data("validation-timeout",setTimeout(function(){j.removeData("validation-ephemeral").removeData("validation-timeout"),ae.fadeOut(100,function(){F(d,j),ae.remove()})},G))}}},"_showMessage"),A=["validation_error","validation_warning","validation_success"],F=c(function(d,S,P){S.hasClass(P)||(d.removeClass(A.join(" ")),d.addClass(P),S.removeClass(A.join(" ")),S.addClass(P))},"_toggleValidationLevel"),W=c(function(d,S,P,I){P-S<=6?J(d,S,P,I):re(d,I)},"_countdown"),J=c(function(d,S,P,I){var G=document.querySelector(`label[for="${I.custom_for||d.attr("name")}"]`);if(G){var j=[S,P].join("/");$(G).attr("data-countdown",j).addClass("countdown");var ne=window.getComputedStyle(G,":after"),ae=parseFloat(ne.width)||9*j.length;d.hasClass("no_validation_padding")||(d.data("countdown-padding-right")||d.data("countdown-padding-right",parseFloat(d.css("padding-right"))),d.css("padding-right",ae+parseFloat(ne.right)+d.data("countdown-padding-right")))}},"_setCountdown"),re=c(function(d,S){var P=document.querySelector(`label[for="${S.custom_for||d.attr("name")}"]`);P&&($(P).removeClass("countdown"),d.removeData("countdown-padding-right"),d.css("padding-right",""))},"_clearCountdown"),X=c(function(d){return TS.interop&&TS.interop.utility?d.is("input")||d.is("textarea")||TS.interop.utility.isContentEditableElement(d):d.is("input")||d.is("textarea")},"_isElementTextInput"),Q=c(function(d){return TS.utility&&TS.utility.contenteditable?TS.utility.contenteditable.value(d):d.val()},"_getTextInputValue"),le=c(function(d){return _.isString(d)?_(d).split(",").map(_.trim).compact().value():[]},"_parseParams"),ue=c(function(d){var S=Q(d),P=S.toLowerCase().replace(/^#+/,"");if(P=P.replace(/^\s+/,""),P=P.replace(/\s+$/,""),P=P.replace(/\s/g,"-"),P&&S!==P){var I=TS.utility.contenteditable.cursorPosition(d).start;P.length<S.length&&(I-=S.length-P.length),d.val(P),TS.utility.contenteditable.cursorPosition(d,I)}return P},"_fixChannelName"),de=c(function(d){var S=/💩/u,P=[TS.interop.i18n.t("For all manner of complex reasons, names simply cannot contain emoji. Try again?","ui_validation")(),TS.interop.i18n.t("Using emoji for names makes some sense, but sadly, not enough. Try again?","ui_validation","29a0641ffb224418f796bb16c7f79013ec377a4c")(),TS.interop.i18n.t("For technical reasons, emoji are not allowed in names. Try again?","ui_validation")(),TS.interop.i18n.t("Of course you want a name with an emoji. Sadly, it is not to be. Try letters?","ui_validation")()];return d.match(S)?TS.interop.i18n.t("For reasons of party-pooping, names cannot contain emoji. Try again?","ui_validation")():_.sample(P)},"_getInvalidNameEmojiErrorMessage")})()},8755003389:()=>{(function(){TS.registerModule("user_groups",{updated_sig:new signals.Signal,updated_info_sig:new signals.Signal,legacyNeedsToFetchMembership(u){return u.users===void 0||_.size(u.users)!==u.user_count}})})()},4281234352:()=>{(function(){TS.registerModule("utility.contenteditable",{isActiveElement:function(t){return t=u(t),t&&r(t)?document.activeElement===t:!1},focus:function(t){t=u(t),t&&r(t)&&t.focus()},value:function(t,n){return t=u(t),t&&r(t)?(_.isString(n)&&(t.value=n),t.value):""},cursorPosition:function(t,n,o){_.isString(t)&&(t=$(t));var s={start:0,end:0,length:0};if(t=u(t),!t)return s;if(_.isNumber(n))o||(o=0),s.start=n,s.end=n+o,s.length=o,r(t)&&TS.selection.selectCharacters(t,s.start,s.end);else{if(!TS.utility.contenteditable.isActiveElement(t)){var m=$(t).data("utility-contenteditable-cursor-position");if(_.isObject(m))return m}r(t)&&(t.focus(),s.start=t.selectionStart,s.end=t.selectionEnd,s.length=Math.abs(t.selectionEnd-t.selectionStart))}return s},test:function(){var t={_normalizeInput:u,_isFormElement:r};return t}});var u=c(function(t){return!t||(t instanceof jQuery&&t[0]&&(t=t[0]),t.nodeType!==Node.ELEMENT_NODE)?!1:t.tagName.toLowerCase()==="textarea"||t.tagName.toLowerCase()==="input"?t:$(t).hasClass("ql-editor")?t.parentNode:t.hasAttribute("contenteditable")||t.tagName==="DIV"?t:!1},"_normalizeInput"),r=c(function(t){return!t||!t.tagName?!1:t.tagName.toLowerCase()==="textarea"||t.tagName.toLowerCase()==="input"},"_isFormElement")})()},3251160223:()=>{(function(){TS.registerModule("utility.date",{do24hrTime:function(){return TS.model.user&&TS.prefs.prefs_loaded&&TS.prefs.getPref("time24")}})})()},714886902:()=>{(function(){TS.registerModule("utility.enterprise",{splitQueryIntoTerms:function(u,r,t){var n=r,o;return u=u.trim(),u.length>=2&&(n=_.isArray(r)?_.slice(r):[],o=u.split(/\s+/),_.each(o,function(s){n.push({type:t||"fuzzy_with_email",value:s})})),n},getSSOProviderLabel:function(u,r){if(!u)return r;var t=_.get(u,"type",""),n=_.get(u,"name",""),o=t==="",s=t==="saml";return o||s?r:n||r},buildTeamUrl:function(u){return`https://${u||"my"}.${TS.boot_data.abs_root_url.replace(/(http:\/\/|https:\/\/)/,"")}`},buildOrgUrl:function(u){return`https://${u}.enterprise.${TS.boot_data.abs_root_url.replace(/(http:\/\/|https:\/\/)/,"")}`},formatChannelsData:function(u){var r=[];return u.private_channels&&(u.private_channels=_.isArray(u.private_channels)?u.private_channels:[u.private_channels],r=_.map(u.private_channels,function(t){var n=TS.interop.members.getMemberById(t.creator)||{};const o=t.members,s=Array.isArray(o)?o.length:t.members,m={creator_display:n.real_name?n.real_name:n.name,creator_id:t.creator,creator_username:n.name,date_created:t.created,member_count:t.member_count||s,purpose:t.purpose.value,topic:t.topic.value,private:!0};return _({}).assign(t,m).omit("members").value()})),u.channels&&(r=r.concat(_.map(u.channels,function(t){var n=TS.interop.members.getMemberById(t.creator)||{};const o=t.members,s=Array.isArray(o)?o.length:t.members,m={creator_display:n.real_name?n.real_name:n.name,creator_id:t.creator,creator_username:n.name,date_created:t.created,member_count:s||0,purpose:_.get(t,"purpose.value",""),topic:_.get(t,"topic.value",""),private:!1};return _({}).assign(t,m).omit("members").value()}))),r},buildApiOptionsForAnalyticsCSVExport:function(u){var r={};if(u.type&&(r.type=u.type),u.date_range&&(r.date_range=u.date_range),_.get(u.selected_columns,"length")&&(r.cols=u.selected_columns.join(",")),u.team_id&&(r.team_id=u.team_id),u.sort_prefix&&(r.sort_prefix=u.sort_prefix,u.sort_dir&&(r.sort_dir=u.sort_dir)),u.search_term){var t=TS.utility.enterprise.splitQueryIntoTerms(u.search_term,[],"fuzzy_with_email");if(t.length){var n=t.length===1?_.head(t):{type:"and",clauses:t};r.query=JSON.stringify(n)}}return r},recordAnalyticsPricingEvents:function(u,r,t){t=t||{};const n={};switch(r){case"overview_impression":n.action="impression",n.step="team_stats_overview";break;case"coachmark_impression":n.action="impression",n.step=`team_stats_overview_${_.get(t,"callout_module")}_coachmark`;break;case"coachmark_resolve":n.action="click",n.step=`team_stats_overview_${_.get(t,"callout_module")}_coachmark`,n.ui_element="learn_more_btn";break;case"coachmark_reject":n.action="dismiss",n.step=`team_stats_overview_${_.get(t,"callout_module")}_coachmark`,n.ui_element="skip_this";break;case"msg_files_pricing_btn_click":n.action="click",n.step="team_stats_overview",n.ui_element="msg_files_chart_link_btn";break;case"single_callout_upgrade_link_impression":n.action="impression",n.step="team_stats_overview",n.ui_element=`${_.get(t,"callout_module")}_upgrade_link`;break;case"multi_callout_upgrade_link_impression":n.action="impression",n.step="team_stats_overview",n.ui_element="multi_lim_upgrade_link";break;case"data_table_upsell_banner_impression":n.action="impression",n.step=`team_stats_${_.get(t,"report_name")}`;break;case"data_table_upsell_banner_click":n.action="click",n.step=`team_stats_${_.get(t,"report_name")}`,n.ui_element="see_pricing_plans_btn";break;default:}TS.interop.clog.track(u,{contexts:{ui_context:n}})},recordAnalyticsImpression:function(u,r,t,n,o){const s="ENTERPRISE_ANALYTICS",m={},v={};m.action="impression",m.ui_element=r,v.entity_key=t,v.tracking_code=n,v.anchor_page=u,o?v.target_team_id=o:v.target_team_id=TS.enterprise.model.get("org.enterprise.id")||_.get(TS.boot_data,"team_id"),TS.interop.clog.track(s,_.assign({},v,{contexts:{ui_context:m}}))},recordAnalyticsSearchEvent:function(u,r,t){const n="ENTERPRISE_ANALYTICS",o={},s={};o.action="impression",o.action_status=t?2:1,o.ui_element="SEARCH_BAR",s.entity_key=r,s.anchor_page=u,s.target_team_id=TS.enterprise.model.get("org.enterprise.id")||_.get(TS.boot_data,"team_id"),TS.interop.clog.track(n,_.assign({},s,{contexts:{ui_context:o}}))},convertDateRangeToThriftID:function(u){switch(u){case"28d":return"FILTER_LAST_28DAYS";case"30d":return"FILTER_LAST_30DAYS";case"all":return"FILTER_ALL_TIME";default:}},convertTimeseriesTabToClogKey:function(u){switch(u){case"active-users_weekly_active_users":return"wau_ts";case"active-users_daily_active_users":return"dau_ts";case"messages-and-files_messages_sent":return"messages_sent_ts";case"messages-and-files_files_uploaded":return"files_uploaded_ts";case"transparency_where_messages_sent":return"transparency_sent_ts";case"transparency_where_messages_read":return"transparency_read_ts";default:}}})})()},7410197218:()=>{(function(){TS.registerModule("utility.members",{checkMemberMatch:function(u,r,t){return!t&&u.profile&&u.profile.email&&u.profile.email.match(r)||u.profile&&u.profile.real_name_normalized&&u.profile.real_name_normalized.match(r)||u.profile&&u.profile.real_name&&u.profile.real_name.match(r)||u.profile&&u.profile.display_name_normalized&&u.profile.display_name_normalized.match(r)||u.profile&&u.profile.display_name&&u.profile.display_name.match(r)},isMemberRelevantToModel:function(u,r){return _.isObject(u)||(u=TS.interop.members.getMemberById(u)),u?TS.interop.rules.members.isSlackbot(u)?!0:u.deleted?!1:(_.isObject(r)||(r=TS.redux.channels.getEntityById(r)||TS.shared.legacyGetActiveModelOb()),!0):!1},isMemberEKMRevoked:function(u){return u&&u.id==="UREVOKEDU"}})})()},5215436211:()=>{(function(){TS.registerModule("utility.search",{test:function(){return{_fetchMembersFromFlannel:n}},makeClause:function(s,m,v){if(!u(s,m,v)){var l={type:s.toLowerCase(),value:m};return v&&(l.field_id=v),l}},makeConjunction:function(s,m){if(!r(s,m))return{type:s.toLowerCase(),clauses:m}},promiseToSearch:function(s){if(!s)return Promise.reject(new Error("Cannot search without arguments."));if(s.all_of_org&&!TS.boot_data.page_needs_enterprise)return Promise.reject(new Error("cannot search an org when not an enterprise team"));if(!s.solr){if(!s.hasOwnProperty("raw_query"))return Promise.reject(new Error("Flannel searches require a `raw_query` to be provided"));var m=s.raw_query,v=s.count||1/0,l;if(_.isEmpty(s.raw_query)&&!s.only_admins)l=Promise.resolve([]);else{var i={};s.only_admins?i.filter="admins":s.only_local_team&&(i.filter="team"),l=n(s.raw_query,v,s.determine_membership_for_channel,i)}return l.then(function(a){var h=a.objects;if(!s.include_bots){var E=_.remove(h,{is_bot:!0});E.length&&TS.has_pri[o]&&TS.log(o,"Flannel: removed these bots from results:",E)}if(s.exclude_slackbot&&s.include_bots){var x=_.remove(h,{is_slackbot:!0});x.length&&TS.has_pri[o]&&TS.log(o,"Flannel: removed slackbot from results:",x)}if(TS.boot_data.page_needs_enterprise&&!s.all_of_org){var b=_.remove(h,function(D){var k=_.get(D,"enterprise_user.teams",[]),H=_.includes(k,TS.model.team.id),Y=s.include_profile_only_users&&D.is_profile_only_user;return!H&&!Y});b.length&&TS.has_pri[o]&&TS.log(o,"Flannel: removed these org members from results:",b)}if(!s.include_deleted){var B=_.remove(h,{deleted:!0});B.length&&TS.has_pri[o]&&TS.log(o,"Flannel: removed these deleted members from results:",B)}if(!s.include_profile_only_users){var U=_.remove(h,{is_profile_only_user:!0});U.length&&TS.has_pri[o]&&TS.log(o,"Flannel: removed these profile-only users from results:",U)}return h=h||[],{ok:!0,data:{items:h.slice(0,v),next_cursor_mark:null,num_found:h.length,teams:[TS.model.team]},args:{query:m}}})}if(!s.query)return Promise.reject(new Error("Cannot search without a query."));var f={query:JSON.stringify(s.query)};["sort","sort_direction","count","cursor_mark","include_bots","include_deleted","exclude_slackbot","ignore_guest_accounts"].forEach(function(a){s.hasOwnProperty(a)&&(f[a]=s[a])});var g=s.endpoint;return g||(g=s.all_of_org?"search.enterprise":"search.team"),TS.interop.api.call(g,f).catch(t)}});var u=c(function(s,m,v){if(!s){TS.error("cannot make a clause without a type");return}if(!m){TS.error("cannot make a clause without a value");return}s==="custom"&&!v&&TS.error("cannot make a custom type clause without a field id")},"_validateClauseParameters"),r=c(function(s,m){if(!s){TS.error("cannot make a conjunction without an 'and' or 'or' type");return}(!m||m.length<2)&&TS.error("cannot make a conjunction without at least two clauses")},"_validateConjunctionParameters"),t=c(function(s){throw TS.error(`${s.data.error} error occured while searching`),TS.generic_dialog.alert(TS.interop.i18n.t("Sorry! Something went wrong. Please try again.","utility_search")()),s},"_handleError"),n=c(function(s,m,v,l){l=l||{};var i={query:s,count:m};l.filter&&(i.filter=l.filter);var f=TS.members.fetchAndUpsertMembersWithQuery(i);if(!v)return f;var g=_.assign({channels:[v]},i),a=TS.members.fetchAndUpsertMembersWithQuery(g);return Promise.join(f,a).then(function(h){var E=h[0],x=h[1],b=_.map(E.objects,"id"),B=_.map(x.objects,"id"),U={};return B.forEach(function(D){U[D]=!0}),_.difference(b,B).forEach(function(D){U[D]=!1}),TS.redux.dispatch(TS.interop.redux.models.membership.setChannelMembershipInfoForUsers({channelId:v,membershipInfo:U})),E})},"_fetchMembersFromFlannel"),o=1989})()},1764849401:()=>{(function(){TS.registerModule("utility",{onStart:function(){TS.utility.makeRefererSafeLink=_.memoize(TS.utility.makeRefererSafeLink),TS.prefs&&TS.prefs.team_hide_referers_changed_sig&&TS.prefs.team_hide_referers_changed_sig.add(TS.utility.resetRefererSafeLinkCache),m=TS.utility.normalizeDevHost(`https://${document.location.hostname}/files`),v=TS.utility.normalizeDevHost(`https://${document.location.hostname}/team`)},keymap:{alt:18,ctrl:17,cmd_ff:224,cmd_other:91,cmd_right:93,esc:27,shift:16,tab:9,del:8,delete:46,enter:13,left:37,up:38,right:39,down:40,pageup:33,pagedown:34,end:35,home:36,space:32,semicolon:59,equals_sign:187,minus_sign:189,comma:188,period:190,left_square_bracket:219,right_square_bracket:221,V:86,a:65,e:69,b:66,k:75,i:73,z:90,y:89,insert:45,slash:191,f6:117,num_lock:144,insert_extended:96,caps_lock:20},email_regex:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,regexpEscape:function(l,i){return i=Math.min(i||5e5,5e5),l.length>i&&(l=l.slice(0,i)),_.escapeRegExp(l)},makeComparableVersion:function(l){var i=l.split("-")[0];return _.reduce(i.split("."),function(f,g){return f*1e3+parseInt(g,10)},0)},compareSemanticVersions:function(l,i){var f=TS.utility.makeComparableVersion(l),g=TS.utility.makeComparableVersion(i);return f===g?0:f>g?1:-1},doesRectContainRect:function(l,i,f,g){return f=f||0,i.top<l.top-f||i.bottom>l.bottom+f?!1:g?!0:!(i.left<l.left-f||i.right>l.right+f)},shouldLinksHaveTargets:function(){return!1},parseJSONOrElse:function(l,i){if(l==="")return i;try{return JSON.parse(l)}catch{return i}},removeUrlParam:function(l,i){var f=i.split("?")[0],g=i.indexOf("?")!==-1?i.split("?")[1]:"",a=[],h;if(g!==""){a=g.split("&");for(var E=a.length-1;E>=0;E-=1)h=a[E].split("=")[0],h===l&&a.splice(E,1);f=a.length?`${f}?${a.join("&")}`:f}return f},getPathFromSlackUrl:function(l){var i=l.match(s),f=i&&i[2];if(f){var g=l.split(f),a=g[1].split("?")[0];return(f+a).split("/")}},getAppliedClasses:function(l){return _.reduce(l,function(i,f,g){return f&&i.push(g),i},[]).join(" ")},numberWithK:function(l){return l>999?(l=Math.round(l/1e3*10)/10,`${TS.interop.i18n.number(l)||""}K`):TS.interop.i18n.number(l)||""},openInNewTab:function(l,i){let{dontEncodeHash:f=!1}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(l.indexOf("/")===0&&TS.boot_data.team_url){var g=TS.boot_data.team_url;g=g.substr(0,g.length-1),l=g+l}var a=l,h="",E=a.indexOf("?"),x=TS.interop.utility.urlNeedsRefererHiding(l);if(E!==-1){x&&(l=_.escape(l.substring(0,E)));var b=a.substring(E+1,a.length);if(a=a.substring(0,E),b.length){var B=TS.interop.url.queryStringParse(b),U=TS.interop.url.parseUrl(l),D=!1;U&&U.hostname=="accounts.google.com"&&U.pathname=="/o/oauth2/auth"&&(D=!0),_.forEach(B,function(k,H){x?(l=TS.interop.url.setUrlQueryStringValue(l,H,k||"",D),f&&(l=l.replace("%23","#"))):h+=`<input type="hidden" name="${_.escape(H)}" value="${_.escape(k||"")}">`})}}x&&(h=`<input type="hidden" name="url" value="${_.escape(l)}">`,a=`https://${TS.boot_data.redir_domain}/link`),$(`<form>${h}</form>`).attr({method:"GET",action:a,target:i}).appendTo("body").submit().remove()},isScalar:function(l){return/boolean|number|string/.test(typeof l)},sanitizeHTML:function(l,i,f,g){var a=c(function(b){var B=b.tagName.toLowerCase();return i.indexOf(B)<0?null:(Array.prototype.slice.apply(b.attributes).forEach(function(U){f.indexOf(U.name)<0&&b.attributes.removeNamedItem(U.name)}),Array.prototype.slice.apply(b.children).forEach(function(U){var D=a(U);D||b.removeChild(U)}),b)},"_sanitizeNode");u=u||new DOMParser;var h=u.parseFromString(l,"text/html")||u.parseFromString(l,"text/xml"),E=h.body;if(E.children.length!=1)return"";var x=a(E.children[0]);return E=null,h=null,x?g?x:x.outerHTML:""},getChildTextNodes:function(l){var i=[];if(!l)return i;if(l instanceof Text)return i.push(l),i;for(var f=document.createTreeWalker(l,NodeFilter.SHOW_TEXT,null,!1),g=f.nextNode();g;)i.push(g),g=f.nextNode();return i},linkify:function(l,i,f,g){return l&&(l=l.replace(TS.interop.url.URL_REGEXP,function(a){var h;if(a.toLowerCase().indexOf("www.")===0){if(!f)return a;h=`http://${a}`}else h=a;return g?`<${h}|${a}>`:`<a ${TS.utility.makeRefererSafeLink(h)} target="${i||""}">${a}</a>`}),l)},getActiveElementProp:function(l){return document.activeElement?l==="NODENAME"?document.activeElement.nodeName?document.activeElement.nodeName.toUpperCase():"":document.activeElement[l]:""},isTabCompleteShowing:function(){return!!$("#chat_input_tab_ui").length},referer_safe_url_map:{},makeRefererSafeLink:function(l){if(typeof l!="string"){TS.error(`Expected url to be a string, got: ${typeof l}`);return}l=l.replace(/\ue000/g,"").replace(/\ue001/g,""),o(l);var i=l.replace(/&amp;/g,"&");i.match(/javascript(:|&colon;)/gi)&&(i="#");var f=!0,g=TS.utility.sanitizeHTML(`<a href="${i}"></a>`,["a"],["href"],f)||null;g&&(i=g.href),i=_.escape(i).replace(/&amp;/g,"&").replace(/(%27|&#39;)/g,"'"),l&&l.lastIndexOf("/")!==l.length-1&&i&&i.lastIndexOf("/")===i.length-1&&(i=i.slice(0,-1)),i=i||"#";var a=`href="${i}"`,h="onclick",E=TS.interop.utility.getRefererPolicy();if((!TS.model||!TS.model.is_our_app)&&E&&E.rewrite_on_right_click&&(h="onmousedown"),!TS.interop.utility.urlNeedsRefererHiding(l))return a;if(TS.utility.externalURLsNeedRedirecting()){var x=encodeURIComponent(i),b=`https://${TS.boot_data.redir_domain}/link?url=${x}${E&&E.redirect_type?`&v=${E.redirect_type}`:""}`,B=`url-${Math.random()}-${performance.now()}`;TS.utility.referer_safe_url_map[B]=i,a+=` data-referer-safe="1" ${h}="this.href=&quot;${b}&quot;" onmouseover="this.href=TS.utility.referer_safe_url_map[&quot;${B}&quot;]" data-referer-original-href="${i}" rel="noreferrer"`}else a+=' rel="noreferrer"';return a},resetRefererSafeLinkCache:function(){TS.utility.makeRefererSafeLink&&TS.utility.makeRefererSafeLink.cache&&TS.utility.makeRefererSafeLink.cache.clear()},makeSureAllExternalLinksAreRefererSafe:function(l){var i=[];TS.utility.externalURLsNeedRedirecting()?l.find("a[href]:not([data-referer-safe])").each(function(){var f=$(this),g=f.attr("href");if(TS.interop.utility.urlNeedsRefererHiding(g)){i.push(this.outerHTML),f.removeAttr("href");var a=this.outerHTML.replace("<a",function(){return`<a ${TS.utility.makeRefererSafeLink(g)} `});f.replaceWith(a),i[i.length-1]+=`
->
${a}`}}):l.find("a[href]:not([rel])").each(function(){var f=$(this),g=f.attr("href");g.indexOf("mailto")===0||g.indexOf("skype")===0||(g&&g!=="#"?TS.interop.utility.urlNeedsRefererHiding(g)&&(i.push(this.outerHTML),f.attr("rel","noreferrer"),i[i.length-1]+=`
->
${this.outerHTML}`):f.removeAttr("href"))})},sortTable:function(l,i,f,g,a){f=f==="desc"?"desc":"asc",a=a==="desc"?"desc":"asc";function h(B){return function(U,D){var k=E(U,B),H=E(D,B);return $.isNumeric(k)&&$.isNumeric(H)?k==H&&g?(k=E(U,g),H=E(D,g),$.isNumeric(k)&&$.isNumeric(H)?a!=f?H-k:k-H:a!=f?TS.interop.i18n.sorter(H,k):TS.interop.i18n.sorter(k,H)):k-H:TS.interop.i18n.sorter(k,H)}}c(h,"sortFunc");function E(B,U){return $(B).children("td").eq(U).attr("data-sort-val")}c(E,"getCellValue");var x=l.find("tr:gt(0)").toArray().sort(h(i));f==="desc"&&(x=x.reverse());for(var b=0;b<x.length;b+=1)l.append(x[b])},getPercSmartly:function(l,i){if(!l||!i)return"0%";var f=l/i*100;return f!=100&&Math.round(f)==100?"99%":f<.7?"<1%":`${Math.round(f)}%`},hex2rgb:function(l){var i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(l);return i?{r:parseInt(i[1],16),g:parseInt(i[2],16),b:parseInt(i[3],16)}:void 0},setImmediate:function(l){r(l)},debounce:function(l,i){var f;return function(){var g=this,a=arguments;clearTimeout(f),f=setTimeout(function(){l.apply(g,a)},i)}},debounceWithPromise:function(l,i){var f;return function(){var g=this,a=arguments;return f&&f.cancel(),f=new Promise(function(h){setTimeout(h,i)}).then(function(){return l.apply(g,a)}),f}},throttleFunc:function(l,i,f){var g={},a=c(function h(){var E=Array.prototype.slice.apply(arguments),x=_.some(E,_.isObject);x&&TS.error("You're passing non-scalar arguments to a function throttled with TS.utility.throttleFunc; it will likely not work as you want");var b=`f-${E.join("-")}`;if(g[b]&&g[b].context!==this)throw new Error(`Cannot use this function with different \`this\` contexts across different calls ${this} ${g[b].context}`);g[b]=g[b]||{requested:Date.now(),timeout:0,context:this},g[b].timeout||h.always_wait?g[b].requested=Date.now():l.apply(g[b].context,E),!g[b].timeout&&(g[b].timeout=setTimeout(c(function B(){var U=Date.now()-g[b].requested;U>=i?(l.apply(g[b].context,E),delete g[b]):g[b].timeout=setTimeout(B,i-U)},"timerFunc"),i))},"funcReplacement");return a.always_wait=!!f,a},throttle:function(){var l,i;l={delay:200,timer_group:"generic"},i={timers:{},queues:{}};function f(a){var h,E;if(i.timers[a]){if(i.queues[a])for(h=0,E=i.queues[a].length;h<E;h+=1)i.queues[a][h]&&i.queues[a][h]();i.queues[a]=null,i.timers[a]=null}}c(f,"processQueue");function g(a,h,E){if(!a)return!1;h=h||l.timer_group,i.timers[h]||(E=E||l.delay,i.timers[h]=window.setTimeout(function(){f(h)},E)),i.queues[h]||(i.queues[h]=[]),i.queues[h].indexOf?i.queues[h].indexOf(a)===-1&&i.queues[h].push(a):i.queues[h].push(a)}return c(g,"method"),{method:g}}(),getImgProxyURL:function(l,i,f){return TS.utility.getImgProxyURLWithOptions(l,{width:i,height:f})},getImgProxyURLWithOptions:function(l){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return l&&TS.interop.utility.getImgProxyUrl({url:l,height:i.height,width:i.width,rotate:i.rotate,renderSvg:i.render_svg,stopAnimations:i.stop_animations,emoji:i.emoji,convertIco:i.convert_ico})},rAF:function(){var l=["ms","moz","webkit","o"],i=window.requestAnimationFrame,f;for(f=0;f<l.length&&!i;f+=1)i=window[`${l[f]}RequestAnimationFrame`];if(!i){var g=0;return function(a){var h=Date.now(),E=Math.max(0,16-(h-g)),x=window.setTimeout(function(){a(h+E)},E);return g=h+E,x}}return function(a){return i.call(window,a)}}(),getLocationHashString:function(l){l=l||document;var i=l.location.hash;return i&&i.length?i.substr(1):i},externalURLsNeedRedirecting:function(){return!!(TS.model.team&&TS.prefs.getTeamPref("hide_referers")&&!TS.model.is_our_app)},isArrowKey:function(l){var i=TS.utility.keymap;return l==i.down||l==i.up||l==i.right||l==i.left},normalizeDevHost:function(l){return l.replace(/\.dev[0-9]*.slack.com/i,".dev.slack.com").replace(/\.staging.slack.com/i,".slack.com").replace(/\.staging-master.slack.com/i,".slack.com").replace(/\.staging-sandbox.slack.com/i,".slack.com")},areSimpleObjectsEqual:c(function l(i,f){if(i===f)return!0;if(i===void 0&&f||f===void 0&&i||typeof i!=typeof f||i===null&&f||f===null&&i||i.length!==f.length)return!1;var g;for(g in f){if(typeof i[g]>"u"&&typeof f[g]<"u")return!1;if(f[g])switch(typeof f[g]){case"object":if(!l(i[g],f[g]))return!1;break;case"function":if(String(f[g])!=String(i[g]))return!1;break;default:if(f[g]!==i[g])return!1}else if(i[g])return!1}for(g in i)if(typeof f[g]>"u"&&typeof i[g]<"u")return!1;return!0},"recurse"),deepDiffObjects:function(l,i){if(_.isEmpty(l))return{};if(_.isEmpty(i))return l;var f={};return _.each(l,function(g,a){var h=i[a];if(h!==g)if(typeof g!=typeof h)f[a]=g;else if(_.isArray(g))f[a]=_.difference(g,h);else if(_.isPlainObject(g)){var E=TS.utility.deepDiffObjects(g,h);_.isEmpty(E)||(f[a]=E)}else f[a]=g}),f},makeWebWorker:function(l,i){var f=URL.createObjectURL(new Blob(["(",l,")()"],{type:"application/javascript"})),g=new Worker(f);return URL.revokeObjectURL(f),g.onmessage=i,g},truncateToNearestWordBoundary:function(l,i){if(l.string&&(l=l.string),l.length<=i)return l;var f="\u2026",g=l.substring(0,i),a=g.lastIndexOf(" ");return a>0&&a>i-15?g.substring(0,a)+f:g.substring(0,g.length-1)+f},getCachedScript:function(l,i){return i=$.extend(i||{},{dataType:"script",cache:!0,url:l}),jQuery.ajax(i)},disableElement:function(l,i){l=$(l),l.attr("disabled",i),l.attr("aria-disabled",i)},enableFeatureForUser:function(l){return l<0||l>100?(TS.warn("TS.utility.enableFeatureForUser() expects a number between 0 and 100"),!1):_.random(0,100)<l},roundToThree:function(l){return+`${Math.round(`${l}e+3`)}e-3`},exampleEmailAddress:function(l){return l==="you"?TS.interop.i18n.t("you@{example_com}","utility")({example_com:"example.com"}):TS.interop.i18n.t("name@{example_com}","utility")({example_com:"example.com"})},test:function(){var l={};return Object.defineProperty(l,"_files_url",{get:function(){return m},set:function(i){m=i}}),Object.defineProperty(l,"_team_url",{get:function(){return v},set:function(i){v=i}}),l}});var u,r=window.setImmediate;if(!r)if(window.MutationObserver){var t=document.createElement("div"),n=[];new MutationObserver(function(){var l=n.slice();n.length=0,l.forEach(function(i){i()})}).observe(t,{attributes:!0}),r=c(function(l){n.length||t.setAttribute("yes","no"),n.push(l)},"_set_immediate_fn")}else r=c(function(l){setTimeout(l,0)},"_set_immediate_fn");var o=c(function(l){var i=TS.utility.getPathFromSlackUrl(l);if(i&&i.length>1){var f={messages:!0,archives:!0}[i[0]],g=decodeURIComponent(i[1]);f&&g&&TS.interop.utility.looksLikeChannelId(g)&&!TS.interop.channels.hasChannelWithId(g)&&TS.redux.channels.getEntityById(g)}},"_fetchUnknownChannelSlackUrl"),s=/([^.:/]+)(?:\.[^.]+)?\.slack\.com\/((?:messages|archives|unreads|threads|team|page)\/)/,m=null,v=null})()},1823630129:()=>{(function(){TS.registerModule("utility.teams",{getMembersForTeam:function(u){if(_.isObject(u)&&u.id){var r=_.filter(TS.model.members,{team_id:u.id});return r}}})})()},5247437737:(u,r,t)=>{"use strict";var n=t(4260148387),o=t.n(n),s=t(9410205190),m=t.n(s),v=t(9300289889),l=t.n(v),i=t(6131426979),f=t.n(i),g=t(3706413573),a=t.n(g),h=t(3657898688),E=t.n(h),x=t(3404403316),b=t.n(x),B=t(1386085343),U=t.n(B),D=t(4354742961),k=t.n(D),H=t(6318582152),Y=t.n(H),V=t(5790153495),ee=t.n(V),te=t(9170865939),_e=t.n(te),se=t(1484214105),Z=t.n(se),me=t(2769613328),he=t.n(me),ge=t(7004812553),ce=t.n(ge),pe=t(1496158114),K=t.n(pe),C=t(603105959),N=t.n(C),y=t(1823630129),L=t.n(y),R=t(1136428304),M=t.n(R),A=t(5110391454),F=t.n(A),W=t(9331508771),J=t.n(W),re=t(1515948675),X=t.n(re),Q=t(1182967304),le=t.n(Q),ue=t(3693504700),de=t.n(ue),d=t(3318067913),S=t.n(d),P=t(3251160223),I=t.n(P),G=t(7410197218),j=t.n(G),ne=t(1764849401),ae=t.n(ne),fe=t(7164614212),Re=t.n(fe),Te=t(2693193630),Be=t.n(Te),be=t(2021630798),Ue=t.n(be),ye=t(218669524),we=t.n(ye),Ee=t(8377622078),Ne=t.n(Ee),$e=t(5908611399),Fe=t.n($e),Pe=t(2442635577),He=t.n(Pe),ke=t(8755003389),We=t.n(ke),Ce=t(4556606753),je=t.n(Ce),Me=t(6940318340),ze=t.n(Me),xe=t(5215436211),Ke=t.n(xe),Le=t(4281234352),e=t.n(Le),p=t(714886902),w=t.n(p),T=t(540370361),O=t.n(T),z=t(4706726993),q=t.n(z)}},u=>{var r=c(n=>u(u.s=n),"__webpack_exec__"),t=r(5247437737)}]);})();

//# sourceMappingURL=https://slack.com/source-maps/bv1-13/rollup-secondary_a_required.b47f0132a3e04e316d86.min.js.map